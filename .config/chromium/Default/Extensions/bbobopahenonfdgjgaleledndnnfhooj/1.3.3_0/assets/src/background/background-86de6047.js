import{b as Se,h as sr,c as wa,g as Zt,r as hn,a as qg}from"../../Config-486537b1.js";import{b as Kg,c as kg,d as $g,g as zg,h as ii,p as Qg,a as Zg,f as jg,P as fr,_ as Gn,i as Jg}from"../../chunk-QIZ4XBKF-980296cc.js";import{A as ev,N as tv,a as nv,p as rv}from"../../Backend-2b7ff99e.js";import{i as fs}from"../../NumberUtils-ebb78cfe.js";var lr=jg(),Tt=new Map,Vn=new Map,ai=new Map,cs=(E,s)=>(Vn.set(E,(Vn.get(E)||new Set).add(s)),()=>{const i=Vn.get(E);i?.delete(s)&&i?.size===0&&Vn.delete(E)}),ls=(E,s)=>{ai.set(E,(ai.get(E)||new Set).add(s))},wn=E=>({withFingerprint:s=>{const i=B=>({and:()=>B}),R={aboutIncomingMessage:B=>{const H=Tt.get(E);return fr.toExtensionContext(H.port,{status:"incoming",message:B}),i(R)},aboutSuccessfulDelivery:B=>{const H=Tt.get(E);return fr.toExtensionContext(H.port,{status:"delivered",receipt:B}),i(R)},aboutMessageUndeliverability:(B,H)=>{const _=Tt.get(E);return _?.fingerprint===s&&fr.toExtensionContext(_.port,{status:"undeliverable",resolvedDestination:B,message:H}),i(R)},whenDeliverableTo:B=>{const H=()=>{const _=Tt.get(E);if(_?.fingerprint===s&&Tt.has(B))return fr.toExtensionContext(_.port,{status:"deliverable",deliverableTo:B}),!0};if(!H()){const _=cs(B,H);ls(s,_)}return i(R)},aboutSessionEnded:B=>{const H=Tt.get(E);return H?.fingerprint===s&&fr.toExtensionContext(H.port,{status:"terminated",fingerprint:B}),i(R)}};return R}}),iv=Kg(),oi=kg("background",E=>{var s;if(E.origin.context==="background"&&["content-script","devtools "].includes(E.destination.context)&&!E.destination.tabId)throw new TypeError("When sending messages from background page, use @tabId syntax to target specific tab");const i=ii(Gn(Gn({},E.origin),E.origin.context==="window"&&{context:"content-script"})),R=ii(Jg(Gn(Gn({},E.destination),E.destination.context==="window"&&{context:"content-script"}),{tabId:E.destination.tabId||E.origin.tabId}));E.destination.tabId=null,E.destination.frameId=null;const B=()=>Tt.get(R),H=()=>Tt.get(i),_=()=>{var ee;wn(R).withFingerprint(B().fingerprint).aboutIncomingMessage(E);const z={message:E,to:B().fingerprint,from:{endpointId:i,fingerprint:(ee=H())==null?void 0:ee.fingerprint}};E.messageType==="message"&&lr.add(z),E.messageType==="reply"&&lr.remove(E.messageID),H()&&wn(i).withFingerprint(H().fingerprint).aboutSuccessfulDelivery(z)};(s=B())!=null&&s.port?_():E.messageType==="message"&&(E.origin.context==="background"?cs(R,_):H()&&wn(i).withFingerprint(H().fingerprint).aboutMessageUndeliverability(R,E).and().whenDeliverableTo(R))},E=>{const s=ii(Gn(Gn({},E.origin),E.origin.context==="window"&&{context:"content-script"})),i=Tt.get(s),R={message:E,to:iv,from:{endpointId:s,fingerprint:i.fingerprint}};wn(s).withFingerprint(i.fingerprint).aboutSuccessfulDelivery(R)});$g.runtime.onConnect.addListener(E=>{var s;const i=zg(E.name);if(!i)return;i.endpointName||(i.endpointName=ii({context:"content-script",tabId:E.sender.tab.id,frameId:E.sender.frameId}));const{tabId:R,frameId:B}=Qg(i.endpointName);Tt.set(i.endpointName,{fingerprint:i.fingerprint,port:E}),(s=Vn.get(i.endpointName))==null||s.forEach(H=>H()),Vn.delete(i.endpointName),ls(i.fingerprint,()=>{const H=lr.entries().filter(_=>_.to===i.fingerprint);lr.remove(H),H.forEach(_=>{_.from.endpointId==="background"?oi.endTransaction(_.message.transactionId):wn(_.from.endpointId).withFingerprint(_.from.fingerprint).aboutSessionEnded(i.fingerprint)})}),E.onDisconnect.addListener(()=>{var H,_;((H=Tt.get(i.endpointName))==null?void 0:H.fingerprint)===i.fingerprint&&Tt.delete(i.endpointName),(_=ai.get(i.fingerprint))==null||_.forEach(ee=>ee()),ai.delete(i.fingerprint)}),E.onMessage.addListener(H=>{var _,ee;if(H.type==="sync"){const z=[...Tt.values()].map(fe=>fe.fingerprint),de=H.pendingResponses.filter(fe=>z.includes(fe.to));lr.add(...de),H.pendingResponses.filter(fe=>!z.includes(fe.to)).forEach(fe=>wn(i.endpointName).withFingerprint(i.fingerprint).aboutSessionEnded(fe.to)),H.pendingDeliveries.forEach(fe=>wn(i.endpointName).withFingerprint(i.fingerprint).whenDeliverableTo(fe));return}H.type==="deliver"&&((ee=(_=H.message)==null?void 0:_.origin)!=null&&ee.context)&&(H.message.origin.tabId=R,H.message.origin.frameId=B,oi.handleMessage(H.message))})});var{sendMessage:Na,onMessage:ri}=oi;Zg(oi);async function is(E){const[s]=await Se.tabs.query({active:!0});s?.id!==void 0&&await Na("show_alert",E,{tabId:s.id,context:"content-script"})}var ui={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ui.exports;(function(E,s){(function(){var i,R="4.17.21",B=200,H="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",_="Expected a function",ee="Invalid `variable` option passed into `_.template`",z="__lodash_hash_undefined__",de=500,fe="__lodash_placeholder__",be=1,Me=2,P=4,V=1,Y=2,b=1,O=2,G=4,y=8,te=16,oe=32,Be=64,xe=128,Je=256,Ae=512,$e=30,dn="...",jt=800,Jt=16,Pt=1,pn=2,Bt=3,ft=1/0,Ve=9007199254740991,wt=17976931348623157e292,M=0/0,c=4294967295,d=c-1,T=c>>>1,I=[["ary",xe],["bind",b],["bindKey",O],["curry",y],["curryRight",te],["flip",Ae],["partial",oe],["partialRight",Be],["rearg",Je]],L="[object Arguments]",g="[object Array]",f="[object AsyncFunction]",l="[object Boolean]",h="[object Date]",S="[object DOMException]",U="[object Error]",F="[object Function]",k="[object GeneratorFunction]",N="[object Map]",$="[object Number]",J="[object Null]",q="[object Object]",j="[object Promise]",W="[object Proxy]",ae="[object RegExp]",ue="[object Set]",Oe="[object String]",ve="[object Symbol]",Ue="[object Undefined]",Ne="[object WeakMap]",De="[object WeakSet]",ye="[object ArrayBuffer]",Ie="[object DataView]",Pe="[object Float32Array]",Qe="[object Float64Array]",qe="[object Int8Array]",Ct="[object Int16Array]",gn="[object Int32Array]",we="[object Uint8Array]",ct="[object Uint8ClampedArray]",en="[object Uint16Array]",Et="[object Uint32Array]",tn=/\b__p \+= '';/g,Nn=/\b(__p \+=) '' \+/g,Xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,Yt=/[&<>"']/g,hr=RegExp(Mt.source),ci=RegExp(Yt.source),qn=/<%-([\s\S]+?)%>/g,dr=/<%([\s\S]+?)%>/g,vn=/<%=([\s\S]+?)%>/g,pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tn=/^\w*$/,Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,ys=RegExp(Ht.source),li=/^\s+/,ms=/\s/,Ss=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_s=/\{\n\/\* \[wrapped with (.+)\] \*/,bs=/,? & /,Rs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ws=/[()=,{}\[\]\/\s]/,Ns=/\\(\\)?/g,Ls=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Da=/\w*$/,Os=/^[-+]0x[0-9a-f]+$/i,Ds=/^0b[01]+$/i,Ps=/^\[object .+?Constructor\]$/,Cs=/^0o[0-7]+$/i,Xs=/^(?:0|[1-9]\d*)$/,Ms=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gr=/($^)/,xs=/['\n\r\u2028\u2029\\]/g,vr="\\ud800-\\udfff",Us="\\u0300-\\u036f",Fs="\\ufe20-\\ufe2f",Bs="\\u20d0-\\u20ff",Pa=Us+Fs+Bs,Ca="\\u2700-\\u27bf",Xa="a-z\\xdf-\\xf6\\xf8-\\xff",Ys="\\xac\\xb1\\xd7\\xf7",Hs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ws="\\u2000-\\u206f",Gs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ma="A-Z\\xc0-\\xd6\\xd8-\\xde",xa="\\ufe0e\\ufe0f",Ua=Ys+Hs+Ws+Gs,hi="['’]",Vs="["+vr+"]",Fa="["+Ua+"]",Tr="["+Pa+"]",Ba="\\d+",qs="["+Ca+"]",Ya="["+Xa+"]",Ha="[^"+vr+Ua+Ba+Ca+Xa+Ma+"]",di="\\ud83c[\\udffb-\\udfff]",Ks="(?:"+Tr+"|"+di+")",Wa="[^"+vr+"]",pi="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ln="["+Ma+"]",Ga="\\u200d",Va="(?:"+Ya+"|"+Ha+")",ks="(?:"+Ln+"|"+Ha+")",qa="(?:"+hi+"(?:d|ll|m|re|s|t|ve))?",Ka="(?:"+hi+"(?:D|LL|M|RE|S|T|VE))?",ka=Ks+"?",$a="["+xa+"]?",$s="(?:"+Ga+"(?:"+[Wa,pi,gi].join("|")+")"+$a+ka+")*",zs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",za=$a+ka+$s,Zs="(?:"+[qs,pi,gi].join("|")+")"+za,js="(?:"+[Wa+Tr+"?",Tr,pi,gi,Vs].join("|")+")",Js=RegExp(hi,"g"),ef=RegExp(Tr,"g"),vi=RegExp(di+"(?="+di+")|"+js+za,"g"),tf=RegExp([Ln+"?"+Ya+"+"+qa+"(?="+[Fa,Ln,"$"].join("|")+")",ks+"+"+Ka+"(?="+[Fa,Ln+Va,"$"].join("|")+")",Ln+"?"+Va+"+"+qa,Ln+"+"+Ka,Qs,zs,Ba,Zs].join("|"),"g"),nf=RegExp("["+Ga+vr+Pa+xa+"]"),rf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,af=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],of=-1,Xe={};Xe[Pe]=Xe[Qe]=Xe[qe]=Xe[Ct]=Xe[gn]=Xe[we]=Xe[ct]=Xe[en]=Xe[Et]=!0,Xe[L]=Xe[g]=Xe[ye]=Xe[l]=Xe[Ie]=Xe[h]=Xe[U]=Xe[F]=Xe[N]=Xe[$]=Xe[q]=Xe[ae]=Xe[ue]=Xe[Oe]=Xe[Ne]=!1;var Ce={};Ce[L]=Ce[g]=Ce[ye]=Ce[Ie]=Ce[l]=Ce[h]=Ce[Pe]=Ce[Qe]=Ce[qe]=Ce[Ct]=Ce[gn]=Ce[N]=Ce[$]=Ce[q]=Ce[ae]=Ce[ue]=Ce[Oe]=Ce[ve]=Ce[we]=Ce[ct]=Ce[en]=Ce[Et]=!0,Ce[U]=Ce[F]=Ce[Ne]=!1;var uf={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ff={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},cf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lf=parseFloat,hf=parseInt,Qa=typeof sr=="object"&&sr&&sr.Object===Object&&sr,df=typeof self=="object"&&self&&self.Object===Object&&self,Ze=Qa||df||Function("return this")(),Ti=s&&!s.nodeType&&s,En=Ti&&!0&&E&&!E.nodeType&&E,Za=En&&En.exports===Ti,Ei=Za&&Qa.process,It=function(){try{var A=En&&En.require&&En.require("util").types;return A||Ei&&Ei.binding&&Ei.binding("util")}catch{}}(),ja=It&&It.isArrayBuffer,Ja=It&&It.isDate,eo=It&&It.isMap,to=It&&It.isRegExp,no=It&&It.isSet,ro=It&&It.isTypedArray;function lt(A,D,w){switch(w.length){case 0:return A.call(D);case 1:return A.call(D,w[0]);case 2:return A.call(D,w[0],w[1]);case 3:return A.call(D,w[0],w[1],w[2])}return A.apply(D,w)}function pf(A,D,w,Q){for(var se=-1,me=A==null?0:A.length;++se<me;){var Ke=A[se];D(Q,Ke,w(Ke),A)}return Q}function At(A,D){for(var w=-1,Q=A==null?0:A.length;++w<Q&&D(A[w],w,A)!==!1;);return A}function gf(A,D){for(var w=A==null?0:A.length;w--&&D(A[w],w,A)!==!1;);return A}function io(A,D){for(var w=-1,Q=A==null?0:A.length;++w<Q;)if(!D(A[w],w,A))return!1;return!0}function nn(A,D){for(var w=-1,Q=A==null?0:A.length,se=0,me=[];++w<Q;){var Ke=A[w];D(Ke,w,A)&&(me[se++]=Ke)}return me}function Er(A,D){var w=A==null?0:A.length;return!!w&&On(A,D,0)>-1}function Ii(A,D,w){for(var Q=-1,se=A==null?0:A.length;++Q<se;)if(w(D,A[Q]))return!0;return!1}function Fe(A,D){for(var w=-1,Q=A==null?0:A.length,se=Array(Q);++w<Q;)se[w]=D(A[w],w,A);return se}function rn(A,D){for(var w=-1,Q=D.length,se=A.length;++w<Q;)A[se+w]=D[w];return A}function Ai(A,D,w,Q){var se=-1,me=A==null?0:A.length;for(Q&&me&&(w=A[++se]);++se<me;)w=D(w,A[se],se,A);return w}function vf(A,D,w,Q){var se=A==null?0:A.length;for(Q&&se&&(w=A[--se]);se--;)w=D(w,A[se],se,A);return w}function yi(A,D){for(var w=-1,Q=A==null?0:A.length;++w<Q;)if(D(A[w],w,A))return!0;return!1}var Tf=mi("length");function Ef(A){return A.split("")}function If(A){return A.match(Rs)||[]}function ao(A,D,w){var Q;return w(A,function(se,me,Ke){if(D(se,me,Ke))return Q=me,!1}),Q}function Ir(A,D,w,Q){for(var se=A.length,me=w+(Q?1:-1);Q?me--:++me<se;)if(D(A[me],me,A))return me;return-1}function On(A,D,w){return D===D?Df(A,D,w):Ir(A,oo,w)}function Af(A,D,w,Q){for(var se=w-1,me=A.length;++se<me;)if(Q(A[se],D))return se;return-1}function oo(A){return A!==A}function uo(A,D){var w=A==null?0:A.length;return w?_i(A,D)/w:M}function mi(A){return function(D){return D==null?i:D[A]}}function Si(A){return function(D){return A==null?i:A[D]}}function so(A,D,w,Q,se){return se(A,function(me,Ke,Le){w=Q?(Q=!1,me):D(w,me,Ke,Le)}),w}function yf(A,D){var w=A.length;for(A.sort(D);w--;)A[w]=A[w].value;return A}function _i(A,D){for(var w,Q=-1,se=A.length;++Q<se;){var me=D(A[Q]);me!==i&&(w=w===i?me:w+me)}return w}function bi(A,D){for(var w=-1,Q=Array(A);++w<A;)Q[w]=D(w);return Q}function mf(A,D){return Fe(D,function(w){return[w,A[w]]})}function fo(A){return A&&A.slice(0,po(A)+1).replace(li,"")}function ht(A){return function(D){return A(D)}}function Ri(A,D){return Fe(D,function(w){return A[w]})}function kn(A,D){return A.has(D)}function co(A,D){for(var w=-1,Q=A.length;++w<Q&&On(D,A[w],0)>-1;);return w}function lo(A,D){for(var w=A.length;w--&&On(D,A[w],0)>-1;);return w}function Sf(A,D){for(var w=A.length,Q=0;w--;)A[w]===D&&++Q;return Q}var _f=Si(uf),bf=Si(sf);function Rf(A){return"\\"+cf[A]}function wf(A,D){return A==null?i:A[D]}function Dn(A){return nf.test(A)}function Nf(A){return rf.test(A)}function Lf(A){for(var D,w=[];!(D=A.next()).done;)w.push(D.value);return w}function wi(A){var D=-1,w=Array(A.size);return A.forEach(function(Q,se){w[++D]=[se,Q]}),w}function ho(A,D){return function(w){return A(D(w))}}function an(A,D){for(var w=-1,Q=A.length,se=0,me=[];++w<Q;){var Ke=A[w];(Ke===D||Ke===fe)&&(A[w]=fe,me[se++]=w)}return me}function Ar(A){var D=-1,w=Array(A.size);return A.forEach(function(Q){w[++D]=Q}),w}function Of(A){var D=-1,w=Array(A.size);return A.forEach(function(Q){w[++D]=[Q,Q]}),w}function Df(A,D,w){for(var Q=w-1,se=A.length;++Q<se;)if(A[Q]===D)return Q;return-1}function Pf(A,D,w){for(var Q=w+1;Q--;)if(A[Q]===D)return Q;return Q}function Pn(A){return Dn(A)?Xf(A):Tf(A)}function Nt(A){return Dn(A)?Mf(A):Ef(A)}function po(A){for(var D=A.length;D--&&ms.test(A.charAt(D)););return D}var Cf=Si(ff);function Xf(A){for(var D=vi.lastIndex=0;vi.test(A);)++D;return D}function Mf(A){return A.match(vi)||[]}function xf(A){return A.match(tf)||[]}var Uf=function A(D){D=D==null?Ze:Cn.defaults(Ze.Object(),D,Cn.pick(Ze,af));var w=D.Array,Q=D.Date,se=D.Error,me=D.Function,Ke=D.Math,Le=D.Object,Ni=D.RegExp,Ff=D.String,yt=D.TypeError,yr=w.prototype,Bf=me.prototype,Xn=Le.prototype,mr=D["__core-js_shared__"],Sr=Bf.toString,Re=Xn.hasOwnProperty,Yf=0,go=function(){var e=/[^.]+$/.exec(mr&&mr.keys&&mr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_r=Xn.toString,Hf=Sr.call(Le),Wf=Ze._,Gf=Ni("^"+Sr.call(Re).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),br=Za?D.Buffer:i,on=D.Symbol,Rr=D.Uint8Array,vo=br?br.allocUnsafe:i,wr=ho(Le.getPrototypeOf,Le),To=Le.create,Eo=Xn.propertyIsEnumerable,Nr=yr.splice,Io=on?on.isConcatSpreadable:i,$n=on?on.iterator:i,In=on?on.toStringTag:i,Lr=function(){try{var e=_n(Le,"defineProperty");return e({},"",{}),e}catch{}}(),Vf=D.clearTimeout!==Ze.clearTimeout&&D.clearTimeout,qf=Q&&Q.now!==Ze.Date.now&&Q.now,Kf=D.setTimeout!==Ze.setTimeout&&D.setTimeout,Or=Ke.ceil,Dr=Ke.floor,Li=Le.getOwnPropertySymbols,kf=br?br.isBuffer:i,Ao=D.isFinite,$f=yr.join,zf=ho(Le.keys,Le),ke=Ke.max,et=Ke.min,Qf=Q.now,Zf=D.parseInt,yo=Ke.random,jf=yr.reverse,Oi=_n(D,"DataView"),zn=_n(D,"Map"),Di=_n(D,"Promise"),Mn=_n(D,"Set"),Qn=_n(D,"WeakMap"),Zn=_n(Le,"create"),Pr=Qn&&new Qn,xn={},Jf=bn(Oi),ec=bn(zn),tc=bn(Di),nc=bn(Mn),rc=bn(Qn),Cr=on?on.prototype:i,jn=Cr?Cr.valueOf:i,mo=Cr?Cr.toString:i;function o(e){if(He(e)&&!ce(e)&&!(e instanceof Te)){if(e instanceof mt)return e;if(Re.call(e,"__wrapped__"))return Su(e)}return new mt(e)}var Un=function(){function e(){}return function(t){if(!Ye(t))return{};if(To)return To(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Xr(){}function mt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}o.templateSettings={escape:qn,evaluate:dr,interpolate:vn,variable:"",imports:{_:o}},o.prototype=Xr.prototype,o.prototype.constructor=o,mt.prototype=Un(Xr.prototype),mt.prototype.constructor=mt;function Te(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function ic(){var e=new Te(this.__wrapped__);return e.__actions__=at(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=at(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=at(this.__views__),e}function ac(){if(this.__filtered__){var e=new Te(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function oc(){var e=this.__wrapped__.value(),t=this.__dir__,n=ce(e),r=t<0,a=n?e.length:0,u=El(0,a,this.__views__),p=u.start,v=u.end,m=v-p,C=r?v:p-1,X=this.__iteratees__,x=X.length,K=0,Z=et(m,this.__takeCount__);if(!n||!r&&a==m&&Z==m)return Ko(e,this.__actions__);var re=[];e:for(;m--&&K<Z;){C+=t;for(var he=-1,ie=e[C];++he<x;){var ge=X[he],Ee=ge.iteratee,gt=ge.type,it=Ee(ie);if(gt==pn)ie=it;else if(!it){if(gt==Pt)continue e;break e}}re[K++]=ie}return re}Te.prototype=Un(Xr.prototype),Te.prototype.constructor=Te;function An(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function uc(){this.__data__=Zn?Zn(null):{},this.size=0}function sc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function fc(e){var t=this.__data__;if(Zn){var n=t[e];return n===z?i:n}return Re.call(t,e)?t[e]:i}function cc(e){var t=this.__data__;return Zn?t[e]!==i:Re.call(t,e)}function lc(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Zn&&t===i?z:t,this}An.prototype.clear=uc,An.prototype.delete=sc,An.prototype.get=fc,An.prototype.has=cc,An.prototype.set=lc;function Wt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hc(){this.__data__=[],this.size=0}function dc(e){var t=this.__data__,n=Mr(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Nr.call(t,n,1),--this.size,!0}function pc(e){var t=this.__data__,n=Mr(t,e);return n<0?i:t[n][1]}function gc(e){return Mr(this.__data__,e)>-1}function vc(e,t){var n=this.__data__,r=Mr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}Wt.prototype.clear=hc,Wt.prototype.delete=dc,Wt.prototype.get=pc,Wt.prototype.has=gc,Wt.prototype.set=vc;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Tc(){this.size=0,this.__data__={hash:new An,map:new(zn||Wt),string:new An}}function Ec(e){var t=kr(this,e).delete(e);return this.size-=t?1:0,t}function Ic(e){return kr(this,e).get(e)}function Ac(e){return kr(this,e).has(e)}function yc(e,t){var n=kr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}Gt.prototype.clear=Tc,Gt.prototype.delete=Ec,Gt.prototype.get=Ic,Gt.prototype.has=Ac,Gt.prototype.set=yc;function yn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Gt;++t<n;)this.add(e[t])}function mc(e){return this.__data__.set(e,z),this}function Sc(e){return this.__data__.has(e)}yn.prototype.add=yn.prototype.push=mc,yn.prototype.has=Sc;function Lt(e){var t=this.__data__=new Wt(e);this.size=t.size}function _c(){this.__data__=new Wt,this.size=0}function bc(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Rc(e){return this.__data__.get(e)}function wc(e){return this.__data__.has(e)}function Nc(e,t){var n=this.__data__;if(n instanceof Wt){var r=n.__data__;if(!zn||r.length<B-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gt(r)}return n.set(e,t),this.size=n.size,this}Lt.prototype.clear=_c,Lt.prototype.delete=bc,Lt.prototype.get=Rc,Lt.prototype.has=wc,Lt.prototype.set=Nc;function So(e,t){var n=ce(e),r=!n&&Rn(e),a=!n&&!r&&ln(e),u=!n&&!r&&!a&&Hn(e),p=n||r||a||u,v=p?bi(e.length,Ff):[],m=v.length;for(var C in e)(t||Re.call(e,C))&&!(p&&(C=="length"||a&&(C=="offset"||C=="parent")||u&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||kt(C,m)))&&v.push(C);return v}function _o(e){var t=e.length;return t?e[Wi(0,t-1)]:i}function Lc(e,t){return $r(at(e),mn(t,0,e.length))}function Oc(e){return $r(at(e))}function Pi(e,t,n){(n!==i&&!Ot(e[t],n)||n===i&&!(t in e))&&Vt(e,t,n)}function Jn(e,t,n){var r=e[t];(!(Re.call(e,t)&&Ot(r,n))||n===i&&!(t in e))&&Vt(e,t,n)}function Mr(e,t){for(var n=e.length;n--;)if(Ot(e[n][0],t))return n;return-1}function Dc(e,t,n,r){return un(e,function(a,u,p){t(r,a,n(a),p)}),r}function bo(e,t){return e&&Ut(t,ze(t),e)}function Pc(e,t){return e&&Ut(t,ut(t),e)}function Vt(e,t,n){t=="__proto__"&&Lr?Lr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ci(e,t){for(var n=-1,r=t.length,a=w(r),u=e==null;++n<r;)a[n]=u?i:da(e,t[n]);return a}function mn(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function St(e,t,n,r,a,u){var p,v=t&be,m=t&Me,C=t&P;if(n&&(p=a?n(e,r,a,u):n(e)),p!==i)return p;if(!Ye(e))return e;var X=ce(e);if(X){if(p=Al(e),!v)return at(e,p)}else{var x=tt(e),K=x==F||x==k;if(ln(e))return zo(e,v);if(x==q||x==L||K&&!a){if(p=m||K?{}:pu(e),!v)return m?fl(e,Pc(p,e)):sl(e,bo(p,e))}else{if(!Ce[x])return a?e:{};p=yl(e,x,v)}}u||(u=new Lt);var Z=u.get(e);if(Z)return Z;u.set(e,p),Gu(e)?e.forEach(function(ie){p.add(St(ie,t,n,ie,e,u))}):Hu(e)&&e.forEach(function(ie,ge){p.set(ge,St(ie,t,n,ge,e,u))});var re=C?m?Ji:ji:m?ut:ze,he=X?i:re(e);return At(he||e,function(ie,ge){he&&(ge=ie,ie=e[ge]),Jn(p,ge,St(ie,t,n,ge,e,u))}),p}function Cc(e){var t=ze(e);return function(n){return Ro(n,e,t)}}function Ro(e,t,n){var r=n.length;if(e==null)return!r;for(e=Le(e);r--;){var a=n[r],u=t[a],p=e[a];if(p===i&&!(a in e)||!u(p))return!1}return!0}function wo(e,t,n){if(typeof e!="function")throw new yt(_);return or(function(){e.apply(i,n)},t)}function er(e,t,n,r){var a=-1,u=Er,p=!0,v=e.length,m=[],C=t.length;if(!v)return m;n&&(t=Fe(t,ht(n))),r?(u=Ii,p=!1):t.length>=B&&(u=kn,p=!1,t=new yn(t));e:for(;++a<v;){var X=e[a],x=n==null?X:n(X);if(X=r||X!==0?X:0,p&&x===x){for(var K=C;K--;)if(t[K]===x)continue e;m.push(X)}else u(t,x,r)||m.push(X)}return m}var un=eu(xt),No=eu(Mi,!0);function Xc(e,t){var n=!0;return un(e,function(r,a,u){return n=!!t(r,a,u),n}),n}function xr(e,t,n){for(var r=-1,a=e.length;++r<a;){var u=e[r],p=t(u);if(p!=null&&(v===i?p===p&&!pt(p):n(p,v)))var v=p,m=u}return m}function Mc(e,t,n,r){var a=e.length;for(n=le(n),n<0&&(n=-n>a?0:a+n),r=r===i||r>a?a:le(r),r<0&&(r+=a),r=n>r?0:qu(r);n<r;)e[n++]=t;return e}function Lo(e,t){var n=[];return un(e,function(r,a,u){t(r,a,u)&&n.push(r)}),n}function je(e,t,n,r,a){var u=-1,p=e.length;for(n||(n=Sl),a||(a=[]);++u<p;){var v=e[u];t>0&&n(v)?t>1?je(v,t-1,n,r,a):rn(a,v):r||(a[a.length]=v)}return a}var Xi=tu(),Oo=tu(!0);function xt(e,t){return e&&Xi(e,t,ze)}function Mi(e,t){return e&&Oo(e,t,ze)}function Ur(e,t){return nn(t,function(n){return $t(e[n])})}function Sn(e,t){t=fn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ft(t[n++])];return n&&n==r?e:i}function Do(e,t,n){var r=t(e);return ce(e)?r:rn(r,n(e))}function nt(e){return e==null?e===i?Ue:J:In&&In in Le(e)?Tl(e):Ol(e)}function xi(e,t){return e>t}function xc(e,t){return e!=null&&Re.call(e,t)}function Uc(e,t){return e!=null&&t in Le(e)}function Fc(e,t,n){return e>=et(t,n)&&e<ke(t,n)}function Ui(e,t,n){for(var r=n?Ii:Er,a=e[0].length,u=e.length,p=u,v=w(u),m=1/0,C=[];p--;){var X=e[p];p&&t&&(X=Fe(X,ht(t))),m=et(X.length,m),v[p]=!n&&(t||a>=120&&X.length>=120)?new yn(p&&X):i}X=e[0];var x=-1,K=v[0];e:for(;++x<a&&C.length<m;){var Z=X[x],re=t?t(Z):Z;if(Z=n||Z!==0?Z:0,!(K?kn(K,re):r(C,re,n))){for(p=u;--p;){var he=v[p];if(!(he?kn(he,re):r(e[p],re,n)))continue e}K&&K.push(re),C.push(Z)}}return C}function Bc(e,t,n,r){return xt(e,function(a,u,p){t(r,n(a),u,p)}),r}function tr(e,t,n){t=fn(t,e),e=Eu(e,t);var r=e==null?e:e[Ft(bt(t))];return r==null?i:lt(r,e,n)}function Po(e){return He(e)&&nt(e)==L}function Yc(e){return He(e)&&nt(e)==ye}function Hc(e){return He(e)&&nt(e)==h}function nr(e,t,n,r,a){return e===t?!0:e==null||t==null||!He(e)&&!He(t)?e!==e&&t!==t:Wc(e,t,n,r,nr,a)}function Wc(e,t,n,r,a,u){var p=ce(e),v=ce(t),m=p?g:tt(e),C=v?g:tt(t);m=m==L?q:m,C=C==L?q:C;var X=m==q,x=C==q,K=m==C;if(K&&ln(e)){if(!ln(t))return!1;p=!0,X=!1}if(K&&!X)return u||(u=new Lt),p||Hn(e)?lu(e,t,n,r,a,u):gl(e,t,m,n,r,a,u);if(!(n&V)){var Z=X&&Re.call(e,"__wrapped__"),re=x&&Re.call(t,"__wrapped__");if(Z||re){var he=Z?e.value():e,ie=re?t.value():t;return u||(u=new Lt),a(he,ie,n,r,u)}}return K?(u||(u=new Lt),vl(e,t,n,r,a,u)):!1}function Gc(e){return He(e)&&tt(e)==N}function Fi(e,t,n,r){var a=n.length,u=a,p=!r;if(e==null)return!u;for(e=Le(e);a--;){var v=n[a];if(p&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++a<u;){v=n[a];var m=v[0],C=e[m],X=v[1];if(p&&v[2]){if(C===i&&!(m in e))return!1}else{var x=new Lt;if(r)var K=r(C,X,m,e,t,x);if(!(K===i?nr(X,C,V|Y,r,x):K))return!1}}return!0}function Co(e){if(!Ye(e)||bl(e))return!1;var t=$t(e)?Gf:Ps;return t.test(bn(e))}function Vc(e){return He(e)&&nt(e)==ae}function qc(e){return He(e)&&tt(e)==ue}function Kc(e){return He(e)&&ei(e.length)&&!!Xe[nt(e)]}function Xo(e){return typeof e=="function"?e:e==null?st:typeof e=="object"?ce(e)?Uo(e[0],e[1]):xo(e):ns(e)}function Bi(e){if(!ar(e))return zf(e);var t=[];for(var n in Le(e))Re.call(e,n)&&n!="constructor"&&t.push(n);return t}function kc(e){if(!Ye(e))return Ll(e);var t=ar(e),n=[];for(var r in e)r=="constructor"&&(t||!Re.call(e,r))||n.push(r);return n}function Yi(e,t){return e<t}function Mo(e,t){var n=-1,r=ot(e)?w(e.length):[];return un(e,function(a,u,p){r[++n]=t(a,u,p)}),r}function xo(e){var t=ta(e);return t.length==1&&t[0][2]?vu(t[0][0],t[0][1]):function(n){return n===e||Fi(n,e,t)}}function Uo(e,t){return ra(e)&&gu(t)?vu(Ft(e),t):function(n){var r=da(n,e);return r===i&&r===t?pa(n,e):nr(t,r,V|Y)}}function Fr(e,t,n,r,a){e!==t&&Xi(t,function(u,p){if(a||(a=new Lt),Ye(u))$c(e,t,p,n,Fr,r,a);else{var v=r?r(aa(e,p),u,p+"",e,t,a):i;v===i&&(v=u),Pi(e,p,v)}},ut)}function $c(e,t,n,r,a,u,p){var v=aa(e,n),m=aa(t,n),C=p.get(m);if(C){Pi(e,n,C);return}var X=u?u(v,m,n+"",e,t,p):i,x=X===i;if(x){var K=ce(m),Z=!K&&ln(m),re=!K&&!Z&&Hn(m);X=m,K||Z||re?ce(v)?X=v:We(v)?X=at(v):Z?(x=!1,X=zo(m,!0)):re?(x=!1,X=Qo(m,!0)):X=[]:ur(m)||Rn(m)?(X=v,Rn(v)?X=Ku(v):(!Ye(v)||$t(v))&&(X=pu(m))):x=!1}x&&(p.set(m,X),a(X,m,r,u,p),p.delete(m)),Pi(e,n,X)}function Fo(e,t){var n=e.length;if(n)return t+=t<0?n:0,kt(t,n)?e[t]:i}function Bo(e,t,n){t.length?t=Fe(t,function(u){return ce(u)?function(p){return Sn(p,u.length===1?u[0]:u)}:u}):t=[st];var r=-1;t=Fe(t,ht(ne()));var a=Mo(e,function(u,p,v){var m=Fe(t,function(C){return C(u)});return{criteria:m,index:++r,value:u}});return yf(a,function(u,p){return ul(u,p,n)})}function zc(e,t){return Yo(e,t,function(n,r){return pa(e,r)})}function Yo(e,t,n){for(var r=-1,a=t.length,u={};++r<a;){var p=t[r],v=Sn(e,p);n(v,p)&&rr(u,fn(p,e),v)}return u}function Qc(e){return function(t){return Sn(t,e)}}function Hi(e,t,n,r){var a=r?Af:On,u=-1,p=t.length,v=e;for(e===t&&(t=at(t)),n&&(v=Fe(e,ht(n)));++u<p;)for(var m=0,C=t[u],X=n?n(C):C;(m=a(v,X,m,r))>-1;)v!==e&&Nr.call(v,m,1),Nr.call(e,m,1);return e}function Ho(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==u){var u=a;kt(a)?Nr.call(e,a,1):qi(e,a)}}return e}function Wi(e,t){return e+Dr(yo()*(t-e+1))}function Zc(e,t,n,r){for(var a=-1,u=ke(Or((t-e)/(n||1)),0),p=w(u);u--;)p[r?u:++a]=e,e+=n;return p}function Gi(e,t){var n="";if(!e||t<1||t>Ve)return n;do t%2&&(n+=e),t=Dr(t/2),t&&(e+=e);while(t);return n}function pe(e,t){return oa(Tu(e,t,st),e+"")}function jc(e){return _o(Wn(e))}function Jc(e,t){var n=Wn(e);return $r(n,mn(t,0,n.length))}function rr(e,t,n,r){if(!Ye(e))return e;t=fn(t,e);for(var a=-1,u=t.length,p=u-1,v=e;v!=null&&++a<u;){var m=Ft(t[a]),C=n;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(a!=p){var X=v[m];C=r?r(X,m,v):i,C===i&&(C=Ye(X)?X:kt(t[a+1])?[]:{})}Jn(v,m,C),v=v[m]}return e}var Wo=Pr?function(e,t){return Pr.set(e,t),e}:st,el=Lr?function(e,t){return Lr(e,"toString",{configurable:!0,enumerable:!1,value:va(t),writable:!0})}:st;function tl(e){return $r(Wn(e))}function _t(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var u=w(a);++r<a;)u[r]=e[r+t];return u}function nl(e,t){var n;return un(e,function(r,a,u){return n=t(r,a,u),!n}),!!n}function Br(e,t,n){var r=0,a=e==null?r:e.length;if(typeof t=="number"&&t===t&&a<=T){for(;r<a;){var u=r+a>>>1,p=e[u];p!==null&&!pt(p)&&(n?p<=t:p<t)?r=u+1:a=u}return a}return Vi(e,t,st,n)}function Vi(e,t,n,r){var a=0,u=e==null?0:e.length;if(u===0)return 0;t=n(t);for(var p=t!==t,v=t===null,m=pt(t),C=t===i;a<u;){var X=Dr((a+u)/2),x=n(e[X]),K=x!==i,Z=x===null,re=x===x,he=pt(x);if(p)var ie=r||re;else C?ie=re&&(r||K):v?ie=re&&K&&(r||!Z):m?ie=re&&K&&!Z&&(r||!he):Z||he?ie=!1:ie=r?x<=t:x<t;ie?a=X+1:u=X}return et(u,d)}function Go(e,t){for(var n=-1,r=e.length,a=0,u=[];++n<r;){var p=e[n],v=t?t(p):p;if(!n||!Ot(v,m)){var m=v;u[a++]=p===0?0:p}}return u}function Vo(e){return typeof e=="number"?e:pt(e)?M:+e}function dt(e){if(typeof e=="string")return e;if(ce(e))return Fe(e,dt)+"";if(pt(e))return mo?mo.call(e):"";var t=e+"";return t=="0"&&1/e==-ft?"-0":t}function sn(e,t,n){var r=-1,a=Er,u=e.length,p=!0,v=[],m=v;if(n)p=!1,a=Ii;else if(u>=B){var C=t?null:dl(e);if(C)return Ar(C);p=!1,a=kn,m=new yn}else m=t?[]:v;e:for(;++r<u;){var X=e[r],x=t?t(X):X;if(X=n||X!==0?X:0,p&&x===x){for(var K=m.length;K--;)if(m[K]===x)continue e;t&&m.push(x),v.push(X)}else a(m,x,n)||(m!==v&&m.push(x),v.push(X))}return v}function qi(e,t){return t=fn(t,e),e=Eu(e,t),e==null||delete e[Ft(bt(t))]}function qo(e,t,n,r){return rr(e,t,n(Sn(e,t)),r)}function Yr(e,t,n,r){for(var a=e.length,u=r?a:-1;(r?u--:++u<a)&&t(e[u],u,e););return n?_t(e,r?0:u,r?u+1:a):_t(e,r?u+1:0,r?a:u)}function Ko(e,t){var n=e;return n instanceof Te&&(n=n.value()),Ai(t,function(r,a){return a.func.apply(a.thisArg,rn([r],a.args))},n)}function Ki(e,t,n){var r=e.length;if(r<2)return r?sn(e[0]):[];for(var a=-1,u=w(r);++a<r;)for(var p=e[a],v=-1;++v<r;)v!=a&&(u[a]=er(u[a]||p,e[v],t,n));return sn(je(u,1),t,n)}function ko(e,t,n){for(var r=-1,a=e.length,u=t.length,p={};++r<a;){var v=r<u?t[r]:i;n(p,e[r],v)}return p}function ki(e){return We(e)?e:[]}function $i(e){return typeof e=="function"?e:st}function fn(e,t){return ce(e)?e:ra(e,t)?[e]:mu(_e(e))}var rl=pe;function cn(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:_t(e,t,n)}var $o=Vf||function(e){return Ze.clearTimeout(e)};function zo(e,t){if(t)return e.slice();var n=e.length,r=vo?vo(n):new e.constructor(n);return e.copy(r),r}function zi(e){var t=new e.constructor(e.byteLength);return new Rr(t).set(new Rr(e)),t}function il(e,t){var n=t?zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function al(e){var t=new e.constructor(e.source,Da.exec(e));return t.lastIndex=e.lastIndex,t}function ol(e){return jn?Le(jn.call(e)):{}}function Qo(e,t){var n=t?zi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Zo(e,t){if(e!==t){var n=e!==i,r=e===null,a=e===e,u=pt(e),p=t!==i,v=t===null,m=t===t,C=pt(t);if(!v&&!C&&!u&&e>t||u&&p&&m&&!v&&!C||r&&p&&m||!n&&m||!a)return 1;if(!r&&!u&&!C&&e<t||C&&n&&a&&!r&&!u||v&&n&&a||!p&&a||!m)return-1}return 0}function ul(e,t,n){for(var r=-1,a=e.criteria,u=t.criteria,p=a.length,v=n.length;++r<p;){var m=Zo(a[r],u[r]);if(m){if(r>=v)return m;var C=n[r];return m*(C=="desc"?-1:1)}}return e.index-t.index}function jo(e,t,n,r){for(var a=-1,u=e.length,p=n.length,v=-1,m=t.length,C=ke(u-p,0),X=w(m+C),x=!r;++v<m;)X[v]=t[v];for(;++a<p;)(x||a<u)&&(X[n[a]]=e[a]);for(;C--;)X[v++]=e[a++];return X}function Jo(e,t,n,r){for(var a=-1,u=e.length,p=-1,v=n.length,m=-1,C=t.length,X=ke(u-v,0),x=w(X+C),K=!r;++a<X;)x[a]=e[a];for(var Z=a;++m<C;)x[Z+m]=t[m];for(;++p<v;)(K||a<u)&&(x[Z+n[p]]=e[a++]);return x}function at(e,t){var n=-1,r=e.length;for(t||(t=w(r));++n<r;)t[n]=e[n];return t}function Ut(e,t,n,r){var a=!n;n||(n={});for(var u=-1,p=t.length;++u<p;){var v=t[u],m=r?r(n[v],e[v],v,n,e):i;m===i&&(m=e[v]),a?Vt(n,v,m):Jn(n,v,m)}return n}function sl(e,t){return Ut(e,na(e),t)}function fl(e,t){return Ut(e,hu(e),t)}function Hr(e,t){return function(n,r){var a=ce(n)?pf:Dc,u=t?t():{};return a(n,e,ne(r,2),u)}}function Fn(e){return pe(function(t,n){var r=-1,a=n.length,u=a>1?n[a-1]:i,p=a>2?n[2]:i;for(u=e.length>3&&typeof u=="function"?(a--,u):i,p&&rt(n[0],n[1],p)&&(u=a<3?i:u,a=1),t=Le(t);++r<a;){var v=n[r];v&&e(t,v,r,u)}return t})}function eu(e,t){return function(n,r){if(n==null)return n;if(!ot(n))return e(n,r);for(var a=n.length,u=t?a:-1,p=Le(n);(t?u--:++u<a)&&r(p[u],u,p)!==!1;);return n}}function tu(e){return function(t,n,r){for(var a=-1,u=Le(t),p=r(t),v=p.length;v--;){var m=p[e?v:++a];if(n(u[m],m,u)===!1)break}return t}}function cl(e,t,n){var r=t&b,a=ir(e);function u(){var p=this&&this!==Ze&&this instanceof u?a:e;return p.apply(r?n:this,arguments)}return u}function nu(e){return function(t){t=_e(t);var n=Dn(t)?Nt(t):i,r=n?n[0]:t.charAt(0),a=n?cn(n,1).join(""):t.slice(1);return r[e]()+a}}function Bn(e){return function(t){return Ai(es(Ju(t).replace(Js,"")),e,"")}}function ir(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Un(e.prototype),r=e.apply(n,t);return Ye(r)?r:n}}function ll(e,t,n){var r=ir(e);function a(){for(var u=arguments.length,p=w(u),v=u,m=Yn(a);v--;)p[v]=arguments[v];var C=u<3&&p[0]!==m&&p[u-1]!==m?[]:an(p,m);if(u-=C.length,u<n)return uu(e,t,Wr,a.placeholder,i,p,C,i,i,n-u);var X=this&&this!==Ze&&this instanceof a?r:e;return lt(X,this,p)}return a}function ru(e){return function(t,n,r){var a=Le(t);if(!ot(t)){var u=ne(n,3);t=ze(t),n=function(v){return u(a[v],v,a)}}var p=e(t,n,r);return p>-1?a[u?t[p]:p]:i}}function iu(e){return Kt(function(t){var n=t.length,r=n,a=mt.prototype.thru;for(e&&t.reverse();r--;){var u=t[r];if(typeof u!="function")throw new yt(_);if(a&&!p&&Kr(u)=="wrapper")var p=new mt([],!0)}for(r=p?r:n;++r<n;){u=t[r];var v=Kr(u),m=v=="wrapper"?ea(u):i;m&&ia(m[0])&&m[1]==(xe|y|oe|Je)&&!m[4].length&&m[9]==1?p=p[Kr(m[0])].apply(p,m[3]):p=u.length==1&&ia(u)?p[v]():p.thru(u)}return function(){var C=arguments,X=C[0];if(p&&C.length==1&&ce(X))return p.plant(X).value();for(var x=0,K=n?t[x].apply(this,C):X;++x<n;)K=t[x].call(this,K);return K}})}function Wr(e,t,n,r,a,u,p,v,m,C){var X=t&xe,x=t&b,K=t&O,Z=t&(y|te),re=t&Ae,he=K?i:ir(e);function ie(){for(var ge=arguments.length,Ee=w(ge),gt=ge;gt--;)Ee[gt]=arguments[gt];if(Z)var it=Yn(ie),vt=Sf(Ee,it);if(r&&(Ee=jo(Ee,r,a,Z)),u&&(Ee=Jo(Ee,u,p,Z)),ge-=vt,Z&&ge<C){var Ge=an(Ee,it);return uu(e,t,Wr,ie.placeholder,n,Ee,Ge,v,m,C-ge)}var Dt=x?n:this,Qt=K?Dt[e]:e;return ge=Ee.length,v?Ee=Dl(Ee,v):re&&ge>1&&Ee.reverse(),X&&m<ge&&(Ee.length=m),this&&this!==Ze&&this instanceof ie&&(Qt=he||ir(Qt)),Qt.apply(Dt,Ee)}return ie}function au(e,t){return function(n,r){return Bc(n,e,t(r),{})}}function Gr(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;typeof n=="string"||typeof r=="string"?(n=dt(n),r=dt(r)):(n=Vo(n),r=Vo(r)),a=e(n,r)}return a}}function Qi(e){return Kt(function(t){return t=Fe(t,ht(ne())),pe(function(n){var r=this;return e(t,function(a){return lt(a,r,n)})})})}function Vr(e,t){t=t===i?" ":dt(t);var n=t.length;if(n<2)return n?Gi(t,e):t;var r=Gi(t,Or(e/Pn(t)));return Dn(t)?cn(Nt(r),0,e).join(""):r.slice(0,e)}function hl(e,t,n,r){var a=t&b,u=ir(e);function p(){for(var v=-1,m=arguments.length,C=-1,X=r.length,x=w(X+m),K=this&&this!==Ze&&this instanceof p?u:e;++C<X;)x[C]=r[C];for(;m--;)x[C++]=arguments[++v];return lt(K,a?n:this,x)}return p}function ou(e){return function(t,n,r){return r&&typeof r!="number"&&rt(t,n,r)&&(n=r=i),t=zt(t),n===i?(n=t,t=0):n=zt(n),r=r===i?t<n?1:-1:zt(r),Zc(t,n,r,e)}}function qr(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Rt(t),n=Rt(n)),e(t,n)}}function uu(e,t,n,r,a,u,p,v,m,C){var X=t&y,x=X?p:i,K=X?i:p,Z=X?u:i,re=X?i:u;t|=X?oe:Be,t&=~(X?Be:oe),t&G||(t&=~(b|O));var he=[e,t,a,Z,x,re,K,v,m,C],ie=n.apply(i,he);return ia(e)&&Iu(ie,he),ie.placeholder=r,Au(ie,e,t)}function Zi(e){var t=Ke[e];return function(n,r){if(n=Rt(n),r=r==null?0:et(le(r),292),r&&Ao(n)){var a=(_e(n)+"e").split("e"),u=t(a[0]+"e"+(+a[1]+r));return a=(_e(u)+"e").split("e"),+(a[0]+"e"+(+a[1]-r))}return t(n)}}var dl=Mn&&1/Ar(new Mn([,-0]))[1]==ft?function(e){return new Mn(e)}:Ia;function su(e){return function(t){var n=tt(t);return n==N?wi(t):n==ue?Of(t):mf(t,e(t))}}function qt(e,t,n,r,a,u,p,v){var m=t&O;if(!m&&typeof e!="function")throw new yt(_);var C=r?r.length:0;if(C||(t&=~(oe|Be),r=a=i),p=p===i?p:ke(le(p),0),v=v===i?v:le(v),C-=a?a.length:0,t&Be){var X=r,x=a;r=a=i}var K=m?i:ea(e),Z=[e,t,n,r,a,X,x,u,p,v];if(K&&Nl(Z,K),e=Z[0],t=Z[1],n=Z[2],r=Z[3],a=Z[4],v=Z[9]=Z[9]===i?m?0:e.length:ke(Z[9]-C,0),!v&&t&(y|te)&&(t&=~(y|te)),!t||t==b)var re=cl(e,t,n);else t==y||t==te?re=ll(e,t,v):(t==oe||t==(b|oe))&&!a.length?re=hl(e,t,n,r):re=Wr.apply(i,Z);var he=K?Wo:Iu;return Au(he(re,Z),e,t)}function fu(e,t,n,r){return e===i||Ot(e,Xn[n])&&!Re.call(r,n)?t:e}function cu(e,t,n,r,a,u){return Ye(e)&&Ye(t)&&(u.set(t,e),Fr(e,t,i,cu,u),u.delete(t)),e}function pl(e){return ur(e)?i:e}function lu(e,t,n,r,a,u){var p=n&V,v=e.length,m=t.length;if(v!=m&&!(p&&m>v))return!1;var C=u.get(e),X=u.get(t);if(C&&X)return C==t&&X==e;var x=-1,K=!0,Z=n&Y?new yn:i;for(u.set(e,t),u.set(t,e);++x<v;){var re=e[x],he=t[x];if(r)var ie=p?r(he,re,x,t,e,u):r(re,he,x,e,t,u);if(ie!==i){if(ie)continue;K=!1;break}if(Z){if(!yi(t,function(ge,Ee){if(!kn(Z,Ee)&&(re===ge||a(re,ge,n,r,u)))return Z.push(Ee)})){K=!1;break}}else if(!(re===he||a(re,he,n,r,u))){K=!1;break}}return u.delete(e),u.delete(t),K}function gl(e,t,n,r,a,u,p){switch(n){case Ie:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ye:return!(e.byteLength!=t.byteLength||!u(new Rr(e),new Rr(t)));case l:case h:case $:return Ot(+e,+t);case U:return e.name==t.name&&e.message==t.message;case ae:case Oe:return e==t+"";case N:var v=wi;case ue:var m=r&V;if(v||(v=Ar),e.size!=t.size&&!m)return!1;var C=p.get(e);if(C)return C==t;r|=Y,p.set(e,t);var X=lu(v(e),v(t),r,a,u,p);return p.delete(e),X;case ve:if(jn)return jn.call(e)==jn.call(t)}return!1}function vl(e,t,n,r,a,u){var p=n&V,v=ji(e),m=v.length,C=ji(t),X=C.length;if(m!=X&&!p)return!1;for(var x=m;x--;){var K=v[x];if(!(p?K in t:Re.call(t,K)))return!1}var Z=u.get(e),re=u.get(t);if(Z&&re)return Z==t&&re==e;var he=!0;u.set(e,t),u.set(t,e);for(var ie=p;++x<m;){K=v[x];var ge=e[K],Ee=t[K];if(r)var gt=p?r(Ee,ge,K,t,e,u):r(ge,Ee,K,e,t,u);if(!(gt===i?ge===Ee||a(ge,Ee,n,r,u):gt)){he=!1;break}ie||(ie=K=="constructor")}if(he&&!ie){var it=e.constructor,vt=t.constructor;it!=vt&&"constructor"in e&&"constructor"in t&&!(typeof it=="function"&&it instanceof it&&typeof vt=="function"&&vt instanceof vt)&&(he=!1)}return u.delete(e),u.delete(t),he}function Kt(e){return oa(Tu(e,i,Ru),e+"")}function ji(e){return Do(e,ze,na)}function Ji(e){return Do(e,ut,hu)}var ea=Pr?function(e){return Pr.get(e)}:Ia;function Kr(e){for(var t=e.name+"",n=xn[t],r=Re.call(xn,t)?n.length:0;r--;){var a=n[r],u=a.func;if(u==null||u==e)return a.name}return t}function Yn(e){var t=Re.call(o,"placeholder")?o:e;return t.placeholder}function ne(){var e=o.iteratee||Ta;return e=e===Ta?Xo:e,arguments.length?e(arguments[0],arguments[1]):e}function kr(e,t){var n=e.__data__;return _l(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ta(e){for(var t=ze(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,gu(a)]}return t}function _n(e,t){var n=wf(e,t);return Co(n)?n:i}function Tl(e){var t=Re.call(e,In),n=e[In];try{e[In]=i;var r=!0}catch{}var a=_r.call(e);return r&&(t?e[In]=n:delete e[In]),a}var na=Li?function(e){return e==null?[]:(e=Le(e),nn(Li(e),function(t){return Eo.call(e,t)}))}:Aa,hu=Li?function(e){for(var t=[];e;)rn(t,na(e)),e=wr(e);return t}:Aa,tt=nt;(Oi&&tt(new Oi(new ArrayBuffer(1)))!=Ie||zn&&tt(new zn)!=N||Di&&tt(Di.resolve())!=j||Mn&&tt(new Mn)!=ue||Qn&&tt(new Qn)!=Ne)&&(tt=function(e){var t=nt(e),n=t==q?e.constructor:i,r=n?bn(n):"";if(r)switch(r){case Jf:return Ie;case ec:return N;case tc:return j;case nc:return ue;case rc:return Ne}return t});function El(e,t,n){for(var r=-1,a=n.length;++r<a;){var u=n[r],p=u.size;switch(u.type){case"drop":e+=p;break;case"dropRight":t-=p;break;case"take":t=et(t,e+p);break;case"takeRight":e=ke(e,t-p);break}}return{start:e,end:t}}function Il(e){var t=e.match(_s);return t?t[1].split(bs):[]}function du(e,t,n){t=fn(t,e);for(var r=-1,a=t.length,u=!1;++r<a;){var p=Ft(t[r]);if(!(u=e!=null&&n(e,p)))break;e=e[p]}return u||++r!=a?u:(a=e==null?0:e.length,!!a&&ei(a)&&kt(p,a)&&(ce(e)||Rn(e)))}function Al(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Re.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function pu(e){return typeof e.constructor=="function"&&!ar(e)?Un(wr(e)):{}}function yl(e,t,n){var r=e.constructor;switch(t){case ye:return zi(e);case l:case h:return new r(+e);case Ie:return il(e,n);case Pe:case Qe:case qe:case Ct:case gn:case we:case ct:case en:case Et:return Qo(e,n);case N:return new r;case $:case Oe:return new r(e);case ae:return al(e);case ue:return new r;case ve:return ol(e)}}function ml(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ss,`{
/* [wrapped with `+t+`] */
`)}function Sl(e){return ce(e)||Rn(e)||!!(Io&&e&&e[Io])}function kt(e,t){var n=typeof e;return t=t??Ve,!!t&&(n=="number"||n!="symbol"&&Xs.test(e))&&e>-1&&e%1==0&&e<t}function rt(e,t,n){if(!Ye(n))return!1;var r=typeof t;return(r=="number"?ot(n)&&kt(t,n.length):r=="string"&&t in n)?Ot(n[t],e):!1}function ra(e,t){if(ce(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pt(e)?!0:Tn.test(e)||!pr.test(e)||t!=null&&e in Le(t)}function _l(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ia(e){var t=Kr(e),n=o[t];if(typeof n!="function"||!(t in Te.prototype))return!1;if(e===n)return!0;var r=ea(n);return!!r&&e===r[0]}function bl(e){return!!go&&go in e}var Rl=mr?$t:ya;function ar(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Xn;return e===n}function gu(e){return e===e&&!Ye(e)}function vu(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==i||e in Le(n))}}function wl(e){var t=jr(e,function(r){return n.size===de&&n.clear(),r}),n=t.cache;return t}function Nl(e,t){var n=e[1],r=t[1],a=n|r,u=a<(b|O|xe),p=r==xe&&n==y||r==xe&&n==Je&&e[7].length<=t[8]||r==(xe|Je)&&t[7].length<=t[8]&&n==y;if(!(u||p))return e;r&b&&(e[2]=t[2],a|=n&b?0:G);var v=t[3];if(v){var m=e[3];e[3]=m?jo(m,v,t[4]):v,e[4]=m?an(e[3],fe):t[4]}return v=t[5],v&&(m=e[5],e[5]=m?Jo(m,v,t[6]):v,e[6]=m?an(e[5],fe):t[6]),v=t[7],v&&(e[7]=v),r&xe&&(e[8]=e[8]==null?t[8]:et(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function Ll(e){var t=[];if(e!=null)for(var n in Le(e))t.push(n);return t}function Ol(e){return _r.call(e)}function Tu(e,t,n){return t=ke(t===i?e.length-1:t,0),function(){for(var r=arguments,a=-1,u=ke(r.length-t,0),p=w(u);++a<u;)p[a]=r[t+a];a=-1;for(var v=w(t+1);++a<t;)v[a]=r[a];return v[t]=n(p),lt(e,this,v)}}function Eu(e,t){return t.length<2?e:Sn(e,_t(t,0,-1))}function Dl(e,t){for(var n=e.length,r=et(t.length,n),a=at(e);r--;){var u=t[r];e[r]=kt(u,n)?a[u]:i}return e}function aa(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Iu=yu(Wo),or=Kf||function(e,t){return Ze.setTimeout(e,t)},oa=yu(el);function Au(e,t,n){var r=t+"";return oa(e,ml(r,Pl(Il(r),n)))}function yu(e){var t=0,n=0;return function(){var r=Qf(),a=Jt-(r-n);if(n=r,a>0){if(++t>=jt)return arguments[0]}else t=0;return e.apply(i,arguments)}}function $r(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var u=Wi(n,a),p=e[u];e[u]=e[n],e[n]=p}return e.length=t,e}var mu=wl(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Kn,function(n,r,a,u){t.push(a?u.replace(Ns,"$1"):r||n)}),t});function Ft(e){if(typeof e=="string"||pt(e))return e;var t=e+"";return t=="0"&&1/e==-ft?"-0":t}function bn(e){if(e!=null){try{return Sr.call(e)}catch{}try{return e+""}catch{}}return""}function Pl(e,t){return At(I,function(n){var r="_."+n[0];t&n[1]&&!Er(e,r)&&e.push(r)}),e.sort()}function Su(e){if(e instanceof Te)return e.clone();var t=new mt(e.__wrapped__,e.__chain__);return t.__actions__=at(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Cl(e,t,n){(n?rt(e,t,n):t===i)?t=1:t=ke(le(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var a=0,u=0,p=w(Or(r/t));a<r;)p[u++]=_t(e,a,a+=t);return p}function Xl(e){for(var t=-1,n=e==null?0:e.length,r=0,a=[];++t<n;){var u=e[t];u&&(a[r++]=u)}return a}function Ml(){var e=arguments.length;if(!e)return[];for(var t=w(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return rn(ce(n)?at(n):[n],je(t,1))}var xl=pe(function(e,t){return We(e)?er(e,je(t,1,We,!0)):[]}),Ul=pe(function(e,t){var n=bt(t);return We(n)&&(n=i),We(e)?er(e,je(t,1,We,!0),ne(n,2)):[]}),Fl=pe(function(e,t){var n=bt(t);return We(n)&&(n=i),We(e)?er(e,je(t,1,We,!0),i,n):[]});function Bl(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===i?1:le(t),_t(e,t<0?0:t,r)):[]}function Yl(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===i?1:le(t),t=r-t,_t(e,0,t<0?0:t)):[]}function Hl(e,t){return e&&e.length?Yr(e,ne(t,3),!0,!0):[]}function Wl(e,t){return e&&e.length?Yr(e,ne(t,3),!0):[]}function Gl(e,t,n,r){var a=e==null?0:e.length;return a?(n&&typeof n!="number"&&rt(e,t,n)&&(n=0,r=a),Mc(e,t,n,r)):[]}function _u(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:le(n);return a<0&&(a=ke(r+a,0)),Ir(e,ne(t,3),a)}function bu(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=le(n),a=n<0?ke(r+a,0):et(a,r-1)),Ir(e,ne(t,3),a,!0)}function Ru(e){var t=e==null?0:e.length;return t?je(e,1):[]}function Vl(e){var t=e==null?0:e.length;return t?je(e,ft):[]}function ql(e,t){var n=e==null?0:e.length;return n?(t=t===i?1:le(t),je(e,t)):[]}function Kl(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r}function wu(e){return e&&e.length?e[0]:i}function kl(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:le(n);return a<0&&(a=ke(r+a,0)),On(e,t,a)}function $l(e){var t=e==null?0:e.length;return t?_t(e,0,-1):[]}var zl=pe(function(e){var t=Fe(e,ki);return t.length&&t[0]===e[0]?Ui(t):[]}),Ql=pe(function(e){var t=bt(e),n=Fe(e,ki);return t===bt(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ui(n,ne(t,2)):[]}),Zl=pe(function(e){var t=bt(e),n=Fe(e,ki);return t=typeof t=="function"?t:i,t&&n.pop(),n.length&&n[0]===e[0]?Ui(n,i,t):[]});function jl(e,t){return e==null?"":$f.call(e,t)}function bt(e){var t=e==null?0:e.length;return t?e[t-1]:i}function Jl(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=le(n),a=a<0?ke(r+a,0):et(a,r-1)),t===t?Pf(e,t,a):Ir(e,oo,a,!0)}function eh(e,t){return e&&e.length?Fo(e,le(t)):i}var th=pe(Nu);function Nu(e,t){return e&&e.length&&t&&t.length?Hi(e,t):e}function nh(e,t,n){return e&&e.length&&t&&t.length?Hi(e,t,ne(n,2)):e}function rh(e,t,n){return e&&e.length&&t&&t.length?Hi(e,t,i,n):e}var ih=Kt(function(e,t){var n=e==null?0:e.length,r=Ci(e,t);return Ho(e,Fe(t,function(a){return kt(a,n)?+a:a}).sort(Zo)),r});function ah(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,a=[],u=e.length;for(t=ne(t,3);++r<u;){var p=e[r];t(p,r,e)&&(n.push(p),a.push(r))}return Ho(e,a),n}function ua(e){return e==null?e:jf.call(e)}function oh(e,t,n){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&rt(e,t,n)?(t=0,n=r):(t=t==null?0:le(t),n=n===i?r:le(n)),_t(e,t,n)):[]}function uh(e,t){return Br(e,t)}function sh(e,t,n){return Vi(e,t,ne(n,2))}function fh(e,t){var n=e==null?0:e.length;if(n){var r=Br(e,t);if(r<n&&Ot(e[r],t))return r}return-1}function ch(e,t){return Br(e,t,!0)}function lh(e,t,n){return Vi(e,t,ne(n,2),!0)}function hh(e,t){var n=e==null?0:e.length;if(n){var r=Br(e,t,!0)-1;if(Ot(e[r],t))return r}return-1}function dh(e){return e&&e.length?Go(e):[]}function ph(e,t){return e&&e.length?Go(e,ne(t,2)):[]}function gh(e){var t=e==null?0:e.length;return t?_t(e,1,t):[]}function vh(e,t,n){return e&&e.length?(t=n||t===i?1:le(t),_t(e,0,t<0?0:t)):[]}function Th(e,t,n){var r=e==null?0:e.length;return r?(t=n||t===i?1:le(t),t=r-t,_t(e,t<0?0:t,r)):[]}function Eh(e,t){return e&&e.length?Yr(e,ne(t,3),!1,!0):[]}function Ih(e,t){return e&&e.length?Yr(e,ne(t,3)):[]}var Ah=pe(function(e){return sn(je(e,1,We,!0))}),yh=pe(function(e){var t=bt(e);return We(t)&&(t=i),sn(je(e,1,We,!0),ne(t,2))}),mh=pe(function(e){var t=bt(e);return t=typeof t=="function"?t:i,sn(je(e,1,We,!0),i,t)});function Sh(e){return e&&e.length?sn(e):[]}function _h(e,t){return e&&e.length?sn(e,ne(t,2)):[]}function bh(e,t){return t=typeof t=="function"?t:i,e&&e.length?sn(e,i,t):[]}function sa(e){if(!(e&&e.length))return[];var t=0;return e=nn(e,function(n){if(We(n))return t=ke(n.length,t),!0}),bi(t,function(n){return Fe(e,mi(n))})}function Lu(e,t){if(!(e&&e.length))return[];var n=sa(e);return t==null?n:Fe(n,function(r){return lt(t,i,r)})}var Rh=pe(function(e,t){return We(e)?er(e,t):[]}),wh=pe(function(e){return Ki(nn(e,We))}),Nh=pe(function(e){var t=bt(e);return We(t)&&(t=i),Ki(nn(e,We),ne(t,2))}),Lh=pe(function(e){var t=bt(e);return t=typeof t=="function"?t:i,Ki(nn(e,We),i,t)}),Oh=pe(sa);function Dh(e,t){return ko(e||[],t||[],Jn)}function Ph(e,t){return ko(e||[],t||[],rr)}var Ch=pe(function(e){var t=e.length,n=t>1?e[t-1]:i;return n=typeof n=="function"?(e.pop(),n):i,Lu(e,n)});function Ou(e){var t=o(e);return t.__chain__=!0,t}function Xh(e,t){return t(e),e}function zr(e,t){return t(e)}var Mh=Kt(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(u){return Ci(u,e)};return t>1||this.__actions__.length||!(r instanceof Te)||!kt(n)?this.thru(a):(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:zr,args:[a],thisArg:i}),new mt(r,this.__chain__).thru(function(u){return t&&!u.length&&u.push(i),u}))});function xh(){return Ou(this)}function Uh(){return new mt(this.value(),this.__chain__)}function Fh(){this.__values__===i&&(this.__values__=Vu(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}}function Bh(){return this}function Yh(e){for(var t,n=this;n instanceof Xr;){var r=Su(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t}function Hh(){var e=this.__wrapped__;if(e instanceof Te){var t=e;return this.__actions__.length&&(t=new Te(this)),t=t.reverse(),t.__actions__.push({func:zr,args:[ua],thisArg:i}),new mt(t,this.__chain__)}return this.thru(ua)}function Wh(){return Ko(this.__wrapped__,this.__actions__)}var Gh=Hr(function(e,t,n){Re.call(e,n)?++e[n]:Vt(e,n,1)});function Vh(e,t,n){var r=ce(e)?io:Xc;return n&&rt(e,t,n)&&(t=i),r(e,ne(t,3))}function qh(e,t){var n=ce(e)?nn:Lo;return n(e,ne(t,3))}var Kh=ru(_u),kh=ru(bu);function $h(e,t){return je(Qr(e,t),1)}function zh(e,t){return je(Qr(e,t),ft)}function Qh(e,t,n){return n=n===i?1:le(n),je(Qr(e,t),n)}function Du(e,t){var n=ce(e)?At:un;return n(e,ne(t,3))}function Pu(e,t){var n=ce(e)?gf:No;return n(e,ne(t,3))}var Zh=Hr(function(e,t,n){Re.call(e,n)?e[n].push(t):Vt(e,n,[t])});function jh(e,t,n,r){e=ot(e)?e:Wn(e),n=n&&!r?le(n):0;var a=e.length;return n<0&&(n=ke(a+n,0)),ti(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&On(e,t,n)>-1}var Jh=pe(function(e,t,n){var r=-1,a=typeof t=="function",u=ot(e)?w(e.length):[];return un(e,function(p){u[++r]=a?lt(t,p,n):tr(p,t,n)}),u}),ed=Hr(function(e,t,n){Vt(e,n,t)});function Qr(e,t){var n=ce(e)?Fe:Mo;return n(e,ne(t,3))}function td(e,t,n,r){return e==null?[]:(ce(t)||(t=t==null?[]:[t]),n=r?i:n,ce(n)||(n=n==null?[]:[n]),Bo(e,t,n))}var nd=Hr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function rd(e,t,n){var r=ce(e)?Ai:so,a=arguments.length<3;return r(e,ne(t,4),n,a,un)}function id(e,t,n){var r=ce(e)?vf:so,a=arguments.length<3;return r(e,ne(t,4),n,a,No)}function ad(e,t){var n=ce(e)?nn:Lo;return n(e,Jr(ne(t,3)))}function od(e){var t=ce(e)?_o:jc;return t(e)}function ud(e,t,n){(n?rt(e,t,n):t===i)?t=1:t=le(t);var r=ce(e)?Lc:Jc;return r(e,t)}function sd(e){var t=ce(e)?Oc:tl;return t(e)}function fd(e){if(e==null)return 0;if(ot(e))return ti(e)?Pn(e):e.length;var t=tt(e);return t==N||t==ue?e.size:Bi(e).length}function cd(e,t,n){var r=ce(e)?yi:nl;return n&&rt(e,t,n)&&(t=i),r(e,ne(t,3))}var ld=pe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&rt(e,t[0],t[1])?t=[]:n>2&&rt(t[0],t[1],t[2])&&(t=[t[0]]),Bo(e,je(t,1),[])}),Zr=qf||function(){return Ze.Date.now()};function hd(e,t){if(typeof t!="function")throw new yt(_);return e=le(e),function(){if(--e<1)return t.apply(this,arguments)}}function Cu(e,t,n){return t=n?i:t,t=e&&t==null?e.length:t,qt(e,xe,i,i,i,i,t)}function Xu(e,t){var n;if(typeof t!="function")throw new yt(_);return e=le(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var fa=pe(function(e,t,n){var r=b;if(n.length){var a=an(n,Yn(fa));r|=oe}return qt(e,r,t,n,a)}),Mu=pe(function(e,t,n){var r=b|O;if(n.length){var a=an(n,Yn(Mu));r|=oe}return qt(t,r,e,n,a)});function xu(e,t,n){t=n?i:t;var r=qt(e,y,i,i,i,i,i,t);return r.placeholder=xu.placeholder,r}function Uu(e,t,n){t=n?i:t;var r=qt(e,te,i,i,i,i,i,t);return r.placeholder=Uu.placeholder,r}function Fu(e,t,n){var r,a,u,p,v,m,C=0,X=!1,x=!1,K=!0;if(typeof e!="function")throw new yt(_);t=Rt(t)||0,Ye(n)&&(X=!!n.leading,x="maxWait"in n,u=x?ke(Rt(n.maxWait)||0,t):u,K="trailing"in n?!!n.trailing:K);function Z(Ge){var Dt=r,Qt=a;return r=a=i,C=Ge,p=e.apply(Qt,Dt),p}function re(Ge){return C=Ge,v=or(ge,t),X?Z(Ge):p}function he(Ge){var Dt=Ge-m,Qt=Ge-C,rs=t-Dt;return x?et(rs,u-Qt):rs}function ie(Ge){var Dt=Ge-m,Qt=Ge-C;return m===i||Dt>=t||Dt<0||x&&Qt>=u}function ge(){var Ge=Zr();if(ie(Ge))return Ee(Ge);v=or(ge,he(Ge))}function Ee(Ge){return v=i,K&&r?Z(Ge):(r=a=i,p)}function gt(){v!==i&&$o(v),C=0,r=m=a=v=i}function it(){return v===i?p:Ee(Zr())}function vt(){var Ge=Zr(),Dt=ie(Ge);if(r=arguments,a=this,m=Ge,Dt){if(v===i)return re(m);if(x)return $o(v),v=or(ge,t),Z(m)}return v===i&&(v=or(ge,t)),p}return vt.cancel=gt,vt.flush=it,vt}var dd=pe(function(e,t){return wo(e,1,t)}),pd=pe(function(e,t,n){return wo(e,Rt(t)||0,n)});function gd(e){return qt(e,Ae)}function jr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new yt(_);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],u=n.cache;if(u.has(a))return u.get(a);var p=e.apply(this,r);return n.cache=u.set(a,p)||u,p};return n.cache=new(jr.Cache||Gt),n}jr.Cache=Gt;function Jr(e){if(typeof e!="function")throw new yt(_);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function vd(e){return Xu(2,e)}var Td=rl(function(e,t){t=t.length==1&&ce(t[0])?Fe(t[0],ht(ne())):Fe(je(t,1),ht(ne()));var n=t.length;return pe(function(r){for(var a=-1,u=et(r.length,n);++a<u;)r[a]=t[a].call(this,r[a]);return lt(e,this,r)})}),ca=pe(function(e,t){var n=an(t,Yn(ca));return qt(e,oe,i,t,n)}),Bu=pe(function(e,t){var n=an(t,Yn(Bu));return qt(e,Be,i,t,n)}),Ed=Kt(function(e,t){return qt(e,Je,i,i,i,t)});function Id(e,t){if(typeof e!="function")throw new yt(_);return t=t===i?t:le(t),pe(e,t)}function Ad(e,t){if(typeof e!="function")throw new yt(_);return t=t==null?0:ke(le(t),0),pe(function(n){var r=n[t],a=cn(n,0,t);return r&&rn(a,r),lt(e,this,a)})}function yd(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new yt(_);return Ye(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Fu(e,t,{leading:r,maxWait:t,trailing:a})}function md(e){return Cu(e,1)}function Sd(e,t){return ca($i(t),e)}function _d(){if(!arguments.length)return[];var e=arguments[0];return ce(e)?e:[e]}function bd(e){return St(e,P)}function Rd(e,t){return t=typeof t=="function"?t:i,St(e,P,t)}function wd(e){return St(e,be|P)}function Nd(e,t){return t=typeof t=="function"?t:i,St(e,be|P,t)}function Ld(e,t){return t==null||Ro(e,t,ze(t))}function Ot(e,t){return e===t||e!==e&&t!==t}var Od=qr(xi),Dd=qr(function(e,t){return e>=t}),Rn=Po(function(){return arguments}())?Po:function(e){return He(e)&&Re.call(e,"callee")&&!Eo.call(e,"callee")},ce=w.isArray,Pd=ja?ht(ja):Yc;function ot(e){return e!=null&&ei(e.length)&&!$t(e)}function We(e){return He(e)&&ot(e)}function Cd(e){return e===!0||e===!1||He(e)&&nt(e)==l}var ln=kf||ya,Xd=Ja?ht(Ja):Hc;function Md(e){return He(e)&&e.nodeType===1&&!ur(e)}function xd(e){if(e==null)return!0;if(ot(e)&&(ce(e)||typeof e=="string"||typeof e.splice=="function"||ln(e)||Hn(e)||Rn(e)))return!e.length;var t=tt(e);if(t==N||t==ue)return!e.size;if(ar(e))return!Bi(e).length;for(var n in e)if(Re.call(e,n))return!1;return!0}function Ud(e,t){return nr(e,t)}function Fd(e,t,n){n=typeof n=="function"?n:i;var r=n?n(e,t):i;return r===i?nr(e,t,i,n):!!r}function la(e){if(!He(e))return!1;var t=nt(e);return t==U||t==S||typeof e.message=="string"&&typeof e.name=="string"&&!ur(e)}function Bd(e){return typeof e=="number"&&Ao(e)}function $t(e){if(!Ye(e))return!1;var t=nt(e);return t==F||t==k||t==f||t==W}function Yu(e){return typeof e=="number"&&e==le(e)}function ei(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ve}function Ye(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function He(e){return e!=null&&typeof e=="object"}var Hu=eo?ht(eo):Gc;function Yd(e,t){return e===t||Fi(e,t,ta(t))}function Hd(e,t,n){return n=typeof n=="function"?n:i,Fi(e,t,ta(t),n)}function Wd(e){return Wu(e)&&e!=+e}function Gd(e){if(Rl(e))throw new se(H);return Co(e)}function Vd(e){return e===null}function qd(e){return e==null}function Wu(e){return typeof e=="number"||He(e)&&nt(e)==$}function ur(e){if(!He(e)||nt(e)!=q)return!1;var t=wr(e);if(t===null)return!0;var n=Re.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Sr.call(n)==Hf}var ha=to?ht(to):Vc;function Kd(e){return Yu(e)&&e>=-Ve&&e<=Ve}var Gu=no?ht(no):qc;function ti(e){return typeof e=="string"||!ce(e)&&He(e)&&nt(e)==Oe}function pt(e){return typeof e=="symbol"||He(e)&&nt(e)==ve}var Hn=ro?ht(ro):Kc;function kd(e){return e===i}function $d(e){return He(e)&&tt(e)==Ne}function zd(e){return He(e)&&nt(e)==De}var Qd=qr(Yi),Zd=qr(function(e,t){return e<=t});function Vu(e){if(!e)return[];if(ot(e))return ti(e)?Nt(e):at(e);if($n&&e[$n])return Lf(e[$n]());var t=tt(e),n=t==N?wi:t==ue?Ar:Wn;return n(e)}function zt(e){if(!e)return e===0?e:0;if(e=Rt(e),e===ft||e===-ft){var t=e<0?-1:1;return t*wt}return e===e?e:0}function le(e){var t=zt(e),n=t%1;return t===t?n?t-n:t:0}function qu(e){return e?mn(le(e),0,c):0}function Rt(e){if(typeof e=="number")return e;if(pt(e))return M;if(Ye(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ye(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=fo(e);var n=Ds.test(e);return n||Cs.test(e)?hf(e.slice(2),n?2:8):Os.test(e)?M:+e}function Ku(e){return Ut(e,ut(e))}function jd(e){return e?mn(le(e),-Ve,Ve):e===0?e:0}function _e(e){return e==null?"":dt(e)}var Jd=Fn(function(e,t){if(ar(t)||ot(t)){Ut(t,ze(t),e);return}for(var n in t)Re.call(t,n)&&Jn(e,n,t[n])}),ku=Fn(function(e,t){Ut(t,ut(t),e)}),ni=Fn(function(e,t,n,r){Ut(t,ut(t),e,r)}),ep=Fn(function(e,t,n,r){Ut(t,ze(t),e,r)}),tp=Kt(Ci);function np(e,t){var n=Un(e);return t==null?n:bo(n,t)}var rp=pe(function(e,t){e=Le(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&rt(t[0],t[1],a)&&(r=1);++n<r;)for(var u=t[n],p=ut(u),v=-1,m=p.length;++v<m;){var C=p[v],X=e[C];(X===i||Ot(X,Xn[C])&&!Re.call(e,C))&&(e[C]=u[C])}return e}),ip=pe(function(e){return e.push(i,cu),lt($u,i,e)});function ap(e,t){return ao(e,ne(t,3),xt)}function op(e,t){return ao(e,ne(t,3),Mi)}function up(e,t){return e==null?e:Xi(e,ne(t,3),ut)}function sp(e,t){return e==null?e:Oo(e,ne(t,3),ut)}function fp(e,t){return e&&xt(e,ne(t,3))}function cp(e,t){return e&&Mi(e,ne(t,3))}function lp(e){return e==null?[]:Ur(e,ze(e))}function hp(e){return e==null?[]:Ur(e,ut(e))}function da(e,t,n){var r=e==null?i:Sn(e,t);return r===i?n:r}function dp(e,t){return e!=null&&du(e,t,xc)}function pa(e,t){return e!=null&&du(e,t,Uc)}var pp=au(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=_r.call(t)),e[t]=n},va(st)),gp=au(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=_r.call(t)),Re.call(e,t)?e[t].push(n):e[t]=[n]},ne),vp=pe(tr);function ze(e){return ot(e)?So(e):Bi(e)}function ut(e){return ot(e)?So(e,!0):kc(e)}function Tp(e,t){var n={};return t=ne(t,3),xt(e,function(r,a,u){Vt(n,t(r,a,u),r)}),n}function Ep(e,t){var n={};return t=ne(t,3),xt(e,function(r,a,u){Vt(n,a,t(r,a,u))}),n}var Ip=Fn(function(e,t,n){Fr(e,t,n)}),$u=Fn(function(e,t,n,r){Fr(e,t,n,r)}),Ap=Kt(function(e,t){var n={};if(e==null)return n;var r=!1;t=Fe(t,function(u){return u=fn(u,e),r||(r=u.length>1),u}),Ut(e,Ji(e),n),r&&(n=St(n,be|Me|P,pl));for(var a=t.length;a--;)qi(n,t[a]);return n});function yp(e,t){return zu(e,Jr(ne(t)))}var mp=Kt(function(e,t){return e==null?{}:zc(e,t)});function zu(e,t){if(e==null)return{};var n=Fe(Ji(e),function(r){return[r]});return t=ne(t),Yo(e,n,function(r,a){return t(r,a[0])})}function Sp(e,t,n){t=fn(t,e);var r=-1,a=t.length;for(a||(a=1,e=i);++r<a;){var u=e==null?i:e[Ft(t[r])];u===i&&(r=a,u=n),e=$t(u)?u.call(e):u}return e}function _p(e,t,n){return e==null?e:rr(e,t,n)}function bp(e,t,n,r){return r=typeof r=="function"?r:i,e==null?e:rr(e,t,n,r)}var Qu=su(ze),Zu=su(ut);function Rp(e,t,n){var r=ce(e),a=r||ln(e)||Hn(e);if(t=ne(t,4),n==null){var u=e&&e.constructor;a?n=r?new u:[]:Ye(e)?n=$t(u)?Un(wr(e)):{}:n={}}return(a?At:xt)(e,function(p,v,m){return t(n,p,v,m)}),n}function wp(e,t){return e==null?!0:qi(e,t)}function Np(e,t,n){return e==null?e:qo(e,t,$i(n))}function Lp(e,t,n,r){return r=typeof r=="function"?r:i,e==null?e:qo(e,t,$i(n),r)}function Wn(e){return e==null?[]:Ri(e,ze(e))}function Op(e){return e==null?[]:Ri(e,ut(e))}function Dp(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=Rt(n),n=n===n?n:0),t!==i&&(t=Rt(t),t=t===t?t:0),mn(Rt(e),t,n)}function Pp(e,t,n){return t=zt(t),n===i?(n=t,t=0):n=zt(n),e=Rt(e),Fc(e,t,n)}function Cp(e,t,n){if(n&&typeof n!="boolean"&&rt(e,t,n)&&(t=n=i),n===i&&(typeof t=="boolean"?(n=t,t=i):typeof e=="boolean"&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=zt(e),t===i?(t=e,e=0):t=zt(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=yo();return et(e+a*(t-e+lf("1e-"+((a+"").length-1))),t)}return Wi(e,t)}var Xp=Bn(function(e,t,n){return t=t.toLowerCase(),e+(n?ju(t):t)});function ju(e){return ga(_e(e).toLowerCase())}function Ju(e){return e=_e(e),e&&e.replace(Ms,_f).replace(ef,"")}function Mp(e,t,n){e=_e(e),t=dt(t);var r=e.length;n=n===i?r:mn(le(n),0,r);var a=n;return n-=t.length,n>=0&&e.slice(n,a)==t}function xp(e){return e=_e(e),e&&ci.test(e)?e.replace(Yt,bf):e}function Up(e){return e=_e(e),e&&ys.test(e)?e.replace(Ht,"\\$&"):e}var Fp=Bn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Bp=Bn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Yp=nu("toLowerCase");function Hp(e,t,n){e=_e(e),t=le(t);var r=t?Pn(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return Vr(Dr(a),n)+e+Vr(Or(a),n)}function Wp(e,t,n){e=_e(e),t=le(t);var r=t?Pn(e):0;return t&&r<t?e+Vr(t-r,n):e}function Gp(e,t,n){e=_e(e),t=le(t);var r=t?Pn(e):0;return t&&r<t?Vr(t-r,n)+e:e}function Vp(e,t,n){return n||t==null?t=0:t&&(t=+t),Zf(_e(e).replace(li,""),t||0)}function qp(e,t,n){return(n?rt(e,t,n):t===i)?t=1:t=le(t),Gi(_e(e),t)}function Kp(){var e=arguments,t=_e(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var kp=Bn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function $p(e,t,n){return n&&typeof n!="number"&&rt(e,t,n)&&(t=n=i),n=n===i?c:n>>>0,n?(e=_e(e),e&&(typeof t=="string"||t!=null&&!ha(t))&&(t=dt(t),!t&&Dn(e))?cn(Nt(e),0,n):e.split(t,n)):[]}var zp=Bn(function(e,t,n){return e+(n?" ":"")+ga(t)});function Qp(e,t,n){return e=_e(e),n=n==null?0:mn(le(n),0,e.length),t=dt(t),e.slice(n,n+t.length)==t}function Zp(e,t,n){var r=o.templateSettings;n&&rt(e,t,n)&&(t=i),e=_e(e),t=ni({},t,r,fu);var a=ni({},t.imports,r.imports,fu),u=ze(a),p=Ri(a,u),v,m,C=0,X=t.interpolate||gr,x="__p += '",K=Ni((t.escape||gr).source+"|"+X.source+"|"+(X===vn?Ls:gr).source+"|"+(t.evaluate||gr).source+"|$","g"),Z="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++of+"]")+`
`;e.replace(K,function(ie,ge,Ee,gt,it,vt){return Ee||(Ee=gt),x+=e.slice(C,vt).replace(xs,Rf),ge&&(v=!0,x+=`' +
__e(`+ge+`) +
'`),it&&(m=!0,x+=`';
`+it+`;
__p += '`),Ee&&(x+=`' +
((__t = (`+Ee+`)) == null ? '' : __t) +
'`),C=vt+ie.length,ie}),x+=`';
`;var re=Re.call(t,"variable")&&t.variable;if(!re)x=`with (obj) {
`+x+`
}
`;else if(ws.test(re))throw new se(ee);x=(m?x.replace(tn,""):x).replace(Nn,"$1").replace(Xt,"$1;"),x="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var he=ts(function(){return me(u,Z+"return "+x).apply(i,p)});if(he.source=x,la(he))throw he;return he}function jp(e){return _e(e).toLowerCase()}function Jp(e){return _e(e).toUpperCase()}function eg(e,t,n){if(e=_e(e),e&&(n||t===i))return fo(e);if(!e||!(t=dt(t)))return e;var r=Nt(e),a=Nt(t),u=co(r,a),p=lo(r,a)+1;return cn(r,u,p).join("")}function tg(e,t,n){if(e=_e(e),e&&(n||t===i))return e.slice(0,po(e)+1);if(!e||!(t=dt(t)))return e;var r=Nt(e),a=lo(r,Nt(t))+1;return cn(r,0,a).join("")}function ng(e,t,n){if(e=_e(e),e&&(n||t===i))return e.replace(li,"");if(!e||!(t=dt(t)))return e;var r=Nt(e),a=co(r,Nt(t));return cn(r,a).join("")}function rg(e,t){var n=$e,r=dn;if(Ye(t)){var a="separator"in t?t.separator:a;n="length"in t?le(t.length):n,r="omission"in t?dt(t.omission):r}e=_e(e);var u=e.length;if(Dn(e)){var p=Nt(e);u=p.length}if(n>=u)return e;var v=n-Pn(r);if(v<1)return r;var m=p?cn(p,0,v).join(""):e.slice(0,v);if(a===i)return m+r;if(p&&(v+=m.length-v),ha(a)){if(e.slice(v).search(a)){var C,X=m;for(a.global||(a=Ni(a.source,_e(Da.exec(a))+"g")),a.lastIndex=0;C=a.exec(X);)var x=C.index;m=m.slice(0,x===i?v:x)}}else if(e.indexOf(dt(a),v)!=v){var K=m.lastIndexOf(a);K>-1&&(m=m.slice(0,K))}return m+r}function ig(e){return e=_e(e),e&&hr.test(e)?e.replace(Mt,Cf):e}var ag=Bn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ga=nu("toUpperCase");function es(e,t,n){return e=_e(e),t=n?i:t,t===i?Nf(e)?xf(e):If(e):e.match(t)||[]}var ts=pe(function(e,t){try{return lt(e,i,t)}catch(n){return la(n)?n:new se(n)}}),og=Kt(function(e,t){return At(t,function(n){n=Ft(n),Vt(e,n,fa(e[n],e))}),e});function ug(e){var t=e==null?0:e.length,n=ne();return e=t?Fe(e,function(r){if(typeof r[1]!="function")throw new yt(_);return[n(r[0]),r[1]]}):[],pe(function(r){for(var a=-1;++a<t;){var u=e[a];if(lt(u[0],this,r))return lt(u[1],this,r)}})}function sg(e){return Cc(St(e,be))}function va(e){return function(){return e}}function fg(e,t){return e==null||e!==e?t:e}var cg=iu(),lg=iu(!0);function st(e){return e}function Ta(e){return Xo(typeof e=="function"?e:St(e,be))}function hg(e){return xo(St(e,be))}function dg(e,t){return Uo(e,St(t,be))}var pg=pe(function(e,t){return function(n){return tr(n,e,t)}}),gg=pe(function(e,t){return function(n){return tr(e,n,t)}});function Ea(e,t,n){var r=ze(t),a=Ur(t,r);n==null&&!(Ye(t)&&(a.length||!r.length))&&(n=t,t=e,e=this,a=Ur(t,ze(t)));var u=!(Ye(n)&&"chain"in n)||!!n.chain,p=$t(e);return At(a,function(v){var m=t[v];e[v]=m,p&&(e.prototype[v]=function(){var C=this.__chain__;if(u||C){var X=e(this.__wrapped__),x=X.__actions__=at(this.__actions__);return x.push({func:m,args:arguments,thisArg:e}),X.__chain__=C,X}return m.apply(e,rn([this.value()],arguments))})}),e}function vg(){return Ze._===this&&(Ze._=Wf),this}function Ia(){}function Tg(e){return e=le(e),pe(function(t){return Fo(t,e)})}var Eg=Qi(Fe),Ig=Qi(io),Ag=Qi(yi);function ns(e){return ra(e)?mi(Ft(e)):Qc(e)}function yg(e){return function(t){return e==null?i:Sn(e,t)}}var mg=ou(),Sg=ou(!0);function Aa(){return[]}function ya(){return!1}function _g(){return{}}function bg(){return""}function Rg(){return!0}function wg(e,t){if(e=le(e),e<1||e>Ve)return[];var n=c,r=et(e,c);t=ne(t),e-=c;for(var a=bi(r,t);++n<e;)t(n);return a}function Ng(e){return ce(e)?Fe(e,Ft):pt(e)?[e]:at(mu(_e(e)))}function Lg(e){var t=++Yf;return _e(e)+t}var Og=Gr(function(e,t){return e+t},0),Dg=Zi("ceil"),Pg=Gr(function(e,t){return e/t},1),Cg=Zi("floor");function Xg(e){return e&&e.length?xr(e,st,xi):i}function Mg(e,t){return e&&e.length?xr(e,ne(t,2),xi):i}function xg(e){return uo(e,st)}function Ug(e,t){return uo(e,ne(t,2))}function Fg(e){return e&&e.length?xr(e,st,Yi):i}function Bg(e,t){return e&&e.length?xr(e,ne(t,2),Yi):i}var Yg=Gr(function(e,t){return e*t},1),Hg=Zi("round"),Wg=Gr(function(e,t){return e-t},0);function Gg(e){return e&&e.length?_i(e,st):0}function Vg(e,t){return e&&e.length?_i(e,ne(t,2)):0}return o.after=hd,o.ary=Cu,o.assign=Jd,o.assignIn=ku,o.assignInWith=ni,o.assignWith=ep,o.at=tp,o.before=Xu,o.bind=fa,o.bindAll=og,o.bindKey=Mu,o.castArray=_d,o.chain=Ou,o.chunk=Cl,o.compact=Xl,o.concat=Ml,o.cond=ug,o.conforms=sg,o.constant=va,o.countBy=Gh,o.create=np,o.curry=xu,o.curryRight=Uu,o.debounce=Fu,o.defaults=rp,o.defaultsDeep=ip,o.defer=dd,o.delay=pd,o.difference=xl,o.differenceBy=Ul,o.differenceWith=Fl,o.drop=Bl,o.dropRight=Yl,o.dropRightWhile=Hl,o.dropWhile=Wl,o.fill=Gl,o.filter=qh,o.flatMap=$h,o.flatMapDeep=zh,o.flatMapDepth=Qh,o.flatten=Ru,o.flattenDeep=Vl,o.flattenDepth=ql,o.flip=gd,o.flow=cg,o.flowRight=lg,o.fromPairs=Kl,o.functions=lp,o.functionsIn=hp,o.groupBy=Zh,o.initial=$l,o.intersection=zl,o.intersectionBy=Ql,o.intersectionWith=Zl,o.invert=pp,o.invertBy=gp,o.invokeMap=Jh,o.iteratee=Ta,o.keyBy=ed,o.keys=ze,o.keysIn=ut,o.map=Qr,o.mapKeys=Tp,o.mapValues=Ep,o.matches=hg,o.matchesProperty=dg,o.memoize=jr,o.merge=Ip,o.mergeWith=$u,o.method=pg,o.methodOf=gg,o.mixin=Ea,o.negate=Jr,o.nthArg=Tg,o.omit=Ap,o.omitBy=yp,o.once=vd,o.orderBy=td,o.over=Eg,o.overArgs=Td,o.overEvery=Ig,o.overSome=Ag,o.partial=ca,o.partialRight=Bu,o.partition=nd,o.pick=mp,o.pickBy=zu,o.property=ns,o.propertyOf=yg,o.pull=th,o.pullAll=Nu,o.pullAllBy=nh,o.pullAllWith=rh,o.pullAt=ih,o.range=mg,o.rangeRight=Sg,o.rearg=Ed,o.reject=ad,o.remove=ah,o.rest=Id,o.reverse=ua,o.sampleSize=ud,o.set=_p,o.setWith=bp,o.shuffle=sd,o.slice=oh,o.sortBy=ld,o.sortedUniq=dh,o.sortedUniqBy=ph,o.split=$p,o.spread=Ad,o.tail=gh,o.take=vh,o.takeRight=Th,o.takeRightWhile=Eh,o.takeWhile=Ih,o.tap=Xh,o.throttle=yd,o.thru=zr,o.toArray=Vu,o.toPairs=Qu,o.toPairsIn=Zu,o.toPath=Ng,o.toPlainObject=Ku,o.transform=Rp,o.unary=md,o.union=Ah,o.unionBy=yh,o.unionWith=mh,o.uniq=Sh,o.uniqBy=_h,o.uniqWith=bh,o.unset=wp,o.unzip=sa,o.unzipWith=Lu,o.update=Np,o.updateWith=Lp,o.values=Wn,o.valuesIn=Op,o.without=Rh,o.words=es,o.wrap=Sd,o.xor=wh,o.xorBy=Nh,o.xorWith=Lh,o.zip=Oh,o.zipObject=Dh,o.zipObjectDeep=Ph,o.zipWith=Ch,o.entries=Qu,o.entriesIn=Zu,o.extend=ku,o.extendWith=ni,Ea(o,o),o.add=Og,o.attempt=ts,o.camelCase=Xp,o.capitalize=ju,o.ceil=Dg,o.clamp=Dp,o.clone=bd,o.cloneDeep=wd,o.cloneDeepWith=Nd,o.cloneWith=Rd,o.conformsTo=Ld,o.deburr=Ju,o.defaultTo=fg,o.divide=Pg,o.endsWith=Mp,o.eq=Ot,o.escape=xp,o.escapeRegExp=Up,o.every=Vh,o.find=Kh,o.findIndex=_u,o.findKey=ap,o.findLast=kh,o.findLastIndex=bu,o.findLastKey=op,o.floor=Cg,o.forEach=Du,o.forEachRight=Pu,o.forIn=up,o.forInRight=sp,o.forOwn=fp,o.forOwnRight=cp,o.get=da,o.gt=Od,o.gte=Dd,o.has=dp,o.hasIn=pa,o.head=wu,o.identity=st,o.includes=jh,o.indexOf=kl,o.inRange=Pp,o.invoke=vp,o.isArguments=Rn,o.isArray=ce,o.isArrayBuffer=Pd,o.isArrayLike=ot,o.isArrayLikeObject=We,o.isBoolean=Cd,o.isBuffer=ln,o.isDate=Xd,o.isElement=Md,o.isEmpty=xd,o.isEqual=Ud,o.isEqualWith=Fd,o.isError=la,o.isFinite=Bd,o.isFunction=$t,o.isInteger=Yu,o.isLength=ei,o.isMap=Hu,o.isMatch=Yd,o.isMatchWith=Hd,o.isNaN=Wd,o.isNative=Gd,o.isNil=qd,o.isNull=Vd,o.isNumber=Wu,o.isObject=Ye,o.isObjectLike=He,o.isPlainObject=ur,o.isRegExp=ha,o.isSafeInteger=Kd,o.isSet=Gu,o.isString=ti,o.isSymbol=pt,o.isTypedArray=Hn,o.isUndefined=kd,o.isWeakMap=$d,o.isWeakSet=zd,o.join=jl,o.kebabCase=Fp,o.last=bt,o.lastIndexOf=Jl,o.lowerCase=Bp,o.lowerFirst=Yp,o.lt=Qd,o.lte=Zd,o.max=Xg,o.maxBy=Mg,o.mean=xg,o.meanBy=Ug,o.min=Fg,o.minBy=Bg,o.stubArray=Aa,o.stubFalse=ya,o.stubObject=_g,o.stubString=bg,o.stubTrue=Rg,o.multiply=Yg,o.nth=eh,o.noConflict=vg,o.noop=Ia,o.now=Zr,o.pad=Hp,o.padEnd=Wp,o.padStart=Gp,o.parseInt=Vp,o.random=Cp,o.reduce=rd,o.reduceRight=id,o.repeat=qp,o.replace=Kp,o.result=Sp,o.round=Hg,o.runInContext=A,o.sample=od,o.size=fd,o.snakeCase=kp,o.some=cd,o.sortedIndex=uh,o.sortedIndexBy=sh,o.sortedIndexOf=fh,o.sortedLastIndex=ch,o.sortedLastIndexBy=lh,o.sortedLastIndexOf=hh,o.startCase=zp,o.startsWith=Qp,o.subtract=Wg,o.sum=Gg,o.sumBy=Vg,o.template=Zp,o.times=wg,o.toFinite=zt,o.toInteger=le,o.toLength=qu,o.toLower=jp,o.toNumber=Rt,o.toSafeInteger=jd,o.toString=_e,o.toUpper=Jp,o.trim=eg,o.trimEnd=tg,o.trimStart=ng,o.truncate=rg,o.unescape=ig,o.uniqueId=Lg,o.upperCase=ag,o.upperFirst=ga,o.each=Du,o.eachRight=Pu,o.first=wu,Ea(o,function(){var e={};return xt(o,function(t,n){Re.call(o.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),o.VERSION=R,At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){o[e].placeholder=o}),At(["drop","take"],function(e,t){Te.prototype[e]=function(n){n=n===i?1:ke(le(n),0);var r=this.__filtered__&&!t?new Te(this):this.clone();return r.__filtered__?r.__takeCount__=et(n,r.__takeCount__):r.__views__.push({size:et(n,c),type:e+(r.__dir__<0?"Right":"")}),r},Te.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Pt||n==Bt;Te.prototype[e]=function(a){var u=this.clone();return u.__iteratees__.push({iteratee:ne(a,3),type:n}),u.__filtered__=u.__filtered__||r,u}}),At(["head","last"],function(e,t){var n="take"+(t?"Right":"");Te.prototype[e]=function(){return this[n](1).value()[0]}}),At(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Te.prototype[e]=function(){return this.__filtered__?new Te(this):this[n](1)}}),Te.prototype.compact=function(){return this.filter(st)},Te.prototype.find=function(e){return this.filter(e).head()},Te.prototype.findLast=function(e){return this.reverse().find(e)},Te.prototype.invokeMap=pe(function(e,t){return typeof e=="function"?new Te(this):this.map(function(n){return tr(n,e,t)})}),Te.prototype.reject=function(e){return this.filter(Jr(ne(e)))},Te.prototype.slice=function(e,t){e=le(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Te(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(t=le(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Te.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Te.prototype.toArray=function(){return this.take(c)},xt(Te.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=o[r?"take"+(t=="last"?"Right":""):t],u=r||/^find/.test(t);a&&(o.prototype[t]=function(){var p=this.__wrapped__,v=r?[1]:arguments,m=p instanceof Te,C=v[0],X=m||ce(p),x=function(ge){var Ee=a.apply(o,rn([ge],v));return r&&K?Ee[0]:Ee};X&&n&&typeof C=="function"&&C.length!=1&&(m=X=!1);var K=this.__chain__,Z=!!this.__actions__.length,re=u&&!K,he=m&&!Z;if(!u&&X){p=he?p:new Te(this);var ie=e.apply(p,v);return ie.__actions__.push({func:zr,args:[x],thisArg:i}),new mt(ie,K)}return re&&he?e.apply(this,v):(ie=this.thru(x),re?r?ie.value()[0]:ie.value():ie)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=yr[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);o.prototype[e]=function(){var a=arguments;if(r&&!this.__chain__){var u=this.value();return t.apply(ce(u)?u:[],a)}return this[n](function(p){return t.apply(ce(p)?p:[],a)})}}),xt(Te.prototype,function(e,t){var n=o[t];if(n){var r=n.name+"";Re.call(xn,r)||(xn[r]=[]),xn[r].push({name:t,func:n})}}),xn[Wr(i,O).name]=[{name:"wrapper",func:i}],Te.prototype.clone=ic,Te.prototype.reverse=ac,Te.prototype.value=oc,o.prototype.at=Mh,o.prototype.chain=xh,o.prototype.commit=Uh,o.prototype.next=Fh,o.prototype.plant=Yh,o.prototype.reverse=Hh,o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=Wh,o.prototype.first=o.prototype.head,$n&&(o.prototype[$n]=Bh),o},Cn=Uf();En?((En.exports=Cn)._=Cn,Ti._=Cn):Ze._=Cn}).call(sr)})(ui,ui.exports);var av=ui.exports;const Sa=wa(av),ov={silentAdd:!1,silentStart:!1};async function La(E){const s=Zt(),i={...ov};s.silentAddDownload&&(i.silentAdd=!0,i.silentStart=s.silentStartDownload);const R=!!await sv(async()=>await nv(E,i));return R&&s.silentAddDownload&&E.length==1&&hn(()=>{try{Se.notifications?.create({type:"basic",iconUrl:Se.runtime.getURL("icons/icon-128.png"),title:Se.i18n.getMessage("abdm_notification_title"),message:Se.i18n.getMessage("abdm_notification_download_captured_silently")})}catch{console.log("can't send notifications")}}),R}async function uv(E){return Promise.all(E.map(async s=>await hs(s)))}async function hs(E){try{let s={};const i=(await Se.cookies.getAll({url:E})).map(R=>`${R.name}=${R.value}`).join("; ");return s.Cookie=i,s.Host=new URL(E).host,s["User-Agent"]=navigator.userAgent,s}catch(s){return console.log(s),null}}async function sv(E){try{return await E()}catch(s){s instanceof ev?is(Se.i18n.getMessage("connection_error_api_error")):s instanceof tv?is(Se.i18n.getMessage("connection_error_network_error")):console.log("unknown error",s)}}const si=Object.freeze({downloadWithAbDm:"download-with-ab-dm",downloadSelectedWithAbDm:"download-selected-with-ab-dm"});async function fv(){await Se.contextMenus.removeAll(),Se.contextMenus.create({id:si.downloadSelectedWithAbDm,title:Se.i18n.getMessage("context_menu_download_selected_links_with_abdm"),contexts:["selection"]}),Se.contextMenus.create({id:si.downloadWithAbDm,title:Se.i18n.getMessage("context_menu_download_with_abdm"),contexts:["link","audio","video","image"]})}function cv(){Se.contextMenus.onClicked.addListener(async E=>{switch(E.menuItemId){case si.downloadWithAbDm:const s=E.linkUrl||E.srcUrl;if(!s){console.log("there is no valid link returning");return}const i=E.pageUrl??null,R=E.linkText??null;let B=null;Zt().sendHeaders&&(B=await hs(s)),await La([{link:s,description:R,downloadPage:i,headers:B,suggestedName:null,type:"http"}]);break;case si.downloadSelectedWithAbDm:const[_]=await Se.tabs.query({active:!0}),ee=_?.id;if(ee===void 0)break;await Na("check_selected_text_for_links",null,{tabId:ee,context:"content-script"});break}})}async function lv(){await fv(),cv()}var fi=(E=>(E.chrome="chrome",E.firefox="firefox",E))(fi||{});let ma;function hv(){const E="chrome";if(!Object.values(fi).includes(E))throw new Error(`Extension target ${E} is not available in defined BrowserTargets did you forget to update BrowserTarget?`);return E}function ds(){return ma||(ma=hv()),ma}function dv(){return ds()==="chrome"}var pv=/[|\\{}()[\]^$+*?.]/g,gv=function(E){if(typeof E!="string")throw new TypeError("Expected a string");return E.replace(pv,"\\$&")},vv=gv,Tv=/^\*\./,Ev=/\.\*$/,Iv=/\/.{0,10000}$/,as=/:(\d+)$/,os=/^(\w+):\/\//,Av=/\\\.\\\*/g;function ps(E){if(!E||typeof E!="string")return null;var s=E.match(os);s=s?s[1]:null,E=E.replace(os,""),E=E.replace(Iv,"");var i=E.match(as);return i=i?parseInt(i[1],10):null,E=E.replace(as,""),{protocol:s,url:E,port:i}}function yv(E){var s=ps(E);return s&&(s.url=s.url.replace(Tv,"."),s.url=s.url.replace(Ev,".")),s}function mv(E,s){if(!E||!s)return!1;var i=!s.protocol||!E.protocol||s.protocol===E.protocol,R=!s.port||E.port===s.port,B=s.url.startsWith("."),H=s.url.endsWith("."),_="^";return B&&(_+=".+"),_+=vv(s.url).replace(Av,"\\..*"),H&&(_+=".+"),_+="$",new RegExp(_).test(E.url)&&i&&R}var Sv=function(E,s){return Array.isArray(s)||(s=[s]),s.some(i=>mv(ps(E),yv(i)))};const us=wa(Sv),_v=["youtu.be","*.youtube.com","youtube.com"];function gs(E){const s=E.get("content-length");return s==null?null:Sa.toInteger(s)}function _a(E){return E.get("content-type")}function vs(E){return E.get("content-disposition")}class bv{static regex=/=\?(?<charset>[^?]+)\?(?<encoding>[BQ])\?(?<encodedText>[^?]+)\?=/gi;static decode(s){return s.replace(this.regex,(i,...R)=>{const B=R.at(-1);try{const H=B?.charset,_=B?.encoding.toUpperCase(),ee=B?.encodedText;if(!H||!_||!ee)return i;let z;if(_==="B")z=Uint8Array.from(atob(ee),fe=>fe.charCodeAt(0));else if(_==="Q")z=this.decodeQuotedPrintable(ee);else return i;return new TextDecoder(H).decode(z)}catch{return i}})}static decodeQuotedPrintable(s){const i=[];let R=0;for(;R<s.length;){const B=s[R];if(B==="="&&R+2<s.length){const H=s.substring(R+1,R+3),_=parseInt(H,16);isNaN(_)?(i.push(B.charCodeAt(0)),R++):(i.push(_),R+=3)}else B==="_"?(i.push(" ".charCodeAt(0)),R++):(i.push(B.charCodeAt(0)),R++)}return new Uint8Array(i)}}const Rv=/filename\*=UTF-8''([\w%\-\.]+)(?:; ?|$)/i,wv=/^filename=(["']?)(.*?[^\\])\1(?:; ?|$)/i;function Ts(E){const s=Rv.exec(E);if(s!==null&&s[1])return decodeURIComponent(s[1]);const i=E.toLowerCase().indexOf("filename=");if(i>=0){const R=E.slice(i),B=wv.exec(R);if(B!=null&&B[2]){let H=B[2];return H=bv.decode(H),decodeURIComponent(H)}}return null}function ba(E){return E.split(".").pop()??E}function Nv(E){if(!E)return E;const s=E.lastIndexOf(".");return s>0?E.slice(0,s):E}function Ra(E){try{return new URL(E,"http://dummy.base").pathname.split("/").pop()??null}catch{return null}}function Lv(E){const s=vs(E);return s==null?null:Ts(s)}class Es{pendingRequests={};responses={};onMediaDetectedListener=null;tabCache={};setPendingRequest(s,i){this.pendingRequests[s]=i}removePendingRequest(s){delete this.pendingRequests[s]}newTabs={};addItemToNewTabs(s,i){this.newTabs[s]=i}removeItemInNewTabs(s){delete this.newTabs[s]}isInConfigBlacklist(s){const i=Zt().blacklistedUrls;return i.length==0?!1:us(s,i)}isWebPageComponents(s){return!!_a(s)?.toLowerCase().startsWith("text/")}isHLSRequest(s,i,R){return{type:"media",mediaType:"hls",url:s,requestHeaders:i,responseHeaders:R}}isDirectMedia(s,i,R){const B=_a(R);if(!B)return!1;for(const H of["video","audio"])if(B.startsWith(H))return{type:"media",mediaType:"http",url:s,requestHeaders:i,responseHeaders:R};return!1}isInRegisteredFileFormats(s){const i=s.toLowerCase();return!!Zt().registeredFileTypes.includes(i)}shouldHandleRequestForDirectDownload(s){if(!(s.type==="main_frame"||s.type==="sub_frame")||s.method!=="GET"||!Zt().autoCaptureLinks||!fs(s.statusCode,200,299))return!1;const i=cr(s.responseHeaders);if(this.isWebPageComponents(i)||this.isInConfigBlacklist(s.originUrl||s.url))return!1;const R=this.getDownloadPage(s);return R&&this.isInConfigBlacklist(R)?!1:this.isDirectDownloadContent(s,i)}isDirectDownloadContent(s,i){if(!(s.type==="main_frame"||s.type==="sub_frame"))return!1;let R=Lv(i);if(R===null&&(R=Ra(s.url)),R==null)return!1;const B=ba(R);return this.isInRegisteredFileFormats(B)?R:!1}async requestAddDownload(s){const i=await La([s]);return Zt().allowPassDownloadIfAppNotRespond?i:!0}createDirectDownloadItemFromWebRequest(s){let i=null;s?.requestHeaders&&(i={},s.requestHeaders.forEach(B=>{B.value&&(i[B.name]=B.value)}));const R=this.getDownloadPage(s);return{link:s.url,headers:i,downloadPage:R,description:null,type:"http",suggestedName:null}}getDownloadPage(s){let i=s.documentUrl;if(i)return i;try{return this.tabCache[s.tabId].url??null}catch{return null}}isItNewTab(s){return this.newTabs[s]!==void 0}async closeIfItWasNewTab(s){if(!Zt().closeNewTabIfItWasCaptured)return;const i=s.tabId;this.isItNewTab(i)&&await Se.tabs.remove(i)}redirectDownloadsToExtension(){const s={urls:["*://*/*"]};Se.tabs.onCreated.addListener(i=>{i.id&&i.url&&this.addItemToNewTabs(i.id,i.url),this.updateTabCache(i)}),Se.tabs.onUpdated.addListener((i,R,B)=>{R.url&&this.removeItemInNewTabs(i),this.updateTabCache(B)}),Se.tabs.onRemoved.addListener((i,R)=>{this.removeItemInNewTabs(i),delete this.tabCache[i]}),Se.webRequest.onSendHeaders.addListener(i=>{this.setPendingRequest(i.requestId,i)},s,hn(()=>{const i=["requestHeaders"];return dv()&&i.push("extraHeaders"),i})),Se.webRequest.onErrorOccurred.addListener(i=>{this.removePendingRequest(i.requestId)},s),Se.webRequest.onCompleted.addListener(i=>{const R=this.pendingRequests[i.requestId];R&&this.checkForDirectMedia(i,R)},{types:["media"],urls:["*://*/*"]},["responseHeaders"]),Se.webRequest.onCompleted.addListener(i=>{const R=this.pendingRequests[i.requestId];R&&this.checkForHLS(i,R)},{types:["xmlhttprequest"],urls:["http://*/*.m3u8","https://*/*.m3u8","http://*/*.m3u8?*","https://*/*.m3u8?*"]},["responseHeaders"]),Se.webRequest.onCompleted.addListener(i=>{this.removePendingRequest(i.requestId)},s),Se.webRequest.onHeadersReceived.addListener(async i=>{let R=!0;try{const B=this.shouldHandleRequestForDirectDownload(i);if(this.responses[i.requestId]=i,B===!1)return this.passResponse();const H=this.pendingRequests[i.requestId];if(H===void 0)return this.passResponse();const _=this.createDirectDownloadItemFromWebRequest(H);return await this.requestAddDownload(_)?(this.canBlockResponse()||(R=!1),await this.onDownloadSendToAppSuccess(H),this.cancelResponse()):(await this.onDownloadSendToAppFailed(H),this.passResponse())}finally{R?delete this.responses[i.requestId]:setTimeout(()=>{delete this.responses[i.requestId]},5e3)}},s,hn(()=>{const i=["responseHeaders"];return this.canBlockResponse()&&i.push("blocking"),i}))}onMediaDetected(s,i){this.onMediaDetectedListener?.onMediaDetected(s,i)}async onDownloadSendToAppSuccess(s){await this.closeIfItWasNewTab(s)}async onDownloadSendToAppFailed(s){}setOnMediaDetectedListener(s){this.onMediaDetectedListener=s}checkForHLS(s,i){if(!this.shouldProcessMedia(s))return;const R=this.isHLSRequest(s.url,cr(i.requestHeaders),cr(s.responseHeaders));R&&this.onMediaDetected(s.tabId,R)}shouldProcessMedia(s){if(!Zt().popupEnabled)return!1;const i=s.originUrl||s.url;if(this.isInConfigBlacklist(i)||this.isInMediaBlackList(i))return!1;const R=this.getDownloadPage(s);return!(R&&(this.isInConfigBlacklist(R)||this.isInMediaBlackList(R)))}checkForDirectMedia(s,i){if(!this.shouldProcessMedia(s))return;const R=this.isDirectMedia(s.url,cr(i.requestHeaders),cr(s.responseHeaders));R&&this.onMediaDetected(s.tabId,R)}isInMediaBlackList(s){const i=_v;return i.length==0?!1:us(s,i)}updateTabCache(s){if(!s.id)return;let i=this.tabCache[s.id];i||(i={},this.tabCache[s.id]=i),i.url=s.url,i.title=s.title}}function cr(E){const s=new Headers;return E?.forEach(i=>{i.value&&s.set(i.name,i.value)}),s}class Ov extends Es{cancelResponse(){return{cancel:!0}}passResponse(){return{cancel:!1}}canBlockResponse(){return!0}}class Dv extends Es{redirectDownloadsToExtension(){super.redirectDownloadsToExtension(),chrome.downloads&&chrome.downloads.onCreated&&chrome.downloads.onCreated.addListener(async s=>{if(!Zt().autoCaptureLinks)return;const i=Object.values(this.responses).find(B=>B.url===s.finalUrl);if(!(!i||!this.shouldHandleRequestForDirectDownload(i)))return await Se.downloads.cancel(s.id),await Se.downloads.erase({id:s.id}),!0})}async onDownloadSendToAppFailed(s){super.onDownloadSendToAppFailed(s)}cancelResponse(){}passResponse(){}canBlockResponse(){return!1}}var Is={exports:{}};/*! For license information please see hls-parser.min.js.LICENSE.txt */(function(E,s){(function(i,R){E.exports=R()})(self,()=>(()=>{var i={31:function(H,_,ee){function z(g){return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},z(g)}function de(g,f){var l=Object.keys(g);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(g);f&&(h=h.filter(function(S){return Object.getOwnPropertyDescriptor(g,S).enumerable})),l.push.apply(l,h)}return l}function fe(g){for(var f=1;f<arguments.length;f++){var l=arguments[f]!=null?arguments[f]:{};f%2?de(Object(l),!0).forEach(function(h){y(g,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(l)):de(Object(l)).forEach(function(h){Object.defineProperty(g,h,Object.getOwnPropertyDescriptor(l,h))})}return g}function be(g,f,l){return f=P(f),function(h,S){if(S&&(z(S)=="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(U){if(U===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U}(h)}(g,Me()?Reflect.construct(f,l||[],P(g).constructor):f.apply(g,l))}function Me(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Me=function(){return!!g})()}function P(g){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},P(g)}function V(g,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(f&&f.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),f&&Y(g,f)}function Y(g,f){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,h){return l.__proto__=h,l},Y(g,f)}function b(g,f){for(var l=0;l<f.length;l++){var h=f[l];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(g,te(h.key),h)}}function O(g,f,l){return f&&b(g.prototype,f),l&&b(g,l),Object.defineProperty(g,"prototype",{writable:!1}),g}function G(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function")}function y(g,f,l){return(f=te(f))in g?Object.defineProperty(g,f,{value:l,enumerable:!0,configurable:!0,writable:!0}):g[f]=l,g}function te(g){var f=function(l,h){if(z(l)!="object"||!l)return l;var S=l[Symbol.toPrimitive];if(S!==void 0){var U=S.call(l,h||"default");if(z(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(l)}(g,"string");return z(f)=="symbol"?f:f+""}var oe,Be=this&&this.__createBinding||(Object.create?function(g,f,l,h){h===void 0&&(h=l);var S=Object.getOwnPropertyDescriptor(f,l);S&&!("get"in S?!f.__esModule:S.writable||S.configurable)||(S={enumerable:!0,get:function(){return f[l]}}),Object.defineProperty(g,h,S)}:function(g,f,l,h){h===void 0&&(h=l),g[h]=f[l]}),xe=this&&this.__setModuleDefault||(Object.create?function(g,f){Object.defineProperty(g,"default",{enumerable:!0,value:f})}:function(g,f){g.default=f}),Je=this&&this.__importStar||(oe=function(g){return oe=Object.getOwnPropertyNames||function(f){var l=[];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(l[l.length]=h);return l},oe(g)},function(g){if(g&&g.__esModule)return g;var f={};if(g!=null)for(var l=oe(g),h=0;h<l.length;h++)l[h]!=="default"&&Be(f,g,l[h]);return xe(f,g),f});Object.defineProperty(_,"__esModule",{value:!0}),_.ContentSteering=_.RenditionReport=_.PrefetchSegment=_.PartialSegment=_.Segment=_.MediaPlaylist=_.MasterPlaylist=_.Playlist=_.SpliceInfo=_.DateRange=_.MediaInitializationSection=_.Key=_.SessionData=_.Variant=_.Rendition=void 0;var Ae=Je(ee(203)),$e=O(function g(f){var l=f.type,h=f.uri,S=f.groupId,U=f.language,F=f.assocLanguage,k=f.name,N=f.isDefault,$=f.autoselect,J=f.forced,q=f.instreamId,j=f.characteristics,W=f.channels,ae=f.pathwayId;G(this,g),y(this,"type",void 0),y(this,"uri",void 0),y(this,"groupId",void 0),y(this,"language",void 0),y(this,"assocLanguage",void 0),y(this,"name",void 0),y(this,"isDefault",void 0),y(this,"autoselect",void 0),y(this,"forced",void 0),y(this,"instreamId",void 0),y(this,"characteristics",void 0),y(this,"channels",void 0),y(this,"pathwayId",void 0),Ae.PARAMCHECK(l,S,k),Ae.CONDITIONALASSERT([l==="SUBTITLES",h],[l==="CLOSED-CAPTIONS",q],[l==="CLOSED-CAPTIONS",!h],[J,l==="SUBTITLES"]),this.type=l,this.uri=h,this.groupId=S,this.language=U,this.assocLanguage=F,this.name=k,this.isDefault=N,this.autoselect=$,this.forced=J,this.instreamId=q,this.characteristics=j,this.channels=W,this.pathwayId=ae});_.Rendition=$e;var dn=O(function g(f){var l=f.uri,h=f.isIFrameOnly,S=h!==void 0&&h,U=f.bandwidth,F=f.averageBandwidth,k=f.score,N=f.codecs,$=f.resolution,J=f.frameRate,q=f.hdcpLevel,j=f.allowedCpc,W=f.videoRange,ae=f.stableVariantId,ue=f.pathwayId,Oe=f.programId,ve=f.audio,Ue=ve===void 0?[]:ve,Ne=f.video,De=Ne===void 0?[]:Ne,ye=f.subtitles,Ie=ye===void 0?[]:ye,Pe=f.closedCaptions,Qe=Pe===void 0?[]:Pe,qe=f.currentRenditions,Ct=qe===void 0?{audio:0,video:0,subtitles:0,closedCaptions:0}:qe;G(this,g),y(this,"uri",void 0),y(this,"isIFrameOnly",void 0),y(this,"bandwidth",void 0),y(this,"averageBandwidth",void 0),y(this,"score",void 0),y(this,"codecs",void 0),y(this,"resolution",void 0),y(this,"frameRate",void 0),y(this,"hdcpLevel",void 0),y(this,"allowedCpc",void 0),y(this,"videoRange",void 0),y(this,"stableVariantId",void 0),y(this,"pathwayId",void 0),y(this,"programId",void 0),y(this,"audio",void 0),y(this,"video",void 0),y(this,"subtitles",void 0),y(this,"closedCaptions",void 0),y(this,"currentRenditions",void 0),Ae.PARAMCHECK(l,U),this.uri=l,this.isIFrameOnly=S,this.bandwidth=U,this.averageBandwidth=F,this.score=k,this.codecs=N,this.resolution=$,this.frameRate=J,this.hdcpLevel=q,this.allowedCpc=j,this.videoRange=W,this.stableVariantId=ae,this.pathwayId=ue,this.programId=Oe,this.audio=Ue,this.video=De,this.subtitles=Ie,this.closedCaptions=Qe,this.currentRenditions=Ct});_.Variant=dn;var jt=O(function g(f){var l=f.id,h=f.value,S=f.uri,U=f.language;G(this,g),y(this,"id",void 0),y(this,"value",void 0),y(this,"uri",void 0),y(this,"language",void 0),Ae.PARAMCHECK(l,h||S),Ae.ASSERT("SessionData cannot have both value and uri, shoud be either.",!(h&&S)),this.id=l,this.value=h,this.uri=S,this.language=U});_.SessionData=jt;var Jt=O(function g(f){var l=f.method,h=f.uri,S=f.iv,U=f.format,F=f.formatVersion;G(this,g),y(this,"method",void 0),y(this,"uri",void 0),y(this,"iv",void 0),y(this,"format",void 0),y(this,"formatVersion",void 0),Ae.PARAMCHECK(l),Ae.CONDITIONALPARAMCHECK([l!=="NONE",h]),Ae.CONDITIONALASSERT([l==="NONE",!(h||S||U||F)]),this.method=l,this.uri=h,this.iv=S,this.format=U,this.formatVersion=F});_.Key=Jt;var Pt=O(function g(f){var l=f.serverUri,h=f.pathwayId;G(this,g),y(this,"serverUri",void 0),y(this,"pathwayId",void 0),this.serverUri=l,this.pathwayId=h});_.ContentSteering=Pt;var pn=O(function g(f){var l=f.hint,h=l!==void 0&&l,S=f.uri,U=f.mimeType,F=f.byterange;G(this,g),y(this,"hint",void 0),y(this,"uri",void 0),y(this,"mimeType",void 0),y(this,"byterange",void 0),Ae.PARAMCHECK(S),this.hint=h,this.uri=S,this.mimeType=U,this.byterange=F});_.MediaInitializationSection=pn;var Bt=O(function g(f){var l=f.id,h=f.classId,S=f.start,U=f.cue,F=f.end,k=f.duration,N=f.plannedDuration,$=f.endOnNext,J=f.attributes,q=J===void 0?{}:J;G(this,g),y(this,"id",void 0),y(this,"classId",void 0),y(this,"start",void 0),y(this,"cue",void 0),y(this,"end",void 0),y(this,"duration",void 0),y(this,"plannedDuration",void 0),y(this,"endOnNext",void 0),y(this,"attributes",void 0),Ae.PARAMCHECK(l),Ae.CONDITIONALPARAMCHECK([$===!0,h]),Ae.CONDITIONALASSERT([F,S],[F,S<=F],[k,k>=0],[N,N>=0]),this.id=l,this.classId=h,this.start=S,this.cue=U,this.end=F,this.duration=k,this.plannedDuration=N,this.endOnNext=$,this.attributes=q});_.DateRange=Bt;var ft=O(function g(f){var l=f.type,h=f.duration,S=f.tagName,U=f.value;G(this,g),y(this,"type",void 0),y(this,"duration",void 0),y(this,"tagName",void 0),y(this,"value",void 0),Ae.PARAMCHECK(l),Ae.CONDITIONALPARAMCHECK([l==="OUT",h]),Ae.CONDITIONALPARAMCHECK([l==="RAW",S]),this.type=l,this.duration=h,this.tagName=S,this.value=U});_.SpliceInfo=ft;var Ve=O(function g(f){G(this,g),y(this,"type",void 0),Ae.PARAMCHECK(f),this.type=f}),wt=function(g){function f(l){var h,S=l.isMasterPlaylist,U=l.uri,F=l.version,k=l.independentSegments,N=k!==void 0&&k,$=l.start,J=l.source;return G(this,f),y(h=be(this,f,["playlist"]),"isMasterPlaylist",void 0),y(h,"uri",void 0),y(h,"version",void 0),y(h,"independentSegments",void 0),y(h,"start",void 0),y(h,"source",void 0),Ae.PARAMCHECK(S),h.isMasterPlaylist=S,h.uri=U,h.version=F,h.independentSegments=N,h.start=$,h.source=J,h}return V(f,g),O(f)}(Ve);_.Playlist=wt;var M=function(g){function f(){var l,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};G(this,f),y(l=be(this,f,[fe(fe({},h),{},{isMasterPlaylist:!0})]),"variants",void 0),y(l,"currentVariant",void 0),y(l,"sessionDataList",void 0),y(l,"sessionKeyList",void 0),y(l,"contentSteering",void 0);var S=h.variants,U=S===void 0?[]:S,F=h.currentVariant,k=h.sessionDataList,N=k===void 0?[]:k,$=h.sessionKeyList,J=$===void 0?[]:$,q=h.contentSteering,j=q===void 0?void 0:q;return l.variants=U,l.currentVariant=F,l.sessionDataList=N,l.sessionKeyList=J,l.contentSteering=j,l}return V(f,g),O(f)}(wt);_.MasterPlaylist=M;var c=function(g){function f(){var l,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};G(this,f),y(l=be(this,f,[fe(fe({},h),{},{isMasterPlaylist:!1})]),"targetDuration",void 0),y(l,"mediaSequenceBase",void 0),y(l,"discontinuitySequenceBase",void 0),y(l,"endlist",void 0),y(l,"playlistType",void 0),y(l,"isIFrame",void 0),y(l,"segments",void 0),y(l,"prefetchSegments",void 0),y(l,"lowLatencyCompatibility",void 0),y(l,"partTargetDuration",void 0),y(l,"renditionReports",void 0),y(l,"skip",void 0),y(l,"hash",void 0);var S=h.targetDuration,U=h.mediaSequenceBase,F=U===void 0?0:U,k=h.discontinuitySequenceBase,N=k===void 0?0:k,$=h.endlist,J=$!==void 0&&$,q=h.playlistType,j=h.isIFrame,W=h.segments,ae=W===void 0?[]:W,ue=h.prefetchSegments,Oe=ue===void 0?[]:ue,ve=h.lowLatencyCompatibility,Ue=h.partTargetDuration,Ne=h.renditionReports,De=Ne===void 0?[]:Ne,ye=h.skip,Ie=ye===void 0?0:ye,Pe=h.hash;return l.targetDuration=S,l.mediaSequenceBase=F,l.discontinuitySequenceBase=N,l.endlist=J,l.playlistType=q,l.isIFrame=j,l.segments=ae,l.prefetchSegments=Oe,l.lowLatencyCompatibility=ve,l.partTargetDuration=Ue,l.renditionReports=De,l.skip=Ie,l.hash=Pe,l}return V(f,g),O(f)}(wt);_.MediaPlaylist=c;var d=function(g){function f(l){var h,S=l.uri,U=l.mimeType,F=l.data,k=l.duration,N=l.title,$=l.byterange,J=l.discontinuity,q=l.mediaSequenceNumber,j=q===void 0?0:q,W=l.discontinuitySequence,ae=W===void 0?0:W,ue=l.key,Oe=l.map,ve=l.programDateTime,Ue=l.dateRange,Ne=l.markers,De=Ne===void 0?[]:Ne,ye=l.parts,Ie=ye===void 0?[]:ye,Pe=l.gap;return G(this,f),y(h=be(this,f,["segment"]),"uri",void 0),y(h,"mimeType",void 0),y(h,"data",void 0),y(h,"duration",void 0),y(h,"title",void 0),y(h,"byterange",void 0),y(h,"discontinuity",void 0),y(h,"mediaSequenceNumber",void 0),y(h,"discontinuitySequence",void 0),y(h,"key",void 0),y(h,"map",void 0),y(h,"programDateTime",void 0),y(h,"dateRange",void 0),y(h,"markers",void 0),y(h,"parts",void 0),y(h,"gap",void 0),h.uri=S,h.mimeType=U,h.data=F,h.duration=k,h.title=N,h.byterange=$,h.discontinuity=J,h.mediaSequenceNumber=j,h.discontinuitySequence=ae,h.key=ue,h.map=Oe,h.programDateTime=ve,h.dateRange=Ue,h.markers=De,h.parts=Ie,h.gap=Pe,h}return V(f,g),O(f)}(Ve);_.Segment=d;var T=function(g){function f(l){var h,S=l.hint,U=S!==void 0&&S,F=l.uri,k=l.duration,N=l.independent,$=l.byterange,J=l.gap;return G(this,f),y(h=be(this,f,["part"]),"hint",void 0),y(h,"uri",void 0),y(h,"duration",void 0),y(h,"independent",void 0),y(h,"byterange",void 0),y(h,"gap",void 0),Ae.PARAMCHECK(F),h.hint=U,h.uri=F,h.duration=k,h.independent=N,h.duration=k,h.byterange=$,h.gap=J,h}return V(f,g),O(f)}(Ve);_.PartialSegment=T;var I=function(g){function f(l){var h,S=l.uri,U=l.discontinuity,F=l.mediaSequenceNumber,k=F===void 0?0:F,N=l.discontinuitySequence,$=N===void 0?0:N,J=l.key;return G(this,f),y(h=be(this,f,["prefetch"]),"uri",void 0),y(h,"discontinuity",void 0),y(h,"mediaSequenceNumber",void 0),y(h,"discontinuitySequence",void 0),y(h,"key",void 0),Ae.PARAMCHECK(S),h.uri=S,h.discontinuity=U,h.mediaSequenceNumber=k,h.discontinuitySequence=$,h.key=J,h}return V(f,g),O(f)}(Ve);_.PrefetchSegment=I;var L=O(function g(f){var l=f.uri,h=f.lastMSN,S=f.lastPart;G(this,g),y(this,"uri",void 0),y(this,"lastMSN",void 0),y(this,"lastPart",void 0),Ae.PARAMCHECK(l),this.uri=l,this.lastMSN=h,this.lastPart=S});_.RenditionReport=L},73:function(H,_,ee){var z,de=this&&this.__createBinding||(Object.create?function(O,G,y,te){te===void 0&&(te=y);var oe=Object.getOwnPropertyDescriptor(G,y);oe&&!("get"in oe?!G.__esModule:oe.writable||oe.configurable)||(oe={enumerable:!0,get:function(){return G[y]}}),Object.defineProperty(O,te,oe)}:function(O,G,y,te){te===void 0&&(te=y),O[te]=G[y]}),fe=this&&this.__setModuleDefault||(Object.create?function(O,G){Object.defineProperty(O,"default",{enumerable:!0,value:G})}:function(O,G){O.default=G}),be=this&&this.__importStar||(z=function(O){return z=Object.getOwnPropertyNames||function(G){var y=[];for(var te in G)Object.prototype.hasOwnProperty.call(G,te)&&(y[y.length]=te);return y},z(O)},function(O){if(O&&O.__esModule)return O;var G={};if(O!=null)for(var y=z(O),te=0;te<y.length;te++)y[te]!=="default"&&de(G,O,y[te]);return fe(G,O),G}),Me=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(_,"__esModule",{value:!0}),_.setOptions=_.getOptions=_.types=_.stringify=_.parse=void 0;const P=ee(203);Object.defineProperty(_,"getOptions",{enumerable:!0,get:function(){return P.getOptions}}),Object.defineProperty(_,"setOptions",{enumerable:!0,get:function(){return P.setOptions}});const V=Me(ee(377));_.parse=V.default;const Y=Me(ee(887));_.stringify=Y.default;const b=be(ee(31));_.types=b},203:(H,_)=>{function ee(P,V){return function(Y){if(Array.isArray(Y))return Y}(P)||function(Y,b){var O=Y==null?null:typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(O!=null){var G,y,te,oe,Be=[],xe=!0,Je=!1;try{if(te=(O=O.call(Y)).next,b===0){if(Object(O)!==O)return;xe=!1}else for(;!(xe=(G=te.call(O)).done)&&(Be.push(G.value),Be.length!==b);xe=!0);}catch(Ae){Je=!0,y=Ae}finally{try{if(!xe&&O.return!=null&&(oe=O.return(),Object(oe)!==oe))return}finally{if(Je)throw y}}return Be}}(P,V)||de(P,V)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function z(P,V){var Y=typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(!Y){if(Array.isArray(P)||(Y=de(P))||V&&P&&typeof P.length=="number"){Y&&(P=Y);var b=0,O=function(){};return{s:O,n:function(){return b>=P.length?{done:!0}:{done:!1,value:P[b++]}},e:function(oe){throw oe},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G,y=!0,te=!1;return{s:function(){Y=Y.call(P)},n:function(){var oe=Y.next();return y=oe.done,oe},e:function(oe){te=!0,G=oe},f:function(){try{y||Y.return==null||Y.return()}finally{if(te)throw G}}}}function de(P,V){if(P){if(typeof P=="string")return fe(P,V);var Y={}.toString.call(P).slice(8,-1);return Y==="Object"&&P.constructor&&(Y=P.constructor.name),Y==="Map"||Y==="Set"?Array.from(P):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?fe(P,V):void 0}}function fe(P,V){(V==null||V>P.length)&&(V=P.length);for(var Y=0,b=Array(V);Y<V;Y++)b[Y]=P[Y];return b}Object.defineProperty(_,"__esModule",{value:!0}),_.THROW=Me,_.ASSERT=function(P){for(var V=arguments.length,Y=new Array(V>1?V-1:0),b=1;b<V;b++)Y[b-1]=arguments[b];var O,G=z(Y.entries());try{for(G.s();!(O=G.n()).done;){var y=ee(O.value,2),te=y[0];y[1]||Me(new Error("".concat(P," : Failed at [").concat(te,"]")))}}catch(oe){G.e(oe)}finally{G.f()}},_.CONDITIONALASSERT=function(){for(var P=arguments.length,V=new Array(P),Y=0;Y<P;Y++)V[Y]=arguments[Y];var b,O=z(V.entries());try{for(O.s();!(b=O.n()).done;){var G=ee(b.value,2),y=G[0],te=ee(G[1],2),oe=te[0],Be=te[1];oe&&(Be||Me(new Error("Conditional Assert : Failed at [".concat(y,"]"))))}}catch(xe){O.e(xe)}finally{O.f()}},_.PARAMCHECK=function(){for(var P=arguments.length,V=new Array(P),Y=0;Y<P;Y++)V[Y]=arguments[Y];var b,O=z(V.entries());try{for(O.s();!(b=O.n()).done;){var G=ee(b.value,2),y=G[0];G[1]===void 0&&Me(new Error("Param Check : Failed at [".concat(y,"]")))}}catch(te){O.e(te)}finally{O.f()}},_.CONDITIONALPARAMCHECK=function(){for(var P=arguments.length,V=new Array(P),Y=0;Y<P;Y++)V[Y]=arguments[Y];var b,O=z(V.entries());try{for(O.s();!(b=O.n()).done;){var G=ee(b.value,2),y=G[0],te=ee(G[1],2),oe=te[0],Be=te[1];oe&&Be===void 0&&Me(new Error("Conditional Param Check : Failed at [".concat(y,"]")))}}catch(xe){O.e(xe)}finally{O.f()}},_.INVALIDPLAYLIST=function(P){Me(new Error("Invalid Playlist : ".concat(P)))},_.toNumber=function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;if(typeof P=="number")return P;var Y=V===10?Number.parseFloat(P):Number.parseInt(P,V);return Number.isNaN(Y)?0:Y},_.hexToByteSequence=function(P){(P.startsWith("0x")||P.startsWith("0X"))&&(P=P.slice(2));for(var V=new Uint8Array(P.length/2),Y=0;Y<P.length;Y+=2)V[Y/2]=Number.parseInt(P.slice(Y,Y+2),16);return V},_.byteSequenceToHex=function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P.byteLength;Y<=V&&Me(new Error("end must be larger than start : start=".concat(V,", end=").concat(Y)));for(var b=[],O=V;O<Y;O++)b.push("0".concat((255&P[O]).toString(16).toUpperCase()).slice(-2));return"0x".concat(b.join(""))},_.tryCatch=function(P,V){try{return P()}catch(Y){return V(Y)}},_.splitAt=function(P,V){for(var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=-1,O=0,G=0;O<P.length;O++)if(P[O]===V){if(G++===Y)return[P.slice(0,O),P.slice(O+1)];b=O}return b!==-1?[P.slice(0,b),P.slice(b+1)]:[P]},_.trim=function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";return!P||(P=P.trim(),V===" ")||(P.startsWith(V)&&(P=P.slice(1)),P.endsWith(V)&&(P=P.slice(0,-1))),P},_.splitByCommaWithPreservingQuotes=function(P){for(var V=[],Y=!0,b=0,O=[],G=0;G<P.length;G++){var y=P[G];Y&&y===","?(V.push(P.slice(b,G).trim()),b=G+1):y!=='"'&&y!=="'"||(Y?(O.push(y),Y=!1):y===O.at(-1)?(O.pop(),Y=!0):O.push(y))}return V.push(P.slice(b).trim()),V},_.camelify=function(P){var V,Y=[],b=!1,O=z(P);try{for(O.s();!(V=O.n()).done;){var G=V.value;G!=="-"&&G!=="_"?b?(Y.push(G.toUpperCase()),b=!1):Y.push(G.toLowerCase()):b=!0}}catch(y){O.e(y)}finally{O.f()}return Y.join("")},_.formatDate=function(P){var V=P.getUTCFullYear(),Y=("0"+(P.getUTCMonth()+1)).slice(-2),b=("0"+P.getUTCDate()).slice(-2),O=("0"+P.getUTCHours()).slice(-2),G=("0"+P.getUTCMinutes()).slice(-2),y=("0"+P.getUTCSeconds()).slice(-2),te=("00"+P.getUTCMilliseconds()).slice(-3);return"".concat(V,"-").concat(Y,"-").concat(b,"T").concat(O,":").concat(G,":").concat(y,".").concat(te,"Z")},_.hasOwnProp=function(P,V){return Object.hasOwn(P,V)},_.setOptions=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};be=Object.assign(be,P)},_.getOptions=function(){return Object.assign({},be)};var be={};function Me(P){if(be.strictMode)throw P;be.silent||console.error(P.message)}},377:function(H,_,ee){function z(M,c){return function(d){if(Array.isArray(d))return d}(M)||function(d,T){var I=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(I!=null){var L,g,f,l,h=[],S=!0,U=!1;try{if(f=(I=I.call(d)).next,T===0){if(Object(I)!==I)return;S=!1}else for(;!(S=(L=f.call(I)).done)&&(h.push(L.value),h.length!==T);S=!0);}catch(F){U=!0,g=F}finally{try{if(!S&&I.return!=null&&(l=I.return(),Object(l)!==l))return}finally{if(U)throw g}}return h}}(M,c)||fe(M,c)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function de(M,c){var d=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!d){if(Array.isArray(M)||(d=fe(M))||c&&M&&typeof M.length=="number"){d&&(M=d);var T=0,I=function(){};return{s:I,n:function(){return T>=M.length?{done:!0}:{done:!1,value:M[T++]}},e:function(l){throw l},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L,g=!0,f=!1;return{s:function(){d=d.call(M)},n:function(){var l=d.next();return g=l.done,l},e:function(l){f=!0,L=l},f:function(){try{g||d.return==null||d.return()}finally{if(f)throw L}}}}function fe(M,c){if(M){if(typeof M=="string")return be(M,c);var d={}.toString.call(M).slice(8,-1);return d==="Object"&&M.constructor&&(d=M.constructor.name),d==="Map"||d==="Set"?Array.from(M):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?be(M,c):void 0}}function be(M,c){(c==null||c>M.length)&&(c=M.length);for(var d=0,T=Array(c);d<c;d++)T[d]=M[d];return T}var Me,P=this&&this.__createBinding||(Object.create?function(M,c,d,T){T===void 0&&(T=d);var I=Object.getOwnPropertyDescriptor(c,d);I&&!("get"in I?!c.__esModule:I.writable||I.configurable)||(I={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(M,T,I)}:function(M,c,d,T){T===void 0&&(T=d),M[T]=c[d]}),V=this&&this.__setModuleDefault||(Object.create?function(M,c){Object.defineProperty(M,"default",{enumerable:!0,value:c})}:function(M,c){M.default=c}),Y=this&&this.__importStar||(Me=function(M){return Me=Object.getOwnPropertyNames||function(c){var d=[];for(var T in c)Object.prototype.hasOwnProperty.call(c,T)&&(d[d.length]=T);return d},Me(M)},function(M){if(M&&M.__esModule)return M;var c={};if(M!=null)for(var d=Me(M),T=0;T<d.length;T++)d[T]!=="default"&&P(c,M,d[T]);return V(c,M),c});Object.defineProperty(_,"__esModule",{value:!0});var b=Y(ee(203)),O=ee(31);function G(M){return b.trim(M,'"')}function y(M){var c=b.splitAt(M,",");return{duration:b.toNumber(c[0]),title:decodeURIComponent(escape(c[1]))}}function te(M){var c=b.splitAt(M,"@");return{length:b.toNumber(c[0]),offset:c[1]?b.toNumber(c[1]):-1}}function oe(M){var c=b.splitAt(M,"x");return{width:b.toNumber(c[0]),height:b.toNumber(c[1])}}function Be(M){var c="ALLOWED-CPC: Each entry must consit of KEYFORMAT and Content Protection Configuration",d=M.split(",");d.length===0&&b.INVALIDPLAYLIST(c);var T,I=[],L=de(d);try{for(L.s();!(T=L.n()).done;){var g=T.value,f=z(b.splitAt(g,":"),2),l=f[0],h=f[1];l&&h?I.push({format:l,cpcList:h.split("/")}):b.INVALIDPLAYLIST(c)}}catch(S){L.e(S)}finally{L.f()}return I}function xe(M){return M.startsWith('"')?G(M):M.startsWith("0x")||M.startsWith("0X")?b.hexToByteSequence(M):b.toNumber(M)}function Je(M,c){c.IV&&M.compatibleVersion<2&&(M.compatibleVersion=2),(c.KEYFORMAT||c.KEYFORMATVERSIONS)&&M.compatibleVersion<5&&(M.compatibleVersion=5)}function Ae(M){var c,d,T,I={},L=de(b.splitByCommaWithPreservingQuotes(M));try{for(L.s();!(c=L.n()).done;){var g=c.value,f=z(b.splitAt(g,"="),2),l=f[0],h=f[1],S=G(h);switch(l){case"URI":I[l]=S;break;case"START-DATE":case"END-DATE":I[l]=new Date(S);break;case"IV":I[l]=(d=S,T=void 0,(T=b.hexToByteSequence(d)).length!==16&&b.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),T);break;case"BYTERANGE":I[l]=te(S);break;case"RESOLUTION":I[l]=oe(S);break;case"ALLOWED-CPC":I[l]=Be(S);break;case"END-ON-NEXT":case"DEFAULT":case"AUTOSELECT":case"FORCED":case"PRECISE":case"CAN-BLOCK-RELOAD":case"INDEPENDENT":case"GAP":I[l]=S==="YES";break;case"DURATION":case"PLANNED-DURATION":case"BANDWIDTH":case"AVERAGE-BANDWIDTH":case"FRAME-RATE":case"TIME-OFFSET":case"CAN-SKIP-UNTIL":case"HOLD-BACK":case"PART-HOLD-BACK":case"PART-TARGET":case"BYTERANGE-START":case"BYTERANGE-LENGTH":case"LAST-MSN":case"LAST-PART":case"SKIPPED-SEGMENTS":case"SCORE":case"PROGRAM-ID":I[l]=b.toNumber(S);break;default:l.startsWith("SCTE35-")?I[l]=b.hexToByteSequence(S):l.startsWith("X-")?I[l]=xe(h):(l==="VIDEO-RANGE"&&S!=="SDR"&&S!=="HLG"&&S!=="PQ"&&b.INVALIDPLAYLIST('VIDEO-RANGE: unknown value "'.concat(S,'"')),I[l]=S)}}}catch(U){L.e(U)}finally{L.f()}return I}function $e(){b.INVALIDPLAYLIST("The file contains both media and master playlist tags.")}function dn(M,c,d){var T,I=(T=c.attributes,new O.Rendition({type:T.TYPE,uri:T.URI,groupId:T["GROUP-ID"],language:T.LANGUAGE,assocLanguage:T["ASSOC-LANGUAGE"],name:T.NAME,isDefault:T.DEFAULT,autoselect:T.AUTOSELECT,forced:T.FORCED,instreamId:T["INSTREAM-ID"],characteristics:T.CHARACTERISTICS,channels:T.CHANNELS,pathwayId:T["PATHWAY-ID"]})),L=M[b.camelify(d)],g=function(f,l){var h,S=!1,U=de(f);try{for(U.s();!(h=U.n()).done;){var F=h.value;if(F.name===l.name)return"All EXT-X-MEDIA tags in the same Group MUST have different NAME attributes.";F.isDefault&&(S=!0)}}catch(k){U.e(k)}finally{U.f()}return S&&l.isDefault?"EXT-X-MEDIA A Group MUST NOT have more than one member with a DEFAULT attribute of YES.":""}(L,I);g&&b.INVALIDPLAYLIST(g),L.push(I),I.isDefault&&(M.currentRenditions[b.camelify(d)]=L.length-1)}function jt(M,c,d,T,I){var L,g=new O.Variant({uri:d,bandwidth:c.BANDWIDTH,averageBandwidth:c["AVERAGE-BANDWIDTH"],score:c.SCORE,codecs:c.CODECS,resolution:c.RESOLUTION,frameRate:c["FRAME-RATE"],hdcpLevel:c["HDCP-LEVEL"],allowedCpc:c["ALLOWED-CPC"],videoRange:c["VIDEO-RANGE"],stableVariantId:c["STABLE-VARIANT-ID"],pathwayId:c["STABLE-PATHWAY-ID"],programId:c["PROGRAM-ID"]}),f=de(M);try{for(f.s();!(L=f.n()).done;){var l=L.value;if(l.name==="EXT-X-MEDIA"){var h=l.attributes,S=h.TYPE;if(S&&h["GROUP-ID"]||b.INVALIDPLAYLIST("EXT-X-MEDIA TYPE attribute is REQUIRED."),c[S]===h["GROUP-ID"]&&(dn(g,l,S),S==="CLOSED-CAPTIONS")){var U,F=de(g.closedCaptions);try{for(F.s();!(U=F.n()).done;){var k=U.value.instreamId;if(k&&k.startsWith("SERVICE")&&I.compatibleVersion<7){I.compatibleVersion=7;break}}}catch(N){F.e(N)}finally{F.f()}}}}}catch(N){f.e(N)}finally{f.f()}return function(N,$,J){for(var q=function(){var ae=W[j];ae==="CLOSED-CAPTIONS"&&N[ae]==="NONE"?(J.isClosedCaptionsNone=!0,$.closedCaptions=[]):N[ae]&&!$[b.camelify(ae)].some(function(ue){return ue.groupId===N[ae]})&&b.INVALIDPLAYLIST("".concat(ae," attribute MUST match the value of the GROUP-ID attribute of an EXT-X-MEDIA tag whose TYPE attribute is ").concat(ae,"."))},j=0,W=["AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS"];j<W.length;j++)q()}(c,g,I),g.isIFrameOnly=T,g}function Jt(M,c,d,T,I,L,g){for(var f=new O.Segment({uri:c,mediaSequenceNumber:I,discontinuitySequence:L}),l=!1,h=!1,S=d;S<=T;S++){var U=wt(M[S]),F=U.name,k=U.value,N=U.attributes;if(F==="EXTINF")!Number.isInteger(k.duration)&&g.compatibleVersion<3&&(g.compatibleVersion=3),Math.round(k.duration)>g.targetDuration&&b.INVALIDPLAYLIST("EXTINF duration, when rounded to the nearest integer, MUST be less than or equal to the target duration"),f.duration=k.duration,f.title=k.title;else if(F==="EXT-X-BYTERANGE")g.compatibleVersion<4&&(g.compatibleVersion=4),f.byterange=k;else if(F==="EXT-X-DISCONTINUITY")f.parts.length>0&&b.INVALIDPLAYLIST("EXT-X-DISCONTINUITY must appear before the first EXT-X-PART tag of the Parent Segment."),f.discontinuity=!0;else if(F==="EXT-X-GAP")g.compatibleVersion<8&&(g.compatibleVersion=8),f.gap=!0;else if(F==="EXT-X-KEY")f.parts.length>0&&b.INVALIDPLAYLIST("EXT-X-KEY must appear before the first EXT-X-PART tag of the Parent Segment."),Je(g,N),f.key=new O.Key({method:N.METHOD,uri:N.URI,iv:N.IV,format:N.KEYFORMAT,formatVersion:N.KEYFORMATVERSIONS});else if(F==="EXT-X-MAP")f.parts.length>0&&b.INVALIDPLAYLIST("EXT-X-MAP must appear before the first EXT-X-PART tag of the Parent Segment."),g.compatibleVersion<5&&(g.compatibleVersion=5),g.hasMap=!0,f.map=new O.MediaInitializationSection({uri:N.URI,byterange:N.BYTERANGE});else if(F==="EXT-X-PROGRAM-DATE-TIME")f.programDateTime=k;else if(F==="EXT-X-DATERANGE"){for(var $={},J=0,q=Object.keys(N);J<q.length;J++){var j=q[J];(j.startsWith("SCTE35-")||j.startsWith("X-"))&&($[j]=N[j])}f.dateRange=new O.DateRange({id:N.ID,classId:N.CLASS,start:N["START-DATE"],cue:N.CUE,end:N["END-DATE"],duration:N.DURATION,plannedDuration:N["PLANNED-DURATION"],endOnNext:N["END-ON-NEXT"],attributes:$})}else if(F==="EXT-X-CUE-OUT")f.markers.push(new O.SpliceInfo({type:"OUT",duration:N&&N.DURATION||k}));else if(F==="EXT-X-CUE-IN")f.markers.push(new O.SpliceInfo({type:"IN"}));else if(F==="EXT-X-CUE-OUT-CONT"||F==="EXT-X-CUE"||F==="EXT-OATCLS-SCTE35"||F==="EXT-X-ASSET"||F==="EXT-X-SCTE35")f.markers.push(new O.SpliceInfo({type:"RAW",tagName:F,value:k}));else if(F!=="EXT-X-PRELOAD-HINT"||N.TYPE)if(F==="EXT-X-PRELOAD-HINT"&&N.TYPE==="PART"&&h)b.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist.");else if(F!=="EXT-X-PART"&&F!=="EXT-X-PRELOAD-HINT"||N.URI){if(F==="EXT-X-PRELOAD-HINT"&&N.TYPE==="MAP")l&&b.INVALIDPLAYLIST("Servers should not add more than one EXT-X-PRELOAD-HINT tag with the same TYPE attribute to a Playlist."),l=!0,g.hasMap=!0,f.map=new O.MediaInitializationSection({hint:!0,uri:N.URI,byterange:{length:N["BYTERANGE-LENGTH"],offset:N["BYTERANGE-START"]||0}});else if(F==="EXT-X-PART"||F==="EXT-X-PRELOAD-HINT"&&N.TYPE==="PART"){F!=="EXT-X-PART"||N.DURATION||b.INVALIDPLAYLIST("EXT-X-PART: DURATION attribute is mandatory"),F==="EXT-X-PRELOAD-HINT"&&(h=!0);var W=new O.PartialSegment({hint:F==="EXT-X-PRELOAD-HINT",uri:N.URI,byterange:F==="EXT-X-PART"?N.BYTERANGE:{length:N["BYTERANGE-LENGTH"],offset:N["BYTERANGE-START"]||0},duration:N.DURATION,independent:N.INDEPENDENT,gap:N.GAP});f.gap&&!W.gap&&b.INVALIDPLAYLIST("Partial segments must have GAP=YES if they are in a gap (EXT-X-GAP)"),f.parts.push(W)}}else b.INVALIDPLAYLIST("EXT-X-PART / EXT-X-PRELOAD-HINT: URI attribute is mandatory");else b.INVALIDPLAYLIST("EXT-X-PRELOAD-HINT: TYPE attribute is mandatory")}return f}function Pt(M,c,d,T,I,L,g){for(var f=new O.PrefetchSegment({uri:c,mediaSequenceNumber:I,discontinuitySequence:L}),l=d;l<=T;l++){var h=M[l],S=h.name,U=h.attributes;S==="EXTINF"?b.INVALIDPLAYLIST("A prefetch segment must not be advertised with an EXTINF tag."):S==="EXT-X-DISCONTINUITY"?b.INVALIDPLAYLIST("A prefetch segment must not be advertised with an EXT-X-DISCONTINUITY tag."):S==="EXT-X-PREFETCH-DISCONTINUITY"?f.discontinuity=!0:S==="EXT-X-KEY"?(Je(g,U),f.key=new O.Key({method:U.METHOD,uri:U.URI,iv:U.IV,format:U.KEYFORMAT,formatVersion:U.KEYFORMATVERSIONS})):S==="EXT-X-MAP"&&b.INVALIDPLAYLIST("Prefetch segments must not be advertised with an EXT-X-MAP tag.")}return f}function pn(M,c){var d,T=new O.MediaPlaylist,I=-1,L=0,g=!1,f=!1,l=0,h=null,S=null,U=!1,F=de(M.entries());try{for(F.s();!(d=F.n()).done;){var k=z(d.value,2),N=k[0],$=k[1],J=wt($),q=J.name,j=J.value,W=J.attributes;if(J.category!=="Segment"){if(q==="EXT-X-VERSION")T.version===void 0?T.version=j:b.INVALIDPLAYLIST("A Playlist file MUST NOT contain more than one EXT-X-VERSION tag.");else if(q==="EXT-X-TARGETDURATION")T.targetDuration=c.targetDuration=j;else if(q==="EXT-X-MEDIA-SEQUENCE")T.segments.length>0&&b.INVALIDPLAYLIST("The EXT-X-MEDIA-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),T.mediaSequenceBase=L=j;else if(q==="EXT-X-DISCONTINUITY-SEQUENCE")T.segments.length>0&&b.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before the first Media Segment in the Playlist."),g&&b.INVALIDPLAYLIST("The EXT-X-DISCONTINUITY-SEQUENCE tag MUST appear before any EXT-X-DISCONTINUITY tag."),T.discontinuitySequenceBase=l=j;else if(q==="EXT-X-ENDLIST")T.endlist=!0;else if(q==="EXT-X-PLAYLIST-TYPE")T.playlistType=j;else if(q==="EXT-X-I-FRAMES-ONLY")c.compatibleVersion<4&&(c.compatibleVersion=4),T.isIFrame=!0;else if(q==="EXT-X-INDEPENDENT-SEGMENTS")T.independentSegments&&b.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),T.independentSegments=!0;else if(q==="EXT-X-START")T.start&&b.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),typeof W["TIME-OFFSET"]!="number"&&b.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),T.start={offset:W["TIME-OFFSET"],precise:W.PRECISE||!1};else if(q==="EXT-X-SERVER-CONTROL")W["CAN-BLOCK-RELOAD"]||b.INVALIDPLAYLIST("EXT-X-SERVER-CONTROL: CAN-BLOCK-RELOAD=YES is mandatory for Low-Latency HLS"),T.lowLatencyCompatibility={canBlockReload:W["CAN-BLOCK-RELOAD"],canSkipUntil:W["CAN-SKIP-UNTIL"],holdBack:W["HOLD-BACK"],partHoldBack:W["PART-HOLD-BACK"]};else if(q==="EXT-X-PART-INF")W["PART-TARGET"]||b.INVALIDPLAYLIST("EXT-X-PART-INF: PART-TARGET attribute is mandatory"),T.partTargetDuration=W["PART-TARGET"];else if(q==="EXT-X-RENDITION-REPORT")W.URI||b.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI attribute is mandatory"),W.URI.search(/^[a-z]+:/)===0&&b.INVALIDPLAYLIST("EXT-X-RENDITION-REPORT: URI must be relative to the playlist uri"),T.renditionReports.push(new O.RenditionReport({uri:W.URI,lastMSN:W["LAST-MSN"],lastPart:W["LAST-PART"]}));else if(q==="EXT-X-SKIP")W["SKIPPED-SEGMENTS"]||b.INVALIDPLAYLIST("EXT-X-SKIP: SKIPPED-SEGMENTS attribute is mandatory"),c.compatibleVersion<9&&(c.compatibleVersion=9),T.skip=W["SKIPPED-SEGMENTS"],L+=T.skip;else if(q==="EXT-X-PREFETCH"){var ae=Pt(M,j,I===-1?N:I,N-1,L++,l,c);ae&&(ae.discontinuity&&(ae.discontinuitySequence++,l=ae.discontinuitySequence),ae.key?h=ae.key:ae.key=h,T.prefetchSegments.push(ae)),f=!0,I=-1}else if(typeof $=="string"){I===-1&&b.INVALIDPLAYLIST("A URI line is not preceded by any segment tags"),T.targetDuration||b.INVALIDPLAYLIST("The EXT-X-TARGETDURATION tag is REQUIRED"),f&&b.INVALIDPLAYLIST("These segments must appear after all complete segments.");var ue=Jt(M,$,I,N-1,L++,l,c);if(ue){var Oe=z(Bt(T,ue,l,h,S),3);l=Oe[0],h=Oe[1],S=Oe[2],!U&&ue.parts.length>0&&(U=!0)}I=-1}}else I===-1&&(I=N),q==="EXT-X-DISCONTINUITY"&&(g=!0)}}catch(De){F.e(De)}finally{F.f()}if(I!==-1){var ve=Jt(M,"",I,M.length-1,L++,l,c);if(ve){var Ue,Ne=ve.parts;!(Ne.length>0)||T.endlist||(Ue=Ne.at(-1))!==null&&Ue!==void 0&&Ue.hint||b.INVALIDPLAYLIST("If the Playlist contains EXT-X-PART tags and does not contain an EXT-X-ENDLIST tag, the Playlist must contain an EXT-X-PRELOAD-HINT tag with a TYPE=PART attribute"),Bt(T,ve,h,S),!U&&ve.parts.length>0&&(U=!0)}}return function(De){for(var ye=new Map,Ie=new Map,Pe=!1,Qe=!1,qe=De.length-1;qe>=0;qe--){var Ct=De[qe],gn=Ct.programDateTime,we=Ct.dateRange;if(gn&&(Qe=!0),we&&we.start){Pe=!0,we.endOnNext&&(we.end||we.duration)&&b.INVALIDPLAYLIST("An EXT-X-DATERANGE tag with an END-ON-NEXT=YES attribute MUST NOT contain DURATION or END-DATE attributes.");var ct=we.start.getTime(),en=we.duration||0;we.end&&we.duration&&ct+1e3*en!==we.end.getTime()&&b.INVALIDPLAYLIST("END-DATE MUST be equal to the value of the START-DATE attribute plus the value of the DURATION"),we.endOnNext&&(we.end=ye.get(we.classId)),ye.set(we.classId,we.start);var Et=we.end?we.end.getTime():we.start.getTime()+1e3*(we.duration||0),tn=Ie.get(we.classId);if(tn){var Nn,Xt=de(tn);try{for(Xt.s();!(Nn=Xt.n()).done;){var Mt=Nn.value;(Mt.start<=ct&&Mt.end>ct||Mt.start>=ct&&Mt.start<Et)&&b.INVALIDPLAYLIST("DATERANGE tags with the same CLASS should not overlap")}}catch(Yt){Xt.e(Yt)}finally{Xt.f()}tn.push({start:ct,end:Et})}else we.classId&&Ie.set(we.classId,[{start:ct,end:Et}])}}Pe&&!Qe&&b.INVALIDPLAYLIST("If a Playlist contains an EXT-X-DATERANGE tag, it MUST also contain at least one EXT-X-PROGRAM-DATE-TIME tag.")}(T.segments),T.lowLatencyCompatibility&&function(De,ye){var Ie=De.lowLatencyCompatibility,Pe=De.targetDuration,Qe=De.partTargetDuration,qe=De.segments,Ct=De.renditionReports,gn=Ie.canSkipUntil,we=Ie.holdBack,ct=Ie.partHoldBack;if(gn<6*Pe&&b.INVALIDPLAYLIST("The Skip Boundary must be at least six times the EXT-X-TARGETDURATION."),we<3*Pe&&b.INVALIDPLAYLIST("HOLD-BACK must be at least three times the EXT-X-TARGETDURATION."),ye){Qe===void 0&&b.INVALIDPLAYLIST("EXT-X-PART-INF is required if a Playlist contains one or more EXT-X-PART tags"),ct===void 0&&b.INVALIDPLAYLIST("EXT-X-PART: PART-HOLD-BACK attribute is mandatory"),ct<Qe&&b.INVALIDPLAYLIST("PART-HOLD-BACK must be at least PART-TARGET");var en,Et=de(qe.entries());try{for(Et.s();!(en=Et.n()).done;){var tn=z(en.value,2),Nn=tn[0],Xt=tn[1].parts;Xt.length>0&&Nn<qe.length-3&&b.INVALIDPLAYLIST("Remove EXT-X-PART tags from the Playlist after they are greater than three target durations from the end of the Playlist.");var Mt,Yt=de(Xt.entries());try{for(Yt.s();!(Mt=Yt.n()).done;){var hr=z(Mt.value,2),ci=hr[0],qn=hr[1].duration;qn!==void 0&&(qn>Qe&&b.INVALIDPLAYLIST("PART-TARGET is the maximum duration of any Partial Segment"),ci<Xt.length-1&&qn<.85*Qe&&b.INVALIDPLAYLIST("All Partial Segments except the last part of a segment must have a duration of at least 85% of PART-TARGET"))}}catch(Ht){Yt.e(Ht)}finally{Yt.f()}}}catch(Ht){Et.e(Ht)}finally{Et.f()}}var dr,vn=de(Ct);try{for(vn.s();!(dr=vn.n()).done;){var pr,Tn=dr.value,Kn=qe.at(-1);(pr=Tn.lastMSN)!==null&&pr!==void 0||(Tn.lastMSN=Kn.mediaSequenceNumber),(Tn.lastPart===null||Tn.lastPart===void 0)&&Kn.parts.length>0&&(Tn.lastPart=Kn.parts.length-1)}}catch(Ht){vn.e(Ht)}finally{vn.f()}}(T,U),T}function Bt(M,c,d,T,I){var L=c.discontinuity,g=c.key,f=c.map,l=c.byterange,h=c.uri;if(L&&(c.discontinuitySequence=d+1),g||(c.key=T),f||(c.map=I),l&&l.offset===-1){var S=M.segments;if(S.length>0){var U=S.at(-1);U.byterange&&U.uri===h?l.offset=U.byterange.offset+U.byterange.length:b.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST be a sub-range of the same media resource")}else b.INVALIDPLAYLIST("If offset of EXT-X-BYTERANGE is not present, a previous Media Segment MUST appear in the Playlist file")}return M.segments.push(c),[c.discontinuitySequence,c.key,c.map]}function ft(M,c){var d=function(h){var S=h.indexOf(":");return S===-1?[h.slice(1).trim(),null]:[h.slice(1,S).trim(),h.slice(S+1).trim()]}(M),T=z(d,2),I=T[0],L=T[1],g=function(h){switch(h){case"EXTM3U":case"EXT-X-VERSION":case"EXT-X-CONTENT-STEERING":return"Basic";case"EXTINF":case"EXT-X-BYTERANGE":case"EXT-X-DISCONTINUITY":case"EXT-X-PREFETCH-DISCONTINUITY":case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-PROGRAM-DATE-TIME":case"EXT-X-DATERANGE":case"EXT-X-CUE-OUT":case"EXT-X-CUE-IN":case"EXT-X-CUE-OUT-CONT":case"EXT-X-CUE":case"EXT-OATCLS-SCTE35":case"EXT-X-ASSET":case"EXT-X-SCTE35":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-GAP":return"Segment";case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":case"EXT-X-ENDLIST":case"EXT-X-PLAYLIST-TYPE":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PREFETCH":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return"MediaPlaylist";case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":return"MasterPlaylist";case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-START":return"MediaorMasterPlaylist";default:return"Unknown"}}(I);if(function(h,S){if(h==="Segment"||h==="MediaPlaylist")return S.isMasterPlaylist===void 0?void(S.isMasterPlaylist=!1):void(S.isMasterPlaylist&&$e());if(h==="MasterPlaylist"){if(S.isMasterPlaylist===void 0)return void(S.isMasterPlaylist=!0);S.isMasterPlaylist===!1&&$e()}}(g,c),g==="Unknown")return null;g==="MediaPlaylist"&&I!=="EXT-X-RENDITION-REPORT"&&I!=="EXT-X-PREFETCH"&&(c.hash[I]&&b.INVALIDPLAYLIST("There MUST NOT be more than one Media Playlist tag of each type in any Media Playlist"),c.hash[I]=!0);var f=function(h,S){switch(h){case"EXTM3U":case"EXT-X-DISCONTINUITY":case"EXT-X-ENDLIST":case"EXT-X-I-FRAMES-ONLY":case"EXT-X-INDEPENDENT-SEGMENTS":case"EXT-X-CUE-IN":case"EXT-X-GAP":return[null,null];case"EXT-X-VERSION":case"EXT-X-TARGETDURATION":case"EXT-X-MEDIA-SEQUENCE":case"EXT-X-DISCONTINUITY-SEQUENCE":return[b.toNumber(S),null];case"EXT-X-CUE-OUT":return Number.isNaN(Number(S))?[null,Ae(S)]:[b.toNumber(S),null];case"EXT-X-KEY":case"EXT-X-MAP":case"EXT-X-DATERANGE":case"EXT-X-MEDIA":case"EXT-X-STREAM-INF":case"EXT-X-I-FRAME-STREAM-INF":case"EXT-X-SESSION-DATA":case"EXT-X-SESSION-KEY":case"EXT-X-START":case"EXT-X-SERVER-CONTROL":case"EXT-X-PART-INF":case"EXT-X-PART":case"EXT-X-PRELOAD-HINT":case"EXT-X-RENDITION-REPORT":case"EXT-X-SKIP":return[null,Ae(S)];case"EXTINF":return[y(S),null];case"EXT-X-BYTERANGE":return[te(S),null];case"EXT-X-PROGRAM-DATE-TIME":return[new Date(S),null];default:return[S,null]}}(I,L),l=z(f,2);return{name:I,category:g,value:l[0],attributes:l[1]}}function Ve(M,c){var d;return c.isMasterPlaylist?d=function(T,I){var L,g=new O.MasterPlaylist,f=!1,l=de(T.entries());try{var h=function(){var N=z(L.value,2),$=N[0],J=wt(N[1]),q=J.name,j=J.value,W=J.attributes;if(q==="EXT-X-VERSION")g.version=j;else if(q==="EXT-X-CONTENT-STEERING-SERVER"){var ae=new O.ContentSteering({serverUri:W["SERVER-URI"],pathwayId:W["PATHWAY-ID"]});g.contentSteering=ae}else if(q==="EXT-X-STREAM-INF"){var ue=T[$+1];(typeof ue!="string"||ue.startsWith("#EXT"))&&b.INVALIDPLAYLIST("EXT-X-STREAM-INF must be followed by a URI line");var Oe=jt(T,W,ue,!1,I);Oe&&(typeof Oe.score=="number"&&(f=!0,Oe.score<0&&b.INVALIDPLAYLIST("SCORE attribute on EXT-X-STREAM-INF must be positive decimal-floating-point number.")),g.variants.push(Oe))}else if(q==="EXT-X-I-FRAME-STREAM-INF"){var ve=jt(T,W,W.URI,!0,I);ve&&g.variants.push(ve)}else if(q==="EXT-X-SESSION-DATA"){var Ue=new O.SessionData({id:W["DATA-ID"],value:W.VALUE,uri:W.URI,language:W.LANGUAGE});g.sessionDataList.some(function(De){return De.id===Ue.id&&De.language===Ue.language})&&b.INVALIDPLAYLIST("A Playlist MUST NOT contain more than one EXT-X-SESSION-DATA tag with the same DATA-ID attribute and the same LANGUAGE attribute."),g.sessionDataList.push(Ue)}else if(q==="EXT-X-SESSION-KEY"){W.METHOD==="NONE"&&b.INVALIDPLAYLIST("EXT-X-SESSION-KEY: The value of the METHOD attribute MUST NOT be NONE");var Ne=new O.Key({method:W.METHOD,uri:W.URI,iv:W.IV,format:W.KEYFORMAT,formatVersion:W.KEYFORMATVERSIONS});g.sessionKeyList.some(function(De){return function(ye,Ie){if(ye.method!==Ie.method||ye.uri!==Ie.uri)return!1;if(ye.iv){if(!Ie.iv||ye.iv.byteLength!==Ie.iv.byteLength)return!1;for(var Pe=0;Pe<ye.iv.byteLength;Pe++)if(ye.iv[Pe]!==Ie.iv[Pe])return!1}else if(Ie.iv)return!1;return ye.format===Ie.format&&ye.formatVersion===Ie.formatVersion}(De,Ne)})&&b.INVALIDPLAYLIST("A Master Playlist MUST NOT contain more than one EXT-X-SESSION-KEY tag with the same METHOD, URI, IV, KEYFORMAT, and KEYFORMATVERSIONS attribute values."),Je(I,W),g.sessionKeyList.push(Ne)}else q==="EXT-X-INDEPENDENT-SEGMENTS"?(g.independentSegments&&b.INVALIDPLAYLIST("EXT-X-INDEPENDENT-SEGMENTS tag MUST NOT appear more than once in a Playlist"),g.independentSegments=!0):q==="EXT-X-START"&&(g.start&&b.INVALIDPLAYLIST("EXT-X-START tag MUST NOT appear more than once in a Playlist"),typeof W["TIME-OFFSET"]!="number"&&b.INVALIDPLAYLIST("EXT-X-START: TIME-OFFSET attribute is REQUIRED"),g.start={offset:W["TIME-OFFSET"],precise:W.PRECISE||!1})};for(l.s();!(L=l.n()).done;)h()}catch(N){l.e(N)}finally{l.f()}if(f){var S,U=de(g.variants);try{for(U.s();!(S=U.n()).done;)typeof S.value.score!="number"&&b.INVALIDPLAYLIST("If any Variant Stream contains the SCORE attribute, then all Variant Streams in the Master Playlist SHOULD have a SCORE attribute")}catch(N){U.e(N)}finally{U.f()}}if(I.isClosedCaptionsNone){var F,k=de(g.variants);try{for(k.s();!(F=k.n()).done;)F.value.closedCaptions.length>0&&b.INVALIDPLAYLIST("If there is a variant with CLOSED-CAPTIONS attribute of NONE, all EXT-X-STREAM-INF tags MUST have this attribute with a value of NONE")}catch(N){k.e(N)}finally{k.f()}}return g}(M,c):!(d=pn(M,c)).isIFrame&&c.hasMap&&c.compatibleVersion<6&&(c.compatibleVersion=6),c.compatibleVersion>1&&(!d.version||d.version<c.compatibleVersion)&&b.INVALIDPLAYLIST("EXT-X-VERSION needs to be ".concat(c.compatibleVersion," or higher.")),d}function wt(M){return typeof M=="string"?{}:M}_.default=function(M){var c={version:void 0,isMasterPlaylist:void 0,hasMap:!1,targetDuration:0,compatibleVersion:1,isClosedCaptionsNone:!1,hash:{}},d=Ve(function(T,I){var L,g=[],f=de(T.split(`
`));try{for(f.s();!(L=f.n()).done;){var l=L.value.trim();if(l)if(l.startsWith("#")){if(l.startsWith("#EXT")){var h=ft(l,I);h&&g.push(h)}}else g.push(l)}}catch(S){f.e(S)}finally{f.f()}return g.length!==0&&g[0].name==="EXTM3U"||b.INVALIDPLAYLIST("The EXTM3U tag MUST be the first line."),g}(M,c),c);return d.source=M,d}},887:function(H,_,ee){function z(c){return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},z(c)}function de(c,d){return function(T){if(Array.isArray(T))return T}(c)||function(T,I){var L=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(L!=null){var g,f,l,h,S=[],U=!0,F=!1;try{if(l=(L=L.call(T)).next,I===0){if(Object(L)!==L)return;U=!1}else for(;!(U=(g=l.call(L)).done)&&(S.push(g.value),S.length!==I);U=!0);}catch(k){F=!0,f=k}finally{try{if(!U&&L.return!=null&&(h=L.return(),Object(h)!==h))return}finally{if(F)throw f}}return S}}(c,d)||be(c,d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fe(c,d){var T=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!T){if(Array.isArray(c)||(T=be(c))||d&&c&&typeof c.length=="number"){T&&(c=T);var I=0,L=function(){};return{s:L,n:function(){return I>=c.length?{done:!0}:{done:!1,value:c[I++]}},e:function(h){throw h},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,f=!0,l=!1;return{s:function(){T=T.call(c)},n:function(){var h=T.next();return f=h.done,h},e:function(h){l=!0,g=h},f:function(){try{f||T.return==null||T.return()}finally{if(l)throw g}}}}function be(c,d){if(c){if(typeof c=="string")return Me(c,d);var T={}.toString.call(c).slice(8,-1);return T==="Object"&&c.constructor&&(T=c.constructor.name),T==="Map"||T==="Set"?Array.from(c):T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?Me(c,d):void 0}}function Me(c,d){(d==null||d>c.length)&&(d=c.length);for(var T=0,I=Array(d);T<d;T++)I[T]=c[T];return I}function P(c,d){for(var T=0;T<d.length;T++){var I=d[T];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(c,oe(I.key),I)}}function V(c,d,T){return d=te(d),function(I,L){if(L&&(z(L)=="object"||typeof L=="function"))return L;if(L!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(I)}(c,G()?Reflect.construct(d,T||[],te(c).constructor):d.apply(c,T))}function Y(c,d,T,I){var L=b(te(1&I?c.prototype:c),d,T);return 2&I&&typeof L=="function"?function(g){return L.apply(T,g)}:L}function b(){return b=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(c,d,T){var I=function(g,f){for(;!{}.hasOwnProperty.call(g,f)&&(g=te(g))!==null;);return g}(c,d);if(I){var L=Object.getOwnPropertyDescriptor(I,d);return L.get?L.get.call(arguments.length<3?c:T):L.value}},b.apply(null,arguments)}function O(c){var d=typeof Map=="function"?new Map:void 0;return O=function(T){if(T===null||!function(L){try{return Function.toString.call(L).indexOf("[native code]")!==-1}catch{return typeof L=="function"}}(T))return T;if(typeof T!="function")throw new TypeError("Super expression must either be null or a function");if(d!==void 0){if(d.has(T))return d.get(T);d.set(T,I)}function I(){return function(L,g,f){if(G())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,g);var h=new(L.bind.apply(L,l));return f&&y(h,f.prototype),h}(T,arguments,te(this).constructor)}return I.prototype=Object.create(T.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),y(I,T)},O(c)}function G(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G=function(){return!!c})()}function y(c,d){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,I){return T.__proto__=I,T},y(c,d)}function te(c){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},te(c)}function oe(c){var d=function(T,I){if(z(T)!="object"||!T)return T;var L=T[Symbol.toPrimitive];if(L!==void 0){var g=L.call(T,I||"default");if(z(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(T)}(c,"string");return z(d)=="symbol"?d:d+""}var Be,xe=this&&this.__createBinding||(Object.create?function(c,d,T,I){I===void 0&&(I=T);var L=Object.getOwnPropertyDescriptor(d,T);L&&!("get"in L?!d.__esModule:L.writable||L.configurable)||(L={enumerable:!0,get:function(){return d[T]}}),Object.defineProperty(c,I,L)}:function(c,d,T,I){I===void 0&&(I=T),c[I]=d[T]}),Je=this&&this.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),Ae=this&&this.__importStar||(Be=function(c){return Be=Object.getOwnPropertyNames||function(d){var T=[];for(var I in d)Object.prototype.hasOwnProperty.call(d,I)&&(T[T.length]=I);return T},Be(c)},function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var T=Be(c),I=0;I<T.length;I++)T[I]!=="default"&&xe(d,c,T[I]);return Je(d,c),d});Object.defineProperty(_,"__esModule",{value:!0});var $e=Ae(ee(203)),dn=["#EXTINF","#EXT-X-BYTERANGE","#EXT-X-DISCONTINUITY","#EXT-X-STREAM-INF","#EXT-X-CUE-OUT","#EXT-X-CUE-IN","#EXT-X-KEY","#EXT-X-MAP"],jt=["#EXT-X-MEDIA"],Jt=function(c){function d(g){var f,l,h,S;return function(U,F){if(!(U instanceof F))throw new TypeError("Cannot call a class as a function")}(this,d),f=V(this,d),l=f,S=void 0,(h=oe(h="baseUri"))in l?Object.defineProperty(l,h,{value:S,enumerable:!0,configurable:!0,writable:!0}):l[h]=S,f.baseUri=g,f}return function(g,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(f&&f.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),f&&y(g,f)}(d,c),T=d,I=[{key:"push",value:function(){for(var g=this,f=arguments.length,l=new Array(f),h=0;h<f;h++)l[h]=arguments[h];for(var S=function(){var k=F[U];if(!k.startsWith("#"))return Y(d,"push",g,3)([k]),0;if(dn.some(function(N){return k.startsWith(N)}))return Y(d,"push",g,3)([k]),0;if(g.includes(k)){if(jt.some(function(N){return k.startsWith(N)}))return 0;$e.INVALIDPLAYLIST("Redundant item (".concat(k,")"))}Y(d,"push",g,3)([k])},U=0,F=l;U<F.length;U++)S();return this.length}},{key:"join",value:function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:",",f=this.length-1;f>=0;f--)this[f]||this.splice(f,1);return Y(d,"join",this,3)([g])}}],I&&P(T.prototype,I),L&&P(T,L),Object.defineProperty(T,"prototype",{writable:!1}),T;var T,I,L}(O(Array));function Pt(c,d){var T=1e3;d&&(T=Math.pow(10,d));var I=Math.round(c*T)/T;return d?I.toFixed(d):I}function pn(c){var d=['DATA-ID="'.concat(c.id,'"')];return c.language&&d.push('LANGUAGE="'.concat(c.language,'"')),c.value?d.push('VALUE="'.concat(c.value,'"')):c.uri&&d.push('URI="'.concat(c.uri,'"')),"#EXT-X-SESSION-DATA:".concat(d.join(","))}function Bt(c,d){var T=d?"#EXT-X-SESSION-KEY":"#EXT-X-KEY",I=["METHOD=".concat(c.method)];return c.uri&&I.push('URI="'.concat(c.uri,'"')),c.iv&&(c.iv.byteLength!==16&&$e.INVALIDPLAYLIST("IV must be a 128-bit unsigned integer"),I.push("IV=".concat($e.byteSequenceToHex(c.iv)))),c.format&&I.push('KEYFORMAT="'.concat(c.format,'"')),c.formatVersion&&I.push('KEYFORMATVERSIONS="'.concat(c.formatVersion,'"')),"".concat(T,":").concat(I.join(","))}function ft(c,d){var T=d.isIFrameOnly?"#EXT-X-I-FRAME-STREAM-INF":"#EXT-X-STREAM-INF",I=["BANDWIDTH=".concat(d.bandwidth)];if(d.averageBandwidth&&I.push("AVERAGE-BANDWIDTH=".concat(d.averageBandwidth)),d.isIFrameOnly&&I.push('URI="'.concat(d.uri,'"')),d.codecs&&I.push('CODECS="'.concat(d.codecs,'"')),d.resolution&&I.push("RESOLUTION=".concat(d.resolution.width,"x").concat(d.resolution.height)),d.frameRate&&I.push("FRAME-RATE=".concat(Pt(d.frameRate,3))),d.hdcpLevel&&I.push("HDCP-LEVEL=".concat(d.hdcpLevel)),d.audio.length>0){I.push('AUDIO="'.concat(d.audio[0].groupId,'"'));var L,g=fe(d.audio);try{for(g.s();!(L=g.n()).done;){var f=L.value;c.push(Ve(f))}}catch(ve){g.e(ve)}finally{g.f()}}if(d.video.length>0){I.push('VIDEO="'.concat(d.video[0].groupId,'"'));var l,h=fe(d.video);try{for(h.s();!(l=h.n()).done;){var S=l.value;c.push(Ve(S))}}catch(ve){h.e(ve)}finally{h.f()}}if(d.subtitles.length>0){I.push('SUBTITLES="'.concat(d.subtitles[0].groupId,'"'));var U,F=fe(d.subtitles);try{for(F.s();!(U=F.n()).done;){var k=U.value;c.push(Ve(k))}}catch(ve){F.e(ve)}finally{F.f()}}if($e.getOptions().allowClosedCaptionsNone&&d.closedCaptions.length===0)I.push("CLOSED-CAPTIONS=NONE");else if(d.closedCaptions.length>0){I.push('CLOSED-CAPTIONS="'.concat(d.closedCaptions[0].groupId,'"'));var N,$=fe(d.closedCaptions);try{for($.s();!(N=$.n()).done;){var J=N.value;c.push(Ve(J))}}catch(ve){$.e(ve)}finally{$.f()}}if(d.score&&I.push("SCORE=".concat(d.score)),d.allowedCpc){var q,j=[],W=fe(d.allowedCpc);try{for(W.s();!(q=W.n()).done;){var ae=q.value,ue=ae.format,Oe=ae.cpcList;j.push("".concat(ue,":").concat(Oe.join("/")))}}catch(ve){W.e(ve)}finally{W.f()}I.push('ALLOWED-CPC="'.concat(j.join(","),'"'))}d.videoRange&&I.push("VIDEO-RANGE=".concat(d.videoRange)),d.stableVariantId&&I.push('STABLE-VARIANT-ID="'.concat(d.stableVariantId,'"')),d.pathwayId&&I.push('PATHWAY-ID="'.concat(d.pathwayId,'"')),d.programId&&I.push("PROGRAM-ID=".concat(d.programId)),c.push("".concat(T,":").concat(I.join(","))),d.isIFrameOnly||c.push("".concat(d.uri))}function Ve(c){var d=["TYPE=".concat(c.type),'GROUP-ID="'.concat(c.groupId,'"'),'NAME="'.concat(c.name,'"')];return c.isDefault!==void 0&&d.push("DEFAULT=".concat(c.isDefault?"YES":"NO")),c.autoselect!==void 0&&d.push("AUTOSELECT=".concat(c.autoselect?"YES":"NO")),c.forced!==void 0&&d.push("FORCED=".concat(c.forced?"YES":"NO")),c.language&&d.push('LANGUAGE="'.concat(c.language,'"')),c.assocLanguage&&d.push('ASSOC-LANGUAGE="'.concat(c.assocLanguage,'"')),c.instreamId&&d.push('INSTREAM-ID="'.concat(c.instreamId,'"')),c.characteristics&&d.push('CHARACTERISTICS="'.concat(c.characteristics,'"')),c.channels&&d.push('CHANNELS="'.concat(c.channels,'"')),c.uri&&d.push('URI="'.concat(c.uri,'"')),"#EXT-X-MEDIA:".concat(d.join(","))}function wt(c,d,T,I){var L,g,f,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,h=!1,S="";if(d.discontinuity&&c.push("#EXT-X-DISCONTINUITY"),d.gap&&c.push("#EXT-X-GAP"),d.key){var U=Bt(d.key);U!==T&&(c.push(U),T=U)}if(d.map){var F=function(N){var $=['URI="'.concat(N.uri,'"')];return N.byterange&&$.push('BYTERANGE="'.concat(M(N.byterange),'"')),"#EXT-X-MAP:".concat($.join(","))}(d.map);F!==I&&(c.push(F),I=F)}if(d.programDateTime&&c.push("#EXT-X-PROGRAM-DATE-TIME:".concat($e.formatDate(d.programDateTime))),d.dateRange&&c.push(function(N){var $=['ID="'.concat(N.id,'"')];N.start&&$.push('START-DATE="'.concat($e.formatDate(N.start),'"')),N.cue&&$.push('CUE="'.concat(N.cue,'"')),N.end&&$.push('END-DATE="'.concat($e.formatDate(N.end),'"')),N.duration&&$.push("DURATION=".concat(N.duration)),N.plannedDuration&&$.push("PLANNED-DURATION=".concat(N.plannedDuration)),N.classId&&$.push('CLASS="'.concat(N.classId,'"')),N.endOnNext&&$.push("END-ON-NEXT=YES");for(var J=0,q=Object.keys(N.attributes);J<q.length;J++){var j=q[J];j.startsWith("X-")?typeof N.attributes[j]=="number"?$.push("".concat(j,"=").concat(N.attributes[j])):$.push("".concat(j,'="').concat(N.attributes[j],'"')):j.startsWith("SCTE35-")&&$.push("".concat(j,"=").concat($e.byteSequenceToHex(N.attributes[j])))}return"#EXT-X-DATERANGE:".concat($.join(","))}(d.dateRange)),d.markers.length>0&&(S=function(N,$){var J,q="",j=fe($);try{for(j.s();!(J=j.n()).done;){var W=J.value;if(W.type==="OUT")q="OUT",N.push("#EXT-X-CUE-OUT:DURATION=".concat(W.duration));else if(W.type==="IN")q="IN",N.push("#EXT-X-CUE-IN");else if(W.type==="RAW"){var ae=W.value?":".concat(W.value):"";N.push("#".concat(W.tagName).concat(ae))}}}catch(ue){j.e(ue)}finally{j.f()}return q}(c,d.markers)),d.parts.length>0&&(h=function(N,$){var J,q=!1,j=fe($);try{for(j.s();!(J=j.n()).done;){var W=J.value;if(W.hint){var ae=[];if(ae.push("TYPE=PART",'URI="'.concat(W.uri,'"')),W.byterange){var ue=W.byterange,Oe=ue.offset,ve=ue.length;ae.push("BYTERANGE-START=".concat(Oe)),ve&&ae.push("BYTERANGE-LENGTH=".concat(ve))}N.push("#EXT-X-PRELOAD-HINT:".concat(ae.join(","))),q=!0}else{var Ue=[];Ue.push("DURATION=".concat(W.duration),'URI="'.concat(W.uri,'"')),W.byterange&&Ue.push("BYTERANGE=".concat(M(W.byterange))),W.independent&&Ue.push("INDEPENDENT=YES"),W.gap&&Ue.push("GAP=YES"),N.push("#EXT-X-PART:".concat(Ue.join(",")))}}}catch(Ne){j.e(Ne)}finally{j.f()}return q}(c,d.parts)),h)return[T,I];if(typeof d.duration=="number"&&!Number.isNaN(d.duration)){var k=l<3?Math.round(d.duration):Pt(d.duration,(L=d.duration,g=L.toString(10),(f=g.indexOf("."))===-1?0:g.length-f-1));c.push("#EXTINF:".concat(k,",").concat(unescape(encodeURIComponent(d.title||""))))}return d.byterange&&c.push("#EXT-X-BYTERANGE:".concat(M(d.byterange))),Array.prototype.push.call(c,"".concat(d.uri)),[T,I,S]}function M(c){var d=c.offset,T=c.length;return"".concat(T,"@").concat(d)}_.default=function(c,d){$e.PARAMCHECK(c),$e.ASSERT("Not a playlist",c.type==="playlist");var T=new Jt(c.uri);return T.push("#EXTM3U"),c.version&&T.push("#EXT-X-VERSION:".concat(c.version)),c.independentSegments&&T.push("#EXT-X-INDEPENDENT-SEGMENTS"),c.start&&T.push("#EXT-X-START:TIME-OFFSET=".concat(Pt(c.start.offset)).concat(c.start.precise?",PRECISE=YES":"")),c.isMasterPlaylist?function(I,L,g){var f,l;L.contentSteering&&I.push((f=L.contentSteering,l=['SERVER-URI="'.concat(f.serverUri,'"'),'PATHWAY-ID="'.concat(f.pathwayId,'"')],"#EXT-X-CONTENT-STEERING:".concat(l.join(","))));var h,S=fe(L.sessionDataList);try{for(S.s();!(h=S.n()).done;){var U=h.value;I.push(pn(U))}}catch(ue){S.e(ue)}finally{S.f()}var F,k=fe(L.sessionKeyList);try{for(k.s();!(F=k.n()).done;){var N=F.value;I.push(Bt(N,!0))}}catch(ue){k.e(ue)}finally{k.f()}var $,J=fe(L.variants.entries());try{for(J.s();!($=J.n()).done;){var q=de($.value,2),j=q[0],W=q[1],ae=I.length;ft(I,W),g!=null&&g.variantProcessor&&g.variantProcessor(I,ae,I.length-1,W,j)}}catch(ue){J.e(ue)}finally{J.f()}}(T,c,d):function(I,L,g){var f="",l="",h=!1;if(L.targetDuration&&I.push("#EXT-X-TARGETDURATION:".concat(L.targetDuration)),L.lowLatencyCompatibility){var S=L.lowLatencyCompatibility,U=S.canBlockReload,F=S.canSkipUntil,k=S.holdBack,N=S.partHoldBack,$=[];$.push("CAN-BLOCK-RELOAD=".concat(U?"YES":"NO")),F!==void 0&&$.push("CAN-SKIP-UNTIL=".concat(F)),k!==void 0&&$.push("HOLD-BACK=".concat(k)),N!==void 0&&$.push("PART-HOLD-BACK=".concat(N)),I.push("#EXT-X-SERVER-CONTROL:".concat($.join(",")))}L.partTargetDuration&&I.push("#EXT-X-PART-INF:PART-TARGET=".concat(L.partTargetDuration)),L.mediaSequenceBase&&I.push("#EXT-X-MEDIA-SEQUENCE:".concat(L.mediaSequenceBase)),L.discontinuitySequenceBase&&I.push("#EXT-X-DISCONTINUITY-SEQUENCE:".concat(L.discontinuitySequenceBase)),L.playlistType&&I.push("#EXT-X-PLAYLIST-TYPE:".concat(L.playlistType)),L.isIFrame&&I.push("#EXT-X-I-FRAMES-ONLY"),L.skip>0&&I.push("#EXT-X-SKIP:SKIPPED-SEGMENTS=".concat(L.skip));var J,q=fe(L.segments.entries());try{for(q.s();!(J=q.n()).done;){var j,W=de(J.value,2),ae=W[0],ue=W[1],Oe=I.length,ve=de(wt(I,ue,f,l,L.version),3);f=ve[0],l=ve[1],(j=ve[2])==="OUT"?h=!0:j==="IN"&&h&&(h=!1),g!=null&&g.segmentProcessor&&g.segmentProcessor(I,Oe,I.length-1,ue,ae)}}catch(qe){q.e(qe)}finally{q.f()}L.playlistType==="VOD"&&h&&I.push("#EXT-X-CUE-IN"),L.prefetchSegments.length>2&&$e.INVALIDPLAYLIST("The server must deliver no more than two prefetch segments");var Ue,Ne=fe(L.prefetchSegments);try{for(Ne.s();!(Ue=Ne.n()).done;){var De=Ue.value;De.discontinuity&&I.push("#EXT-X-PREFETCH-DISCONTINUITY"),I.push("#EXT-X-PREFETCH:".concat(De.uri))}}catch(qe){Ne.e(qe)}finally{Ne.f()}L.endlist&&I.push("#EXT-X-ENDLIST");var ye,Ie=fe(L.renditionReports);try{for(Ie.s();!(ye=Ie.n()).done;){var Pe=ye.value,Qe=[];Qe.push('URI="'.concat(Pe.uri,'"'),"LAST-MSN=".concat(Pe.lastMSN)),Pe.lastPart!==void 0&&Qe.push("LAST-PART=".concat(Pe.lastPart)),I.push("#EXT-X-RENDITION-REPORT:".concat(Qe.join(",")))}}catch(qe){Ie.e(qe)}finally{Ie.f()}}(T,c,d),T.join(`
`)}}},R={},B=function H(_){var ee=R[_];if(ee!==void 0)return ee.exports;var z=R[_]={exports:{}};return i[_].call(z.exports,z,z.exports,H),z.exports}(73);return B})())})(Is);var Pv=Is.exports;const As=wa(Pv);function Cv(){As.setOptions({silent:!0})}function Xv(E){return E.sessionKeyList.some(s=>s.method&&s.method!=="NONE")}function Mv(E){return E.segments.some(s=>s.key&&s.key.method&&s.key.method!=="NONE")}const xv=["application/x-mpegurl","application/vnd.apple.mpegurl"],Uv=2*1024*1024,Fv={"video/mp4":"mp4","video/webm":"webm","video/ogg":"ogv","video/quicktime":"mov","video/x-msvideo":"avi","video/x-flv":"flv","video/mpeg":"mpeg","audio/mpeg":"mp3","audio/ogg":"ogg","audio/wav":"wav","audio/webm":"webm","audio/mp4":"m4a","audio/aac":"aac","audio/flac":"flac","audio/x-flac":"flac"};function Bv(E){if(!E)return null;const s=E.toLowerCase().split(";")[0].trim();return Fv[s]||null}function ss(E,s){const i={};return s.forEach((R,B)=>{i[B]=R}),E.requestHeaders=i,i}class Yv{constructor(s,i){this.tabId=s,this.onMediaListUpdated=i}currentMediaToProcess={};isClosed=!1;pageIndex=0;close(){this.reset(),this.isClosed=!0}isCanceled(s){return this.isClosed?!0:this.pageIndex!==s.pageIndex}reset(){this.pageIndex++,this.currentMediaToProcess={}}getOrCreateProcessingMedia(s){const i=this.currentMediaToProcess[s];if(typeof i=="object")return i;const R={link:s,pageIndex:this.pageIndex,isProcessed:!1};return this.currentMediaToProcess[s]=R,R}async process(s){if(!this.isAlreadyProcessed(s.url))switch(s.mediaType){case"hls":await this.processHLS(s.url,s.requestHeaders);break;case"http":await this.processHttp(s.url,s.requestHeaders,s.responseHeaders);break}}async processHttp(s,i,R){const B=this.getOrCreateProcessingMedia(s);if(B.isProcessed)return;B.isProcessed=!0,B.type="http",ss(B,i);let H=null,_=null;const ee=vs(R);if(ee&&(H=Ts(ee)),H||(H=Ra(s)),H&&(_=ba(H)),!_){const z=_a(R);z&&(_=Bv(z))}_&&(B.fileExtension=_,H&&(B.name=Nv(H)),B.size=gs(R)??void 0,this.onMediaProcessed(B))}async processHLS(s,i){const R=this.getOrCreateProcessingMedia(s);if(R.isProcessed)return;R.isProcessed=!0;const B=new Request(s,{headers:i}),H=await Kv(B);if(H==null)return;const _=this.parseHLS(H);if(_!=null)if(_.isMasterPlaylist){const ee=Xv(_);for(let z of _.variants){const de=this.getOrCreateProcessingMedia(z.uri);if(ee){de.isEncrypted=!0;continue}de.myVariant=z}if(ee)return;_.variants.forEach(z=>{const de=hn(()=>kv(B,z.uri));this.processHLS(de.url,de.headers)})}else{if(_.segments.length==0)return;const ee=Ra(_.segments[0].uri),z=ee&&ba(ee);if(z!=="ts")return;R.fileExtension=z,R.type="hls",R.link=B.url,R.duration=Sa.sumBy(_.segments,de=>de.duration),R.bandwidth=R.myVariant?.bandwidth,R.resolution=R.myVariant?.resolution,R.framerate=R.myVariant?.frameRate,R.isEncrypted=R.isEncrypted||Mv(_),ss(R,i),this.onMediaProcessed(R)}}parseHLS(s){return hn(()=>{try{return As.parse(s)}catch{return null}})}isAlreadyProcessed(s){return this.currentMediaToProcess[s]?.isProcessed??!1}async getTab(){try{return await Se.tabs.get(this.tabId)}catch{return null}}async onMediaProcessed(s){this.isCanceled(s)||await this.reloadList()}async reloadList(){const s=await this.getTab();if(!s)return;const i=s.title,R=s.url;if(!i||!R)return;const B=Sa.entries(this.currentMediaToProcess).map(([H,_])=>Gv(_,{pageTitle:i,pageUrlHash:$v(R,6)})).filter(H=>H!=null);this.onMediaListUpdated.onListUpdated(B)}}function Hv(E){return`${Math.round(E/1e3)}kbps`}function Wv(E){if(E<1024)return`${E} B`;const s=["KB","MB","GB","TB"];let i=-1;do E/=1024,i++;while(E>=1024&&i<s.length-1);return`${E.toFixed(2)} ${s[i]}`}function Gv(E,s){if(!E.type||E.isEncrypted||!E.fileExtension)return null;const i=[];let R;E.name?(R=E.name,i.push(R)):(R=s.pageTitle,i.push(s.pageTitle),i.push(s.pageUrlHash));let B;E.resolution&&(B=Vv(E.resolution),i.push(B)),E.framerate&&i.push(`${E.framerate}fps`);let H;typeof E.duration=="number"&&(H=qv(E.duration));let _;typeof E.bandwidth=="number"&&(_=Hv(E.bandwidth));let ee;return typeof E.size=="number"&&(ee=Wv(E.size)),{uri:E.link,requestHeaders:E.requestHeaders,displayName:R,suggestedFullName:i.join("-")+"."+E.fileExtension,type:E.type,duration:H,extension:E.fileExtension,size:ee,resolution:B,bandwidth:_}}function Vv(E){return`${E.width}p`}function qv(E){const s=Math.floor(E%60),i=Math.floor(E/60%60),R=Math.floor(E/3600),B=i.toString().padStart(2,"0"),H=s.toString().padStart(2,"0");return R==0?`${B}:${H}`:`${R.toString().padStart(2,"0")}:${B}:${H}`}async function Kv(E){const s=xv,i=Uv,R=await hn(async()=>{try{return await fetch(E)}catch{return null}});if(!R||!fs(R.status,200,299))return null;const B=R.headers.get("Content-Type")?.toLowerCase();if(!B)return null;const H=s.some(z=>B.startsWith(z)),_=gs(R.headers);let ee=!0;return _!==null&&_<i&&(ee=!1),H||!ee?await R.text():null}function kv(E,s){try{const i=new URL(s,E.url),R=new Request(i.toString());return E.headers.forEach((B,H,_)=>{R.headers.set(H,B)}),R}catch{return new Request(s)}}function $v(E,s=6){let i=0;for(let B=0;B<E.length;B++)i=i*31+E.charCodeAt(B)>>>0;let R="";for(let B=0;B<s;B++)R=String.fromCharCode(97+i%26)+R,i=Math.floor(i/26);return R}class zv{tabsMap={};constructor(){Cv()}getOrCreateMediaInPage(s){let i=this.tabsMap[s];return i||(i=new Yv(s,{onListUpdated(R){Qv(s,R)}}),this.tabsMap[s]=i),i}boot(){Se.tabs.onRemoved.addListener((s,i)=>{const R=this.tabsMap[s];R&&(R.close(),delete this.tabsMap[s])}),Se.tabs.onUpdated.addListener((s,i,R)=>{const B=this.tabsMap[s];B&&(i.status==="loading"||i.url)&&B.reset()})}async onMediaDetected(s,i){s<0||await this.getOrCreateMediaInPage(s).process(i)}}async function Qv(E,s){await Na("downloadable_media_detected",s,{tabId:E,context:"content-script"})}function Zv(){const E=new zv;E.boot();const s=hn(()=>{switch(ds()){case fi.chrome:return new Dv;case fi.firefox:return new Ov}});s.redirectDownloadsToExtension(),s.setOnMediaDetectedListener(E)}class Oa{disposables=[];add(s){this.disposables.push(s)}_dispose(s){s instanceof Oa?s.dispose():s()}dispose(){for(const s of this.disposables)try{this._dispose(s)}catch(i){console.error("can't dispose a disposable",i)}this.disposables=[]}}function jv(){let E=0;const s=()=>{E=setInterval(chrome.runtime.getPlatformInfo,1e4)};return chrome.runtime.onStartup.addListener(s),s(),()=>{clearInterval(E),chrome.runtime.onStartup.removeListener(s)}}const Jv=Se.runtime.getManifest().manifest_version,eT=Jv==3;function tT(){ri("add_download",async E=>await La(E.data)),ri("test_port",async E=>await rv(E.data)),ri("show_log",E=>{console.log(...E.data)}),ri("get_headers",async E=>await uv(E.data))}hn(async()=>{const E=new Oa;try{eT&&E.add(jv()),await qg(),await lv(),Zv(),tT(),console.log("ab dm extension loaded successfully")}catch(s){console.log("extension loading fail",s),E.dispose()}});
