import{r as d,j as e,o as w,a as g,u as M,A as C,S as T,R as A,E as D,m as P}from"../../ReactIcons-5a38ff49.js";import{c as U,r as k,b as r,C as m,d as j,a as I,g as F,e as _,o as R,s as f,M as B,f as L}from"../../Config-486537b1.js";import{c as O}from"../../NumberUtils-ebb78cfe.js";import{s as H}from"../../options-7f96258d.js";import"../../chunk-QIZ4XBKF-980296cc.js";function b(s,t){if(s===t)return!0;if(s.length!==t.length)return!1;for(let n=0;n<s.length;++n)if(s[n]!==t[n])return!1;return!0}var N={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var t={}.hasOwnProperty;function n(){for(var i="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(i=a(i,o(c)))}return i}function o(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var l="";for(var c in i)t.call(i,c)&&i[c]&&(l=a(l,c));return l}function a(i,l){return l?i?i+" "+l:i+l:i}s.exports?(n.default=n,s.exports=n):window.classNames=n})()})(N);var V=N.exports;const S=U(V);function W(s){return s.length===0}function v(s){return W(s.trim())}function y(s){const{value:t,onChange:n,style:o,...a}=s,i=d.useRef(null);return d.useEffect(()=>{const l=i.current;l&&(l.style.height="auto",l.style.height=l.scrollHeight+"px")},[t]),e.jsx("textarea",{...a,ref:i,value:t,onChange:n,style:{overflow:"hidden",resize:"none",...o}})}var q=Object.defineProperty,$=Object.getOwnPropertyDescriptor,p=(s,t,n,o)=>{for(var a=o>1?void 0:o?$(t,n):t,i=s.length-1,l;i>=0;i--)(l=s[i])&&(a=(o?l(t,n,a):l(a))||a);return o&&a&&q(t,n,a),a};class z{}class E extends z{constructor(t,n,o=null){super(),this.port=t,this.isSuccess=n,this.message=o}}class u extends D{constructor(t){super(),P(this),_.forEach(n=>{this.setConfigItem(n,t[n])})}setConfigItem(t,n){this[t]=n}setUp(){R.addEventListener(t=>{_.forEach(n=>{this.setConfigItem(n,t[n])})})}popupEnabled;autoCaptureLinks;silentAddDownload;silentStartDownload;port;sendHeaders;registeredFileTypes;blacklistedUrls;allowPassDownloadIfAppNotRespond;closeNewTabIfItWasCaptured;setAutoCaptureLinks(t){f("autoCaptureLinks",t)}setRegisteredFileTypes(t){f("registeredFileTypes",[...new Set(t)])}setBlacklistedUrls(t){f("blacklistedUrls",[...new Set(t)])}setPopupEnabled(t){f("popupEnabled",t)}setSilentAddDownload(t){f("silentAddDownload",t)}setSilentStartDownload(t){f("silentStartDownload",t)}setPort(t){f("port",t)}setSendHeaders(t){f("sendHeaders",t)}testPort(){k(async()=>{const t=this.port,n=await H("test_port",t,"background");typeof n=="boolean"?this.onEvent(new E(t,n)):console.log("there is no valid result for ping")})}}p([g],u.prototype,"popupEnabled",2);p([g],u.prototype,"autoCaptureLinks",2);p([g],u.prototype,"silentAddDownload",2);p([g],u.prototype,"silentStartDownload",2);p([g],u.prototype,"port",2);p([g],u.prototype,"sendHeaders",2);p([g],u.prototype,"registeredFileTypes",2);p([g],u.prototype,"blacklistedUrls",2);p([g],u.prototype,"allowPassDownloadIfAppNotRespond",2);p([g],u.prototype,"closeNewTabIfItWasCaptured",2);const G=w(s=>{const t=M(()=>s.vm);return d.useEffect(()=>{const n=o=>{if(o instanceof E){let a="";o.isSuccess?a+=r.i18n.getMessage("config_port_connection_success",[`${o.port}`]):(a+=r.i18n.getMessage("config_port_connection_fail",[`${o.port}`]),o.message&&(a+=`
${o.message}`)),alert(a)}};return t.addEventListener(n),()=>t.removeEventListener(n)}),e.jsxs("div",{"data-theme":"dark",className:"w-96 m-auto",children:[e.jsx(K,{}),e.jsx(J,{vm:t}),e.jsx(X,{})]})});function K(){return e.jsxs("div",{className:"p-4 flex flex-col justify-center items-center space-y-4",children:[e.jsx(C,{className:"w-16 h-16"}),e.jsx("span",{children:r.i18n.getMessage("option_ui_title")})]})}function X(){return e.jsxs("div",{className:"p-4 flex flex-col justify-center items-center space-y-4",children:[e.jsxs("span",{className:"",children:[r.i18n.getMessage("note_about_app_must_be_installed_first")," ",e.jsx("a",{target:"_blank",className:"link link-primary",href:m.downloadAppUrl,children:e.jsx("span",{children:r.i18n.getMessage("download_abdm_app")})})]}),e.jsx(x,{}),e.jsxs("div",{children:[e.jsx("span",{children:"❤️ | "}),e.jsx("span",{children:r.i18n.getMessage("support_by_rating")})]}),e.jsx(x,{}),e.jsxs("div",{className:"flex flex-row flex-wrap space-x-4",children:[e.jsx("a",{target:"_blank",className:"link link-primary",href:m.website,children:r.i18n.getMessage("project_website")}),e.jsx("a",{target:"_blank",className:"link link-primary",href:m.repository,children:r.i18n.getMessage("project_source_code")})]})]})}const J=w(s=>{const t=s.vm;return e.jsxs("div",{className:"bg-base-200",children:[e.jsxs("div",{className:"p-4 flex flex-row flex-nowrap items-center space-x-4",children:[e.jsx(T,{className:"w-8 h-8"}),e.jsx("span",{children:r.i18n.getMessage("settings")})]}),e.jsxs("div",{className:"p-4 bg-base-200 shadow",children:[e.jsx(Z,{value:t.autoCaptureLinks,toggle:n=>t.setAutoCaptureLinks(n),fileTypes:t.registeredFileTypes,defaultFileTypes:j.registeredFileTypes,blacklistedUrls:t.blacklistedUrls,defaultBlacklistedUrls:j.blacklistedUrls,setFileTypes:n=>t.setRegisteredFileTypes(n),setBlacklistedUrls:n=>t.setBlacklistedUrls(n)}),e.jsx(x,{}),e.jsx(Q,{value:t.popupEnabled,toggle:n=>t.setPopupEnabled(n)}),e.jsx(x,{}),e.jsx(Y,{silentAddEnabled:t.silentAddDownload,setSilentAddEnabled:n=>t.setSilentAddDownload(n),silentStartEnabled:t.silentStartDownload,setSilentStartEnabled:n=>t.setSilentStartDownload(n)}),e.jsx(x,{}),e.jsx(ee,{port:t.port,setPort:n=>t.setPort(n),onRequestTestPort:()=>t.testPort()}),e.jsx(x,{}),e.jsx(te,{enabled:t.sendHeaders,toggle:n=>t.setSendHeaders(n)})]})]})});function x(){return e.jsx("div",{className:"w-full bg-base-content/20 h-px my-4"})}function h(s){const t=s.enabled??!0,n=s.className??"";return e.jsx("div",{className:n,children:e.jsxs("div",{className:S("flex flex-col space-y-4",t?"":"cursor-not-allowed opacity-50"),children:[e.jsxs("div",{className:"flex flex-row items-center",children:[s.title,e.jsx("div",{className:"flex-grow"}),s.toggle]}),e.jsx("div",{className:"opacity-80",children:s.description})]})})}function Q(s){return e.jsx(h,{title:e.jsx("div",{children:r.i18n.getMessage("config_show_popups")}),toggle:e.jsx("input",{checked:s.value,onChange:t=>s.toggle(t.target.checked),type:"checkbox",className:"checkbox"}),description:e.jsx("div",{children:r.i18n.getMessage("config_show_popups_description")})})}function Y(s){return e.jsxs("div",{children:[e.jsx(h,{title:e.jsx("div",{children:r.i18n.getMessage("config_silent_add_download")}),toggle:e.jsx("input",{checked:s.silentAddEnabled,onChange:t=>s.setSilentAddEnabled(t.target.checked),type:"checkbox",className:"checkbox"}),description:e.jsx("div",{children:r.i18n.getMessage("config_silent_add_download_description")})}),e.jsx(h,{className:"px-4 pt-4",enabled:s.silentAddEnabled,title:e.jsx("div",{children:r.i18n.getMessage("config_silent_start_download")}),toggle:e.jsx("input",{checked:s.silentStartEnabled,onChange:t=>{s.silentAddEnabled&&s.setSilentStartEnabled(t.target.checked)},type:"checkbox",className:S("checkbox",!s.silentAddEnabled&&"input-disabled")}),description:e.jsx("div",{children:r.i18n.getMessage("config_silent_start_download_description")})})]})}function Z(s){const[t,n]=d.useState(""),o=d.useMemo(()=>!b(s.defaultFileTypes,s.fileTypes),[s.fileTypes]);d.useEffect(()=>{s.setFileTypes(t.split(" ").filter(c=>!v(c)))},[t]),d.useEffect(()=>{n(s.fileTypes.join(" "))},[o]);const[a,i]=d.useState(""),l=d.useMemo(()=>!b(s.defaultBlacklistedUrls,s.blacklistedUrls),[s.blacklistedUrls]);return d.useEffect(()=>{s.setBlacklistedUrls(a.split(`
`).filter(c=>!v(c)))},[a]),d.useEffect(()=>{i(s.blacklistedUrls.join(`
`))},[l]),e.jsx(h,{title:e.jsx("div",{children:r.i18n.getMessage("config_auto_capture_links")}),toggle:e.jsx("input",{checked:s.value,onChange:c=>s.toggle(c.target.checked),type:"checkbox",className:"checkbox"}),description:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{children:r.i18n.getMessage("config_auto_capture_links_description")}),e.jsx("div",{className:"mt-2"}),e.jsx(y,{className:"textarea",value:t,onChange:c=>{n(c.target.value)}}),o&&e.jsx("div",{onClick:()=>s.setFileTypes(s.defaultFileTypes),className:"link",children:r.i18n.getMessage("reset_to_default")}),e.jsx("div",{className:"mt-2"}),e.jsx("div",{children:r.i18n.getMessage("config_auto_capture_links_file_extensions_description")}),e.jsx("div",{className:"mt-3"}),e.jsx("div",{children:"Ignored Url patterns"}),e.jsx("div",{className:"mt-2"}),e.jsx(y,{className:"textarea",value:a,onChange:c=>{i(c.target.value)}}),l&&e.jsx("div",{onClick:()=>s.setBlacklistedUrls(s.defaultBlacklistedUrls),className:"link",children:r.i18n.getMessage("reset_to_default")}),e.jsx("div",{className:"mt-2"}),e.jsx("div",{children:r.i18n.getMessage("config_blacklisted_urls_description")})]})})}function ee(s){const[t,n]=d.useState(s.port);d.useEffect(()=>{n(s.port)},[s.port]);function o(){const a=O(t,L,B);n(a),s.setPort(a)}return e.jsx(h,{title:e.jsx("div",{children:r.i18n.getMessage("config_port")}),toggle:e.jsxs(e.Fragment,{children:[e.jsx("input",{value:t,onBlur:()=>o(),onChange:a=>{const i=a.target.value,l=Number.parseInt(i);Number.isNaN(l)||n(l)},type:"number",className:"w-32 input"}),e.jsx("button",{onClick:()=>s.onRequestTestPort(),className:"btn btn-primary normal-case",children:r.i18n.getMessage("test")})]}),description:e.jsx("div",{children:r.i18n.getMessage("config_port_description")})})}function te(s){return e.jsx(h,{title:e.jsx("div",{children:r.i18n.getMessage("config_send_cookies")}),toggle:e.jsx("input",{checked:s.enabled,onChange:t=>s.toggle(t.target.checked),type:"checkbox",className:"checkbox"}),description:e.jsx("div",{children:r.i18n.getMessage("config_send_cookies_descrption")})})}k(async()=>{await I();const s=new u(F()),t=document.getElementById("app");A.render(e.jsx(G,{vm:s}),t)});
